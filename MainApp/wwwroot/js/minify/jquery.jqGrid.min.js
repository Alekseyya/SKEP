!function(n){"use strict";"function"==typeof define&&define.amd?define(["jquery"],n):n(jQuery)}(function(n){"use strict";n.jgrid=n.jgrid||{};n.jgrid.hasOwnProperty("defaults")||(n.jgrid.defaults={});n.extend(n.jgrid,{version:"5.3.1",htmlDecode:function(n){return n&&("&nbsp;"===n||"&#160;"===n||1===n.length&&160===n.charCodeAt(0))?"":n?String(n).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&"):n},htmlEncode:function(n){return n?String(n).replace(/&/g,"&amp;").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):n},template:function(t){var i,r=n.makeArray(arguments).slice(1),u=r.length;return null==t&&(t=""),t.replace(/\{([\w\-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,function(t,f){if(!isNaN(parseInt(f,10)))return r[parseInt(f,10)];for(i=0;i<u;i++)if(n.isArray(r[i]))for(var e=r[i],o=e.length;o--;)if(f===e[o].nm)return e[o].v})},msie:function(){return n.jgrid.msiever()>0},msiever:function(){var n=0,t=window.navigator.userAgent,i=t.indexOf("MSIE");return i>0?n=parseInt(t.substring(i+5,t.indexOf(".",i))):navigator.userAgent.match(/Trident\/7\./)&&(n=11),n},getCellIndex:function(t){var i=n(t);return i.is("tr")?-1:(i=(i.is("td")||i.is("th")?i:i.closest("td,th"))[0],n.jgrid.msie()?n.inArray(i,i.parentNode.cells):i.cellIndex)},stripHtml:function(n){n=String(n);return n?(n=n.replace(/<("[^"]*"|'[^']*'|[^'">])*>/gi,""),n&&"&nbsp;"!==n&&"&#160;"!==n?n.replace(/\"/g,"'"):""):n},stripPref:function(t,i){var r=n.type(t);return"string"!==r&&"number"!==r||(t=String(t),i=""!==t?String(i).replace(String(t),""):i),i},useJSON:!0,parse:function(t){var i=t;return"while(1);"===i.substr(0,9)&&(i=i.substr(9)),"/*"===i.substr(0,2)&&(i=i.substr(2,i.length-4)),i||(i="{}"),!0===n.jgrid.useJSON&&"object"==typeof JSON&&"function"==typeof JSON.parse?JSON.parse(i):eval("("+i+")")},parseDate:function(t,i,r,u){var s,e,nt,rt=new RegExp("^/Date\\((([-+])?[0-9]+)(([-+])([0-9]{2})([0-9]{2}))?\\)/$"),l="string"==typeof i?i.match(rt):null,c=function(n,t){for(n=String(n),t=parseInt(t,10)||2;n.length<t;)n="0"+n;return n},f={m:1,d:1,y:1970,h:0,i:0,s:0,u:0},o=0,tt=function(n,t){return 0===n?12===t&&(t=0):12!==t&&(t+=12),t},h=0,v;if(void 0===u&&(u=n.jgrid.getRegional(this,"formatter.date")),void 0===u.parseRe&&(u.parseRe=/[#%\\\/:_;.,\t\s-]/),u.masks.hasOwnProperty(t)&&(t=u.masks[t]),i&&null!=i)if(isNaN(+i)||"u"!==String(t).toLowerCase())if(i.constructor===Date)o=i;else if(null!==l)o=new Date(parseInt(l[1],10)),l[3]&&(h=60*Number(l[5])+Number(l[6]),h*="-"===l[4]?1:-1,h-=o.getTimezoneOffset(),o.setTime(Number(Number(o)+6e4*h)));else{for("ISO8601Long"===u.srcformat&&"Z"===i.charAt(i.length-1)&&(h-=(new Date).getTimezoneOffset()),i=String(i).replace(/\T/g,"#").replace(/\t/,"%").split(u.parseRe),t=t.replace(/\T/g,"#").replace(/\t/,"%").split(u.parseRe),e=0,nt=t.length;e<nt;e++){switch(t[e]){case"M":s=n.inArray(i[e],u.monthNames);-1!==s&&s<12&&(i[e]=s+1,f.m=i[e]);break;case"F":s=n.inArray(i[e],u.monthNames,12);-1!==s&&s>11&&(i[e]=s+1-12,f.m=i[e]);break;case"n":t[e]="m";break;case"j":t[e]="d";break;case"a":s=n.inArray(i[e],u.AmPm);-1!==s&&s<2&&i[e]===u.AmPm[s]&&(i[e]=s,f.h=tt(i[e],f.h));break;case"A":s=n.inArray(i[e],u.AmPm);-1!==s&&s>1&&i[e]===u.AmPm[s]&&(i[e]=s-2,f.h=tt(i[e],f.h));break;case"g":f.h=parseInt(i[e],10)}void 0!==i[e]&&(f[t[e].toLowerCase()]=parseInt(i[e],10))}if(f.f&&(f.m=f.f),0===f.m&&0===f.y&&0===f.d)return"&#160;";f.m=parseInt(f.m,10)-1;v=f.y;v>=70&&v<=99?f.y=1900+f.y:v>=0&&v<=69&&(f.y=2e3+f.y);o=new Date(f.y,f.m,f.d,f.h,f.i,f.s,f.u);0!==h&&o.setTime(Number(Number(o)+6e4*h))}else o=new Date(1e3*parseFloat(i));else o=new Date(f.y,f.m,f.d,f.h,f.i,f.s,f.u);if(u.userLocalTime&&0===h&&0!=(h-=(new Date).getTimezoneOffset())&&o.setTime(Number(Number(o)+6e4*h)),void 0===r)return o;u.masks.hasOwnProperty(r)?r=u.masks[r]:r||(r="Y-m-d");var a=o.getHours(),ut=o.getMinutes(),w=o.getDate(),y=o.getMonth()+1,d=o.getTimezoneOffset(),ft=o.getSeconds(),et=o.getMilliseconds(),b=o.getDay(),p=o.getFullYear(),k=(b+6)%7+1,g=(new Date(p,y-1,w)-new Date(p,0,1))/864e5,it={d:c(w),D:u.dayNames[b],j:w,l:u.dayNames[b+7],N:k,S:u.S(w),w:b,z:g,W:k<5?Math.floor((g+k-1)/7)+1:Math.floor((g+k-1)/7)||((new Date(p-1,0,1).getDay()+6)%7<4?53:52),F:u.monthNames[y- -11],m:c(y),M:u.monthNames[y-1],n:y,t:"?",L:"?",o:"?",Y:p,y:String(p).substring(2),a:a<12?u.AmPm[0]:u.AmPm[1],A:a<12?u.AmPm[2]:u.AmPm[3],B:"?",g:a%12||12,G:a,h:c(a%12||12),H:c(a),i:c(ut),s:c(ft),u:et,e:"?",I:"?",O:(d>0?"-":"+")+c(100*Math.floor(Math.abs(d)/60)+Math.abs(d)%60,4),P:"?",T:(String(o).match(/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g)||[""]).pop().replace(/[^-+\dA-Z]/g,""),Z:"?",c:"?",r:"?",U:Math.floor(o/1e3)};return r.replace(/\\.|[dDjlNSwzWFmMntLoYyaABgGhHisueIOPTZcrU]/g,function(n){return it.hasOwnProperty(n)?it[n]:n.substring(1)})},jqID:function(n){return String(n).replace(/[!"#$%&'()*+,.\/:; <=>?@\[\\\]\^`{|}~]/g,"\\$&")},guid:1,uidPref:"jqg",randId:function(t){return(t||n.jgrid.uidPref)+n.jgrid.guid++},getAccessor:function(n,t){var i,u,f,r=[];if("function"==typeof t)return t(n);if(void 0===(i=n[t]))try{if("string"==typeof t&&(r=t.split(".")),f=r.length)for(i=n;i&&f--;)u=r.shift(),i=i[u]}catch(n){}return i},getXmlData:function(t,i,r){var f,u="string"==typeof i?i.match(/^(.*)\[(\w+)\]$/):null;return"function"==typeof i?i(t):u&&u[2]?u[1]?n(u[1],t).attr(u[2]):n(t).attr(u[2]):(f=n(i,t),r?f:f.length>0?n(f).text():void 0)},cellWidth:function(){var t=n("<div class='ui-jqgrid' style='left:10000px'><table class='ui-jqgrid-btable ui-common-table' style='width:5px;'><tr class='jqgrow'><td style='width:5px;display:block;'><\/td><\/tr><\/table><\/div>"),i=t.appendTo("body").find("td").width();return t.remove(),Math.abs(i-5)>.1},isLocalStorage:function(){try{return"localStorage"in window&&null!==window.localStorage}catch(n){return!1}},getRegional:function(t,i,r){var u;return void 0!==r?r:(t.p&&t.p.regional&&n.jgrid.regional&&(u=n.jgrid.getAccessor(n.jgrid.regional[t.p.regional]||{},i)),void 0===u&&(u=n.jgrid.getAccessor(n.jgrid,i)),u)},isMobile:function(){try{return!!/Android|webOS|iPhone|iPad|iPod|pocket|psp|kindle|avantgo|blazer|midori|Tablet|Palm|maemo|plucker|phone|BlackBerry|symbian|IEMobile|mobile|ZuneWP7|Windows Phone|Opera Mini/i.test(navigator.userAgent)}catch(n){return!1}},cell_width:!0,scrollbarWidth:function(){var t=n('<div style="width:50px;height:50px;overflow:hidden;position:absolute;top:-200px;left:-200px;"><div style="height:100px;"><\/div>'),i,r;return n("body").append(t),i=n("div",t).innerWidth(),t.css("overflow-y","scroll"),r=n("div",t).innerWidth(),n(t).remove(),i-r<0?18:i-r},ajaxOptions:{},from:function(t){var i=this,r=function(t,r){"string"==typeof t&&(t=n.data(t));var u=this,f=t,c=!0,s=!1,e=r,y=/[\$,%]/g,l=null,p=null,w=0,o=!1,v="",h=[],a=!0;if("object"!=typeof t||!t.push)throw"data provides is not an array";return t.length>0&&(a="object"==typeof t[0]),this._hasData=function(){return null!==f&&0!==f.length},this._getStr=function(n){var t=[];return s&&t.push("jQuery.trim("),t.push("String("+n+")"),s&&t.push(")"),c||t.push(".toLowerCase()"),t.join("")},this._strComp=function(n){return"string"==typeof n?".toString()":""},this._group=function(n,t){return{field:n.toString(),unique:t,items:[]}},this._toStr=function(t){return s&&(t=n.trim(t)),t=t.toString().replace(/\\/g,"\\\\").replace(/\"/g,'\\"'),c?t:t.toLowerCase()},this._funcLoop=function(t){var i=[];return n.each(f,function(n,r){i.push(t(r))}),i},this._append=function(n){var t;for(null===e?e="":e+=""===v?" && ":v,t=0;t<w;t++)e+="(";o&&(e+="!");e+="("+n+")";o=!1;v="";w=0},this._setCommand=function(n,t){l=n;p=t},this._resetNegate=function(){o=!1},this._repeatCommand=function(n,t){return null===l?u:null!==n&&null!==t?l(n,t):null===p?l(n):a?l(p,n):l(n)},this._equals=function(n,t){return 0===u._compare(n,t,1)},this._compare=function(n,t,i){var r=Object.prototype.toString;return void 0===i&&(i=1),void 0===n&&(n=null),void 0===t&&(t=null),null===n&&null===t?0:null===n&&null!==t?1:null!==n&&null===t?-1:"[object Date]"===r.call(n)&&"[object Date]"===r.call(t)?n<t?-i:n>t?i:0:(c||"number"==typeof n||"number"==typeof t||(n=String(n),t=String(t)),n<t?-i:n>t?i:0)},this._performSort=function(){0!==h.length&&(f=u._doSort(f,0))},this._doSort=function(n,t){var s=h[t].by,c=h[t].dir,l=h[t].type,a=h[t].datefmt,v=h[t].sfunc,i,r,f,e,o;if(t===h.length-1)return u._getOrder(n,s,c,l,a,v);for(t++,e=u._getGroup(n,s,c,l,a),o=[],i=0;i<e.length;i++)for(f=u._doSort(e[i].items,t),r=0;r<f.length;r++)o.push(f[r]);return o},this._getOrder=function(t,r,f,e,o,s){var v,h,l,p,w=[],a=[],b="a"===f?1:-1,k;for(void 0===e&&(e="text"),p="float"===e||"number"===e||"currency"===e||"numeric"===e?function(n){var t=parseFloat(String(n).replace(y,""));return isNaN(t)?Number.NEGATIVE_INFINITY:t}:"int"===e||"integer"===e?function(n){return n?parseFloat(String(n).replace(y,"")):Number.NEGATIVE_INFINITY}:"date"===e||"datetime"===e?function(t){return n.jgrid.parseDate.call(i,o,t).getTime()}:n.isFunction(e)?e:function(t){return t=t?n.trim(String(t)):"",c?t:t.toLowerCase()},n.each(t,function(t,i){h=""!==r?n.jgrid.getAccessor(i,r):i;void 0===h&&(h="");h=p(h,i);a.push({vSort:h,index:t})}),n.isFunction(s)?a.sort(function(n,t){return s.call(this,n.vSort,t.vSort,b,n,t)}):a.sort(function(n,t){return u._compare(n.vSort,t.vSort,b)}),l=0,k=t.length;l<k;)v=a[l].index,w.push(t[v]),l++;return w},this._getGroup=function(t,i,r,f,e){var o,h=[],s=null,c=null;return n.each(u._getOrder(t,i,r,f,e),function(t,r){o=n.jgrid.getAccessor(r,i);null==o&&(o="");u._equals(c,o)||(c=o,null!==s&&h.push(s),s=u._group(i,o));s.items.push(r)}),null!==s&&h.push(s),h},this.ignoreCase=function(){return c=!1,u},this.useCase=function(){return c=!0,u},this.trim=function(){return s=!0,u},this.noTrim=function(){return s=!1,u},this.execute=function(){var t=e,i=[];return null===t?u:(n.each(f,function(){eval(t)&&i.push(this)}),f=i,u)},this.data=function(){return f},this.select=function(t){if(u._performSort(),!u._hasData())return[];if(u.execute(),n.isFunction(t)){var i=[];return n.each(f,function(n,r){i.push(t(r))}),i}return f},this.hasMatch=function(){return!!u._hasData()&&(u.execute(),f.length>0)},this.andNot=function(n,t,i){return o=!o,u.and(n,t,i)},this.orNot=function(n,t,i){return o=!o,u.or(n,t,i)},this.not=function(n,t,i){return u.andNot(n,t,i)},this.and=function(n,t,i){return v=" && ",void 0===n?u:u._repeatCommand(n,t,i)},this.or=function(n,t,i){return v=" || ",void 0===n?u:u._repeatCommand(n,t,i)},this.orBegin=function(){return w++,u},this.orEnd=function(){return null!==e&&(e+=")"),u},this.isNot=function(n){return o=!o,u.is(n)},this.is=function(n){return u._append("this."+n),u._resetNegate(),u},this._compareValues=function(t,r,f,e,o){var h,s,c;if(h=a?"jQuery.jgrid.getAccessor(this,'"+r+"')":"this",void 0===f&&(f=null),s=f,c=void 0===o.stype?"text":o.stype,null!==f)switch(c){case"int":case"integer":s=isNaN(Number(s))||""===s?"0":s;h="parseInt("+h+",10)";s="parseInt("+s+",10)";break;case"float":case"number":case"numeric":s=String(s).replace(y,"");s=isNaN(Number(s))||""===s?"0":s;h="parseFloat("+h+")";s="parseFloat("+s+")";break;case"date":case"datetime":s=String(n.jgrid.parseDate.call(i,o.srcfmt||"Y-m-d",s).getTime());h='jQuery.jgrid.parseDate.call(jQuery("#'+n.jgrid.jqID(i.p.id)+'")[0],"'+o.srcfmt+'",'+h+").getTime()";break;default:h=u._getStr(h);s=u._getStr('"'+u._toStr(s)+'"')}return u._append(h+" "+e+" "+s),u._setCommand(t,r),u._resetNegate(),u},this.equals=function(n,t,i){return u._compareValues(u.equals,n,t,"==",i)},this.notEquals=function(n,t,i){return u._compareValues(u.equals,n,t,"!==",i)},this.isNull=function(n,t,i){return u._compareValues(u.equals,n,null,"===",i)},this.greater=function(n,t,i){return u._compareValues(u.greater,n,t,">",i)},this.less=function(n,t,i){return u._compareValues(u.less,n,t,"<",i)},this.greaterOrEquals=function(n,t,i){return u._compareValues(u.greaterOrEquals,n,t,">=",i)},this.lessOrEquals=function(n,t,i){return u._compareValues(u.lessOrEquals,n,t,"<=",i)},this.startsWith=function(t,i){var f=null==i?t:i,r=s?n.trim(f.toString()).length:f.toString().length;return a?u._append(u._getStr("jQuery.jgrid.getAccessor(this,'"+t+"')")+".substr(0,"+r+") == "+u._getStr('"'+u._toStr(i)+'"')):(null!=i&&(r=s?n.trim(i.toString()).length:i.toString().length),u._append(u._getStr("this")+".substr(0,"+r+") == "+u._getStr('"'+u._toStr(t)+'"'))),u._setCommand(u.startsWith,t),u._resetNegate(),u},this.endsWith=function(t,i){var r=null==i?t:i,f=s?n.trim(r.toString()).length:r.toString().length;return a?u._append(u._getStr("jQuery.jgrid.getAccessor(this,'"+t+"')")+".substr("+u._getStr("jQuery.jgrid.getAccessor(this,'"+t+"')")+".length-"+f+","+f+') == "'+u._toStr(i)+'"'):u._append(u._getStr("this")+".substr("+u._getStr("this")+'.length-"'+u._toStr(t)+'".length,"'+u._toStr(t)+'".length) == "'+u._toStr(t)+'"'),u._setCommand(u.endsWith,t),u._resetNegate(),u},this.contains=function(n,t){return a?u._append(u._getStr("jQuery.jgrid.getAccessor(this,'"+n+"')")+'.indexOf("'+u._toStr(t)+'",0) > -1'):u._append(u._getStr("this")+'.indexOf("'+u._toStr(n)+'",0) > -1'),u._setCommand(u.contains,n),u._resetNegate(),u},this.groupBy=function(n,t,i,r){return u._hasData()?u._getGroup(f,n,t,i,r):null},this.orderBy=function(t,i,r,f,e){return i=null==i?"a":n.trim(i.toString().toLowerCase()),null==r&&(r="text"),null==f&&(f="Y-m-d"),null==e&&(e=!1),"desc"!==i&&"descending"!==i||(i="d"),"asc"!==i&&"ascending"!==i||(i="a"),h.push({by:t,dir:i,type:r,datefmt:f,sfunc:e}),u},u};return new r(t,null)},getMethod:function(t){return this.getAccessor(n.fn.jqGrid,t)},extend:function(t){n.extend(n.fn.jqGrid,t);this.no_legacy_api||n.fn.extend(t)},clearBeforeUnload:function(t){var u,r=n("#"+n.jgrid.jqID(t))[0],i,e,f;if(r.grid){for(u=r.grid,n.isFunction(u.emptyRows)&&u.emptyRows.call(r,!0,!0),n(document).off("mouseup.jqGrid"+r.p.id),n(u.hDiv).off("mousemove"),n(r).off(),e=u.headers.length,f=["formatCol","sortData","updatepager","refreshIndex","setHeadCheckBox","constructTr","formatter","addXmlData","addJSONData","grid","p","addLocalData"],i=0;i<e;i++)u.headers[i].el=null;for(i in u)u.hasOwnProperty(i)&&(u[i]=null);for(i in r.p)r.p.hasOwnProperty(i)&&(r.p[i]=n.isArray(r.p[i])?[]:null);for(e=f.length,i=0;i<e;i++)r.hasOwnProperty(f[i])&&(r[f[i]]=null,delete r[f[i]])}},gridUnload:function(t){var i,f,u,r;t&&(t=n.trim(t),0===t.indexOf("#")&&(t=t.substring(1)),i=n("#"+n.jgrid.jqID(t))[0],i.grid&&(f={id:n(i).attr("id"),cl:n(i).attr("class")},i.p.pager&&n(i.p.pager).off().empty().removeClass("ui-state-default ui-jqgrid-pager ui-corner-bottom"),u=document.createElement("table"),u.className=f.cl,r=n.jgrid.jqID(i.id),n(u).removeClass("ui-jqgrid-btable ui-common-table").insertBefore("#gbox_"+r),1===n(i.p.pager).parents("#gbox_"+r).length&&n(i.p.pager).insertBefore("#gbox_"+r),n.jgrid.clearBeforeUnload(t),n("#gbox_"+r).remove(),n(u).attr({id:f.id}),n("#alertmod_"+n.jgrid.jqID(t)).remove()))},gridDestroy:function(t){if(t){t=n.trim(t);0===t.indexOf("#")&&(t=t.substring(1));var i=n("#"+n.jgrid.jqID(t))[0];if(i.grid){i.p.pager&&n(i.p.pager).remove();try{n.jgrid.clearBeforeUnload(t);n("#gbox_"+n.jgrid.jqID(t)).remove()}catch(t){}}}},isElementInViewport:function(n){var t=n.getBoundingClientRect();return t.left>=0&&t.right<=(window.innerWidth||document.documentElement.clientWidth)},styleUI:{jQueryUI:{common:{disabled:"ui-state-disabled",highlight:"ui-state-highlight",hover:"ui-state-hover",cornerall:"ui-corner-all",cornertop:"ui-corner-top",cornerbottom:"ui-corner-bottom",hidden:"ui-helper-hidden",icon_base:"ui-icon",overlay:"ui-widget-overlay",active:"ui-state-active",error:"ui-state-error",button:"ui-state-default ui-corner-all",content:"ui-widget-content"},base:{entrieBox:"ui-widget ui-widget-content ui-corner-all",viewBox:"",headerTable:"",headerBox:"ui-state-default",rowTable:"",rowBox:"ui-widget-content",stripedTable:"ui-jqgrid-table-striped",footerTable:"",footerBox:"ui-widget-content",headerDiv:"ui-state-default",gridtitleBox:"ui-widget-header ui-corner-top ui-helper-clearfix",customtoolbarBox:"ui-state-default",loadingBox:"ui-state-default ui-state-active",rownumBox:"ui-state-default",scrollBox:"ui-widget-content",multiBox:"",pagerBox:"ui-state-default ui-corner-bottom",pagerTable:"",toppagerBox:"ui-state-default",pgInput:"ui-corner-all",pgSelectBox:"ui-widget-content ui-corner-all",pgButtonBox:"ui-corner-all",icon_first:"ui-icon-seek-first",icon_prev:"ui-icon-seek-prev",icon_next:"ui-icon-seek-next",icon_end:"ui-icon-seek-end",icon_asc:"ui-icon-triangle-1-n",icon_desc:"ui-icon-triangle-1-s",icon_caption_open:"ui-icon-circle-triangle-n",icon_caption_close:"ui-icon-circle-triangle-s"},modal:{modal:"ui-widget ui-widget-content ui-corner-all ui-dialog",header:"ui-widget-header ui-corner-all ui-helper-clearfix",content:"ui-widget-content",resizable:"ui-resizable-handle ui-resizable-se",icon_close:"ui-icon-closethick",icon_resizable:"ui-icon-gripsmall-diagonal-se"},celledit:{inputClass:"ui-widget-content ui-corner-all"},inlinedit:{inputClass:"ui-widget-content ui-corner-all",icon_edit_nav:"ui-icon-pencil",icon_add_nav:"ui-icon-plus",icon_save_nav:"ui-icon-disk",icon_cancel_nav:"ui-icon-cancel"},formedit:{inputClass:"ui-widget-content ui-corner-all",icon_prev:"ui-icon-triangle-1-w",icon_next:"ui-icon-triangle-1-e",icon_save:"ui-icon-disk",icon_close:"ui-icon-close",icon_del:"ui-icon-scissors",icon_cancel:"ui-icon-cancel"},navigator:{icon_edit_nav:"ui-icon-pencil",icon_add_nav:"ui-icon-plus",icon_del_nav:"ui-icon-trash",icon_search_nav:"ui-icon-search",icon_refresh_nav:"ui-icon-refresh",icon_view_nav:"ui-icon-document",icon_newbutton_nav:"ui-icon-newwin"},grouping:{icon_plus:"ui-icon-circlesmall-plus",icon_minus:"ui-icon-circlesmall-minus"},filter:{table_widget:"ui-widget ui-widget-content",srSelect:"ui-widget-content ui-corner-all",srInput:"ui-widget-content ui-corner-all",menu_widget:"ui-widget ui-widget-content ui-corner-all",icon_search:"ui-icon-search",icon_reset:"ui-icon-arrowreturnthick-1-w",icon_query:"ui-icon-comment"},subgrid:{icon_plus:"ui-icon-plus",icon_minus:"ui-icon-minus",icon_open:"ui-icon-carat-1-sw"},treegrid:{icon_plus:"ui-icon-triangle-1-",icon_minus:"ui-icon-triangle-1-s",icon_leaf:"ui-icon-radio-off"},fmatter:{icon_edit:"ui-icon-pencil",icon_add:"ui-icon-plus",icon_save:"ui-icon-disk",icon_cancel:"ui-icon-cancel",icon_del:"ui-icon-trash"},colmenu:{menu_widget:"ui-widget ui-widget-content ui-corner-all",input_checkbox:"ui-widget ui-widget-content",filter_select:"ui-widget-content ui-corner-all",filter_input:"ui-widget-content ui-corner-all",icon_menu:"ui-icon-comment",icon_sort_asc:"ui-icon-arrow-1-n",icon_sort_desc:"ui-icon-arrow-1-s",icon_columns:"ui-icon-extlink",icon_filter:"ui-icon-calculator",icon_group:"ui-icon-grip-solid-horizontal",icon_freeze:"ui-icon-grip-solid-vertical",icon_move:"ui-icon-arrow-4",icon_new_item:"ui-icon-newwin",icon_toolbar_menu:"ui-icon-document"}},Bootstrap:{common:{disabled:"ui-disabled",highlight:"success",hover:"active",cornerall:"",cornertop:"",cornerbottom:"",hidden:"",icon_base:"glyphicon",overlay:"ui-overlay",active:"active",error:"bg-danger",button:"btn btn-default",content:""},base:{entrieBox:"",viewBox:"table-responsive",headerTable:"table table-bordered",headerBox:"",rowTable:"table table-bordered",rowBox:"",stripedTable:"table-striped",footerTable:"table table-bordered",footerBox:"",headerDiv:"",gridtitleBox:"",customtoolbarBox:"",loadingBox:"row",rownumBox:"active",scrollBox:"",multiBox:"checkbox",pagerBox:"",pagerTable:"table",toppagerBox:"",pgInput:"form-control",pgSelectBox:"form-control",pgButtonBox:"",icon_first:"glyphicon-step-backward",icon_prev:"glyphicon-backward",icon_next:"glyphicon-forward",icon_end:"glyphicon-step-forward",icon_asc:"glyphicon-triangle-top",icon_desc:"glyphicon-triangle-bottom",icon_caption_open:"glyphicon-circle-arrow-up",icon_caption_close:"glyphicon-circle-arrow-down"},modal:{modal:"modal-content",header:"modal-header",title:"modal-title",content:"modal-body",resizable:"ui-resizable-handle ui-resizable-se",icon_close:"glyphicon-remove-circle",icon_resizable:"glyphicon-import"},celledit:{inputClass:"form-control"},inlinedit:{inputClass:"form-control",icon_edit_nav:"glyphicon-edit",icon_add_nav:"glyphicon-plus",icon_save_nav:"glyphicon-save",icon_cancel_nav:"glyphicon-remove-circle"},formedit:{inputClass:"form-control",icon_prev:"glyphicon-step-backward",icon_next:"glyphicon-step-forward",icon_save:"glyphicon-save",icon_close:"glyphicon-remove-circle",icon_del:"glyphicon-trash",icon_cancel:"glyphicon-remove-circle"},navigator:{icon_edit_nav:"glyphicon-edit",icon_add_nav:"glyphicon-plus",icon_del_nav:"glyphicon-trash",icon_search_nav:"glyphicon-search",icon_refresh_nav:"glyphicon-refresh",icon_view_nav:"glyphicon-info-sign",icon_newbutton_nav:"glyphicon-new-window"},grouping:{icon_plus:"glyphicon-triangle-right",icon_minus:"glyphicon-triangle-bottom"},filter:{table_widget:"table table-condensed",srSelect:"form-control",srInput:"form-control",menu_widget:"",icon_search:"glyphicon-search",icon_reset:"glyphicon-refresh",icon_query:"glyphicon-comment"},subgrid:{icon_plus:"glyphicon-triangle-right",icon_minus:"glyphicon-triangle-bottom",icon_open:"glyphicon-indent-left"},treegrid:{icon_plus:"glyphicon-triangle-right",icon_minus:"glyphicon-triangle-bottom",icon_leaf:"glyphicon-unchecked"},fmatter:{icon_edit:"glyphicon-edit",icon_add:"glyphicon-plus",icon_save:"glyphicon-save",icon_cancel:"glyphicon-remove-circle",icon_del:"glyphicon-trash"},colmenu:{menu_widget:"",input_checkbox:"",filter_select:"form-control",filter_input:"form-control",icon_menu:"glyphicon-menu-hamburger",icon_sort_asc:"glyphicon-sort-by-alphabet",icon_sort_desc:"glyphicon-sort-by-alphabet-alt",icon_columns:"glyphicon-list-alt",icon_filter:"glyphicon-filter",icon_group:"glyphicon-align-left",icon_freeze:"glyphicon-object-align-horizontal",icon_move:"glyphicon-move",icon_new_item:"glyphicon-new-window",icon_toolbar_menu:"glyphicon-menu-hamburger"}},Bootstrap4:{common:{disabled:"ui-disabled",highlight:"table-success",hover:"table-active",cornerall:"",cornertop:"",cornerbottom:"",hidden:"",overlay:"ui-overlay",active:"active",error:"alert-danger",button:"btn btn-light",content:""},base:{entrieBox:"",viewBox:"table-responsive",headerTable:"table table-bordered",headerBox:"",rowTable:"table table-bordered",rowBox:"",stripedTable:"table-striped",footerTable:"table table-bordered",footerBox:"",headerDiv:"",gridtitleBox:"",customtoolbarBox:"",loadingBox:"row",rownumBox:"active",scrollBox:"",multiBox:"checkbox",pagerBox:"",pagerTable:"table",toppagerBox:"",pgInput:"form-control",pgSelectBox:"form-control",pgButtonBox:""},modal:{modal:"modal-content",header:"modal-header",title:"modal-title",content:"modal-body",resizable:"ui-resizable-handle ui-resizable-se",icon_close:"oi-circle-x",icon_resizable:"oi-circle-x"},celledit:{inputClass:"form-control"},inlinedit:{inputClass:"form-control"},formedit:{inputClass:"form-control"},navigator:{},grouping:{},filter:{table_widget:"table table-condensed",srSelect:"form-control",srInput:"form-control",menu_widget:""},subgrid:{},treegrid:{},fmatter:{},colmenu:{menu_widget:"",input_checkbox:"",filter_select:"form-control",filter_input:"form-control"}}},iconSet:{Iconic:{common:{icon_base:"oi"},base:{icon_first:"oi-media-step-backward",icon_prev:"oi-caret-left",icon_next:"oi-caret-right",icon_end:"oi-media-step-forward",icon_asc:"oi-caret-top",icon_desc:"oi-caret-bottom",icon_caption_open:"oi-collapse-up",icon_caption_close:"oi-expand-down"},modal:{icon_close:"oi-circle-x",icon_resizable:"oi-plus"},inlinedit:{icon_edit_nav:"oi-pencil",icon_add_nav:"oi-plus",icon_save_nav:"oi-check",icon_cancel_nav:"oi-action-undo"},formedit:{icon_prev:"oi-chevron-left",icon_next:"oi-chevron-right",icon_save:"oi-check",icon_close:"oi-ban",icon_del:"oi-delete",icon_cancel:"oi-ban"},navigator:{icon_edit_nav:"oi-pencil",icon_add_nav:"oi-plus",icon_del_nav:"oi-trash",icon_search_nav:"oi-zoom-in",icon_refresh_nav:"oi-reload",icon_view_nav:"oi-browser",icon_newbutton_nav:"oi-book"},grouping:{icon_plus:"oi-caret-right",icon_minus:"oi-caret-bottom"},filter:{icon_search:"oi-magnifying-glass",icon_reset:"oi-reload",icon_query:"oi-comment-square"},subgrid:{icon_plus:"oi-chevron-right",icon_minus:"oi-chevron-bottom",icon_open:"oi-expand-left"},treegrid:{icon_plus:"oi-plus",icon_minus:"oi-minus",icon_leaf:"oi-media-record"},fmatter:{icon_edit:"oi-pencil",icon_add:"oi-plus",icon_save:"oi-check",icon_cancel:"oi-action-undo",icon_del:"oi-trash"},colmenu:{icon_menu:"oi-list",icon_sort_asc:"oi-sort-ascending",icon_sort_desc:"oi-sort-descending",icon_columns:"oi-project",icon_filter:"oi-magnifying-glass",icon_group:"oi-list-rich",icon_freeze:"oi-spreadsheet",icon_move:"oi-move",icon_new_item:"oi-external-link",icon_toolbar_menu:"oi-menu"}},Octicons:{common:{icon_base:"octicon"},base:{icon_first:"octicon-triangle-left",icon_prev:"octicon-chevron-left",icon_next:"octicon-chevron-right",icon_end:"octicon-triangle-right",icon_asc:"octicon-triangle-up",icon_desc:"octicon-triangle-down",icon_caption_open:"octicon-triangle-up",icon_caption_close:"octicon-triangle-down"},modal:{icon_close:"octicon-x",icon_resizable:"octicon-plus"},inlinedit:{icon_edit_nav:"octicon-pencil",icon_add_nav:"octicon-plus",icon_save_nav:"octicon-check",icon_cancel_nav:"octicon-circle-slash"},formedit:{icon_prev:"octicon-chevron-left",icon_next:"octicon-chevron-right",icon_save:"octicon-check",icon_close:"octicon-x",icon_del:"octicon-trashcan",icon_cancel:"octicon-circle-slash"},navigator:{icon_edit_nav:"octicon-pencil",icon_add_nav:"octicon-plus",icon_del_nav:"octicon-trashcan",icon_search_nav:"octicon-search",icon_refresh_nav:"octicon-sync",icon_view_nav:"octicon-file",icon_newbutton_nav:"octicon-link-external"},grouping:{icon_plus:"octicon-triangle-right",icon_minus:"octicon-triangle-down"},filter:{icon_search:"octicon-search",icon_reset:"octicon-sync",icon_query:"octicon-file-code"},subgrid:{icon_plus:"octicon-triangle-right",icon_minus:"octicon-triangle-down",icon_open:"octicon-git-merge"},treegrid:{icon_plus:"octicon-triangle-right",icon_minus:"octicon-triangle-down",icon_leaf:"octicon-primitive-dot"},fmatter:{icon_edit:"octicon-pencil",icon_add:"octicon-plus",icon_save:"octicon-check",icon_cancel:"octicon-circle-slash",icon_del:"octicon-trashcan"},colmenu:{icon_menu:"octicon-grabber",icon_sort_asc:"octicon-arrow-down",icon_sort_desc:"octicon-arrow-up",icon_columns:"octicon-repo",icon_filter:"octicon-search",icon_group:"octicon-list-unordered",icon_freeze:"octicon-repo",icon_move:"octicon-git-compare",icon_new_item:"octicon-link-external",icon_toolbar_menu:"octicon-three-bars"}},fontAwesome:{common:{icon_base:"fas"},base:{icon_first:"fa-step-backward",icon_prev:"fa-backward",icon_next:"fa-forward",icon_end:"fa-step-forward",icon_asc:"fa-caret-up",icon_desc:"fa-caret-down",icon_caption_open:"fa-caret-square-up",icon_caption_close:"fa-caret-square-down "},modal:{icon_close:"fa-window-close",icon_resizable:"fa-plus"},inlinedit:{icon_edit_nav:"fa-edit",icon_add_nav:"fa-plus",icon_save_nav:"fa-save",icon_cancel_nav:"fa-replay"},formedit:{icon_prev:"fa-chevron-left",icon_next:"fa-chevron-right",icon_save:"fa-save",icon_close:"fa-window-close",icon_del:"fa-trash",icon_cancel:"fa-times"},navigator:{icon_edit_nav:"fa-edit",icon_add_nav:"fa-plus",icon_del_nav:"fa-trash",icon_search_nav:"fa-search",icon_refresh_nav:"fa-sync",icon_view_nav:"fa-sticky-note",icon_newbutton_nav:"fa-external-link-alt"},grouping:{icon_plus:"fa-caret-right",icon_minus:"fa-caret-down"},filter:{icon_search:"fa-search",icon_reset:"fa-reply",icon_query:"fa-pen-square "},subgrid:{icon_plus:"fa-arrow-circle-right",icon_minus:"fa-arrow-circle-down",icon_open:"fa-ellipsis-v"},treegrid:{icon_plus:"fa-plus",icon_minus:"fa-minus",icon_leaf:"fa-circle"},fmatter:{icon_edit:"fa-edit",icon_add:"fa-plus",icon_save:"fa-save",icon_cancel:"fa-undo",icon_del:"fa-trash"},colmenu:{icon_menu:"fa-ellipsis-v",icon_sort_asc:"fa-sort-amount-down",icon_sort_desc:"fa-sort-amount-up",icon_columns:"fa-columns",icon_filter:"fa-filter",icon_group:"fa-object-group",icon_freeze:"fa-snowflake",icon_move:"fa-expand-arrows-alt",icon_new_item:"fa-external-link-alt",icon_toolbar_menu:"fa-list"}}}});n.fn.jqGrid=function(t){var i,r;if("string"==typeof t){if(i=n.jgrid.getMethod(t),!i)throw"jqGrid - No such method: "+t;return r=n.makeArray(arguments).slice(1),i.apply(this,r)}return this.each(function(){function ir(t,r,u,f){if(i.p.multiselect&&i.p.multiboxonly||i.p.multimail)if(r)n(i).jqGrid("setSelection",t,f,u);else if(i.p.multiboxonly&&i.p.multimail)n(i).triggerHandler("jqGridSelectRow",[t,!1,u]),i.p.onSelectRow&&i.p.onSelectRow.call(i,t,!1,u);else{var e=i.p.frozenColumns?i.p.id+"_frozen":"";n(i.p.selarrrow).each(function(t,r){var u=n(i).jqGrid("getGridRowById",r);u&&n(u).removeClass(et);n("#jqg_"+n.jgrid.jqID(i.p.id)+"_"+n.jgrid.jqID(r))[i.p.useProp?"prop":"attr"]("checked",!1);e&&(n("#"+n.jgrid.jqID(r),"#"+n.jgrid.jqID(e)).removeClass(et),n("#jqg_"+n.jgrid.jqID(i.p.id)+"_"+n.jgrid.jqID(r),"#"+n.jgrid.jqID(e))[i.p.useProp?"prop":"attr"]("checked",!1))});i.p.selarrrow=[];n(i).jqGrid("setSelection",t,f,u)}else n(i).jqGrid("setSelection",t,f,u)}var gt,u,i,r,hi,ci,p,o,ot,br,ct,bt,di,kt,nt,gi,dt,y,tt,nr,ei,tr,oi,dr,si,gr,nu,tu;if(!this.grid){if(null!=t&&void 0!==t.data&&(gt=t.data,t.data=[]),u=n.extend(!0,{url:"",height:150,page:1,rowNum:20,rowTotal:null,records:0,pager:"",pgbuttons:!0,pginput:!0,colModel:[],rowList:[],colNames:[],sortorder:"asc",sortname:"",datatype:"xml",mtype:"GET",altRows:!1,selarrrow:[],savedRow:[],shrinkToFit:!0,xmlReader:{},jsonReader:{},subGrid:!1,subGridModel:[],reccount:0,lastpage:0,lastsort:0,selrow:null,beforeSelectRow:null,onSelectRow:null,onSortCol:null,ondblClickRow:null,onRightClickRow:null,onPaging:null,onSelectAll:null,onInitGrid:null,loadComplete:null,gridComplete:null,loadError:null,loadBeforeSend:null,afterInsertRow:null,beforeRequest:null,beforeProcessing:null,onHeaderClick:null,viewrecords:!1,loadonce:!1,multiselect:!1,multikey:!1,multiboxonly:!1,multimail:!1,multiselectWidth:30,editurl:null,search:!1,caption:"",hidegrid:!0,hiddengrid:!1,postData:{},userData:{},treeGrid:!1,treeGridModel:"nested",treeReader:{},treeANode:-1,ExpandColumn:null,tree_root_level:0,prmNames:{page:"page",rows:"rows",sort:"sidx",order:"sord",search:"_search",nd:"nd",id:"id",oper:"oper",editoper:"edit",addoper:"add",deloper:"del",subgridid:"id",npage:null,totalrows:"totalrows"},forceFit:!1,gridstate:"visible",cellEdit:!1,cellsubmit:"remote",nv:0,loadui:"enable",toolbar:[!1,""],scroll:!1,deselectAfterSort:!0,scrollrows:!1,autowidth:!1,scrollOffset:n.jgrid.scrollbarWidth()+3,cellLayout:5,subGridWidth:20,gridview:!0,rownumWidth:35,rownumbers:!1,pagerpos:"center",recordpos:"right",footerrow:!1,userDataOnFooter:!1,hoverrows:!0,viewsortcols:[!1,"vertical",!0],resizeclass:"",autoencode:!1,remapColumns:[],ajaxGridOptions:{},direction:"ltr",toppager:!1,headertitles:!1,scrollTimeout:40,data:[],_index:{},grouping:!1,groupingView:{groupField:[],groupOrder:[],groupText:[],groupColumnShow:[],groupSummary:[],showSummaryOnHide:!1,sortitems:[],sortnames:[],summary:[],summaryval:[],plusicon:"",minusicon:"",displayField:[],groupSummaryPos:[],formatDisplayField:[],_locgr:!1},ignoreCase:!0,cmTemplate:{},idPrefix:"",multiSort:!1,minColWidth:33,scrollPopUp:!1,scrollTopOffset:0,scrollLeftOffset:"100%",scrollMaxBuffer:0,storeNavOptions:!1,regional:"en",styleUI:"jQueryUI",iconSet:"Iconic",responsive:!1,restoreCellonFail:!0,colFilters:{},colMenu:!1,colMenuCustom:{},colMenuColumnDone:null,treeGrid_bigData:!1,treeGrid_rootParams:{otherData:{}},treeGrid_beforeRequest:null,treeGrid_afterLoadComplete:null,useNameForSearch:!1},n.jgrid.defaults,t),void 0!==gt&&(u.data=gt,t.data=gt),i=this,r={headers:[],cols:[],footers:[],dragStart:function(t,r,f){var o=n(this.bDiv).offset().left,e=parseInt(u.colModel[t].minResizeWidth?u.colModel[t].minResizeWidth:u.minColWidth,10);isNaN(e)&&(e=33);this.resizing={idx:t,startX:r.pageX,sOL:r.pageX-o,minW:e};this.hDiv.style.cursor="col-resize";this.curGbox=n("#rs_m"+n.jgrid.jqID(u.id),"#gbox_"+n.jgrid.jqID(u.id));this.curGbox.css({display:"block",left:r.pageX-o,top:f[1],height:f[2]});n(i).triggerHandler("jqGridResizeStart",[r,t]);n.isFunction(u.resizeStart)&&u.resizeStart.call(i,r,t);document.onselectstart=function(){return!1}},dragMove:function(n){if(this.resizing){var i,e,t=n.pageX-this.resizing.startX,r=this.headers[this.resizing.idx],f="ltr"===u.direction?r.width+t:r.width-t;f>this.resizing.minW&&(this.curGbox.css({left:this.resizing.sOL+t}),!0===u.forceFit?(i=this.headers[this.resizing.idx+u.nv],(e="ltr"===u.direction?i.width-t:i.width+t)>this.resizing.minW&&(r.newWidth=f,i.newWidth=e)):(this.newWidth="ltr"===u.direction?u.tblwidth+t:u.tblwidth-t,r.newWidth=f))}},dragEnd:function(t){if(this.hDiv.style.cursor="default",this.resizing){var r=this.resizing.idx,f=this.headers[r].newWidth||this.headers[r].width;f=parseInt(f,10);this.resizing=!1;n("#rs_m"+n.jgrid.jqID(u.id)).css("display","none");u.colModel[r].width=f;this.headers[r].width=f;this.headers[r].el.style.width=f+"px";this.cols[r].style.width=f+"px";this.footers.length>0&&(this.footers[r].style.width=f+"px");!0===u.forceFit?(f=this.headers[r+u.nv].newWidth||this.headers[r+u.nv].width,this.headers[r+u.nv].width=f,this.headers[r+u.nv].el.style.width=f+"px",this.cols[r+u.nv].style.width=f+"px",this.footers.length>0&&(this.footers[r+u.nv].style.width=f+"px"),u.colModel[r+u.nv].width=f):(u.tblwidth=this.newWidth||u.tblwidth,n("table:first",this.bDiv).css("width",u.tblwidth+"px"),n("table:first",this.hDiv).css("width",u.tblwidth+"px"),this.hDiv.scrollLeft=this.bDiv.scrollLeft,u.footerrow&&(n("table:first",this.sDiv).css("width",u.tblwidth+"px"),this.sDiv.scrollLeft=this.bDiv.scrollLeft));t&&(n(i).triggerHandler("jqGridResizeStop",[f,r]),n.isFunction(u.resizeStop)&&u.resizeStop.call(i,f,r))}this.curGbox=null;document.onselectstart=function(){return!0}},populateVisible:function(){var c,y,o,t;if(r.timer&&clearTimeout(r.timer),r.timer=null,c=n(r.bDiv).height(),c){if(t=n("table:first",r.bDiv),t[0].rows.length)try{y=t[0].rows[1];o=y?n(y).outerHeight()||r.prevRowHeight:r.prevRowHeight}catch(c){o=r.prevRowHeight}if(o){r.prevRowHeight=o;var f,l,p,s=u.rowNum,h=r.scrollTop=r.bDiv.scrollTop,a=Math.round(t.position().top)-h,v=a+t.height(),e=o*s;if(v<c&&a<=0&&(void 0===u.lastpage||(parseInt((v+h+e-1)/e,10)||0)<=u.lastpage)&&(l=parseInt((c-v+e-1)/e,10)||1,v>=0||l<2||!0===u.scroll?(f=(Math.round((v+h)/e)||0)+1,a=-1):a=1),a>0&&(f=(parseInt(h/e,10)||0)+1,l=(parseInt((h+c)/e,10)||0)+2-f,p=!0),l){if(u.lastpage&&(f>u.lastpage||1===u.lastpage||f===u.page&&f===u.lastpage))return;r.hDiv.loading?r.timer=setTimeout(r.populateVisible,u.scrollTimeout):(u.page=f,u.scrollMaxBuffer>0&&(s>0&&u.scrollMaxBuffer<s&&(u.scrollMaxBuffer=s+1),u.reccount>u.scrollMaxBuffer-(s>0?s:0)&&(p=!0)),p&&(r.selectionPreserver(t[0]),r.emptyRows.call(t[0],!1,!1)),r.populate(l));u.scrollPopUp&&null!=u.lastpage&&(n("#scroll_g"+u.id).show().html(n.jgrid.template(n.jgrid.getRegional(i,"defaults.pgtext",u.pgtext),u.page,u.lastpage)).css({top:u.scrollTopOffset+h*((parseInt(u.height,10)-45)/(parseInt(o,10)*parseInt(u.records,10)))+"px",left:u.scrollLeftOffset}),n(this).mouseout(function(){n("#scroll_g"+u.id).hide()}))}}}},scrollGrid:function(t){if(u.scroll){var i=r.bDiv.scrollTop;void 0===r.scrollTop&&(r.scrollTop=0);i!==r.scrollTop&&(r.scrollTop=i,r.timer&&clearTimeout(r.timer),r.timer=setTimeout(r.populateVisible,u.scrollTimeout))}r.hDiv.scrollLeft=r.bDiv.scrollLeft;u.footerrow&&(r.sDiv.scrollLeft=r.bDiv.scrollLeft);u.frozenColumns&&n(r.fbDiv).scrollTop(r.bDiv.scrollTop);t&&t.stopPropagation()},selectionPreserver:function(t){var i=t.p,u=i.selrow,r=i.selarrrow?n.makeArray(i.selarrrow):null,e=t.grid.bDiv.scrollLeft,f=function(){var o;if(i.selrow=null,i.selarrrow=[],i.multiselect&&r&&r.length>0)for(o=0;o<r.length;o++)r[o]!==u&&n(t).jqGrid("setSelection",r[o],!1,null);u&&n(t).jqGrid("setSelection",u,!1,null);t.grid.bDiv.scrollLeft=e;n(t).off(".selectionPreserver",f)};n(t).on("jqGridGridComplete.selectionPreserver",f)}},"TABLE"!==this.tagName.toUpperCase()||null==this.id)return void alert("Element is not a table or has no id!");if(void 0!==document.documentMode&&document.documentMode<=5)return void alert("Grid can not be used in this ('quirks') mode!");o=0;for(ci in n.jgrid.regional)n.jgrid.regional.hasOwnProperty(ci)&&(0===o&&(hi=ci),o++);if(1===o&&hi!==u.regional&&(u.regional=hi),n(this).empty().attr("tabindex","0"),this.p=u,this.p.useProp=!!n.fn.prop,0===this.p.colNames.length)for(o=0;o<this.p.colModel.length;o++)this.p.colNames[o]=this.p.colModel[o].label||this.p.colModel[o].name;if(this.p.colNames.length!==this.p.colModel.length)return void alert(n.jgrid.getRegional(this,"errors.model"));"Bootstrap4"===i.p.styleUI&&n.jgrid.iconSet.hasOwnProperty(i.p.iconSet)&&n.extend(!0,n.jgrid.styleUI.Bootstrap4,n.jgrid.iconSet[i.p.iconSet]);var rt,f=n.jgrid.getMethod("getStyleUI"),e=i.p.styleUI+".common",h=f(e,"disabled",!0),et=f(e,"highlight",!0),a=f(e,"hover",!0),iu=f(e,"cornerall",!0),w=f(e,"icon_base",!0),v=n.jgrid.styleUI[i.p.styleUI||"jQueryUI"].colmenu,rr=n.jgrid.msie(),k=[],ut=[],st=[];e=i.p.styleUI+".base";rt=n("<div "+f(e,"viewBox",!1,"ui-jqgrid-view")+" role='grid'><\/div>");i.p.direction=n.trim(i.p.direction.toLowerCase());i.p._ald=!1;-1===n.inArray(i.p.direction,["ltr","rtl"])&&(i.p.direction="ltr");p=i.p.direction;n(rt).insertBefore(this);n(this).appendTo(rt);ot=n("<div "+f(e,"entrieBox",!1,"ui-jqgrid")+"><\/div>");n(ot).attr({id:"gbox_"+this.id,dir:p}).insertBefore(rt);n(rt).attr("id","gview_"+this.id).appendTo(ot);n("<div "+f(i.p.styleUI+".common","overlay",!1,"jqgrid-overlay")+" id='lui_"+this.id+"'><\/div>").insertBefore(rt);n("<div "+f(e,"loadingBox",!1,"loading")+" id='load_"+this.id+"'>"+n.jgrid.getRegional(i,"defaults.loadtext",this.p.loadtext)+"<\/div>").insertBefore(rt);n(this).attr({role:"presentation","aria-multiselectable":!!this.p.multiselect,"aria-labelledby":"gbox_"+this.id});var ur,b=function(n,t){return n=parseInt(n,10),isNaN(n)?t||0:n},at=function(t,u,f,e,o,s){var y,a,h=i.p.colModel[t],p=h.align,l='style="',v=h.classes,w=h.name,c=[];return p&&(l+="text-align:"+p+";"),!0===h.hidden&&(l+="display:none;"),0===u?l+="width: "+r.headers[t].width+"px;":(n.isFunction(h.cellattr)||"string"==typeof h.cellattr&&null!=n.jgrid.cellattr&&n.isFunction(n.jgrid.cellattr[h.cellattr]))&&(y=n.isFunction(h.cellattr)?h.cellattr:n.jgrid.cellattr[h.cellattr],(a=y.call(i,o,f,e,h,s))&&"string"==typeof a&&(a=a.replace(/style/i,"style").replace(/title/i,"title"),a.indexOf("title")>-1&&(h.title=!1),a.indexOf("class")>-1&&(v=void 0),c=a.replace(/\-style/g,"-sti").split(/style/),2===c.length?(c[1]=n.trim(c[1].replace(/\-sti/g,"-style").replace("=","")),0!==c[1].indexOf("'")&&0!==c[1].indexOf('"')||(c[1]=c[1].substring(1)),l+=c[1].replace(/'/gi,'"')):l+='"')),c.length||(c[0]="",l+='"'),l+=(void 0!==v?' class="'+v+'"':"")+(h.title&&f?' title="'+n.jgrid.stripHtml(f)+'"':""),(l+=' aria-describedby="'+i.p.id+"_"+w+'"')+c[0]},fr=function(t){return null==t||""===t?"&#160;":i.p.autoencode?n.jgrid.htmlEncode(t):String(t)},er=function(t,r,u,f,e){var s,o=i.p.colModel[u],h;return void 0!==o.formatter?(t=""!==String(i.p.idPrefix)?n.jgrid.stripPref(i.p.idPrefix,t):t,h={rowId:t,colModel:o,gid:i.p.id,pos:u,styleUI:i.p.styleUI},s=n.isFunction(o.formatter)?o.formatter.call(i,r,h,f,e):n.fmatter?n.fn.fmatter.call(i,o.formatter,r,h,f,e):fr(r)):s=fr(r),s},li=function(n,t,i,r,u,f){var e;return e=er(n,t,i,u,"add"),'<td role="gridcell" '+at(i,r,e,u,n,f)+">"+e+"<\/td>"},or=function(n,t,r,u,f){var e='<input role="checkbox" type="checkbox" id="jqg_'+i.p.id+"_"+n+'" '+f+' name="jqg_'+i.p.id+"_"+n+'"'+(u?'checked="checked"':"")+"/>";return'<td role="gridcell" '+at(t,r,"",null,n,!0)+">"+e+"<\/td>"},sr=function(n,t,i,r,u){var f=(parseInt(i,10)-1)*parseInt(r,10)+1+t;return'<td role="gridcell" '+u+" "+at(n,t,f,null,t,!0)+">"+f+"<\/td>"},ai=function(n){for(var t,f=[],u=0,r=0;r<i.p.colModel.length;r++)t=i.p.colModel[r],"cb"!==t.name&&"subgrid"!==t.name&&"rn"!==t.name&&(f[u]="local"===n?t.name:"xml"===n||"xmlstring"===n?t.xmlmap||t.name:t.jsonmap||t.name,!1!==i.p.keyName&&!0===t.key&&(i.p.keyName=f[u],i.p.keyIndex=u),u++);return f},ni=function(t){var r=i.p.remapColumns;return r&&r.length||(r=n.map(i.p.colModel,function(n,t){return t})),t&&(r=n.map(r,function(n){return n<t?null:n-t})),r},vt=function(t,i){var r;this.p.deepempty?n(this.rows).slice(1).remove():(r=this.rows.length>0?this.rows[0]:null,n(this.firstChild).empty().append(r));t&&this.p.scroll&&(n(this.grid.bDiv.firstChild).css({height:"auto"}),n(this.grid.bDiv.firstChild.firstChild).css({height:"0px",display:"none"}),0!==this.grid.bDiv.scrollTop&&(this.grid.bDiv.scrollTop=0));!0===i&&this.p.treeGrid&&!this.p.loadonce&&(this.p.data=[],this.p._index={})},hr=function(){var e,s,t,f,u,h,w,c,b,k,y,r=i.p,l=r.data,d=l.length,o=r.localReader,p=r.colModel,a=o.cell,v=(!0===r.multiselect?1:0)+(!0===r.subGrid?1:0)+(!0===r.rownumbers?1:0),g=r.scroll?n.jgrid.randId():1;if("local"===r.datatype&&!0===o.repeatitems)for(b=ni(v),k=ai("local"),f=!1===r.keyName?n.isFunction(o.id)?o.id.call(i,l):o.id:r.keyName,e=0;e<d;e++){for(t=l[e],u=n.jgrid.getAccessor(t,f),void 0===u&&("number"==typeof f&&null!=p[f+v]&&(u=n.jgrid.getAccessor(t,p[f+v].name)),void 0===u&&(u=g+e,a&&(h=n.jgrid.getAccessor(t,a)||t,u=null!=h&&void 0!==h[f]?h[f]:u,h=null))),c={},c[o.id]=u,a&&(t=n.jgrid.getAccessor(t,a)||t),y=n.isArray(t)?b:k,s=0;s<y.length;s++)w=n.jgrid.getAccessor(t,y[s]),c[p[s+v].name]=w;l[e]=c}},vi=function(){var u,t,r,f=i.p.data.length;for(u=!1===i.p.keyName||!0===i.p.loadonce?i.p.localReader.id:i.p.keyName,i.p._index=[],t=0;t<f;t++)r=n.jgrid.getAccessor(i.p.data[t],u),void 0===r&&(r=String(t+1)),i.p._index[r]=t},yi=function(t,r,u,f,e){var s,c="-1",l="",h=r?"display:none;":"",o=n(i).triggerHandler("jqGridRowAttr",[f,e,t]);if("object"!=typeof o&&(o=n.isFunction(i.p.rowattr)?i.p.rowattr.call(i,f,e,t):"string"==typeof i.p.rowattr&&null!=n.jgrid.rowattr&&n.isFunction(n.jgrid.rowattr[i.p.rowattr])?n.jgrid.rowattr[i.p.rowattr].call(i,f,e,t):{}),!n.isEmptyObject(o)){o.hasOwnProperty("id")&&(t=o.id,delete o.id);o.hasOwnProperty("tabindex")&&(c=o.tabindex,delete o.tabindex);o.hasOwnProperty("style")&&(h+=o.style,delete o.style);o.hasOwnProperty("class")&&(u+=" "+o.class,delete o.class);try{delete o.role}catch(t){}for(s in o)o.hasOwnProperty(s)&&(l+=" "+s+"="+o[s])}return'<tr role="row" id="'+t+'" tabindex="'+c+'" class="'+u+'"'+(""===h?"":' style="'+h+'"')+l+">"},ru=function(){i.p.treeGrid&&i.p.treeGrid_bigData&&void 0!==i.p.postData.nodeid&&"string"==typeof i.p.postData.nodeid&&(""!==i.p.postData.nodeid||parseInt(i.p.postData.nodeid,10)>0)&&(i.p.postData.rows=1e4,i.p.postData.page=1,i.p.treeGrid_rootParams.otherData.nodeid=i.p.postData.nodeid)},uu=function(){i.p.treeGrid&&i.p.treeGrid_bigData&&(void 0!==i.p.treeGrid_rootParams.otherData.nodeid&&"string"==typeof i.p.treeGrid_rootParams.otherData.nodeid&&(""!==i.p.treeGrid_rootParams.otherData.nodeid||parseInt(i.p.treeGrid_rootParams.otherData.nodeid,10)>0)?void 0!==i.p.treeGrid_rootParams&&null!=i.p.treeGrid_rootParams&&(i.p.page=i.p.treeGrid_rootParams.page,i.p.lastpage=i.p.treeGrid_rootParams.lastpage,i.p.postData.rows=i.p.treeGrid_rootParams.postData.rows,i.p.postData.totalrows=i.p.treeGrid_rootParams.postData.totalrows,i.p.treeGrid_rootParams.otherData.nodeid="",i.updatepager(!1,!0)):i.p.treeGrid_rootParams={page:i.p.page,lastpage:i.p.lastpage,postData:{rows:i.p.postData.rows,totalrows:i.p.postData.totalrows},rowNum:i.p.rowNum,rowTotal:i.p.rowTotal,otherData:{nodeid:""}})},pi=function(t,r,u,o){var ti=new Date,et="local"!==i.p.datatype&&i.p.loadonce||"xmlstring"===i.p.datatype,ot="_id_",h=i.p.xmlReader,ii="local"===i.p.datatype?"local":"xml",tt,kt,dt,gt;if(et&&(i.p.data=[],i.p._index={},i.p.localReader.id=ot),i.p.reccount=0,n.isXMLDoc(t)){-1!==i.p.treeANode||i.p.scroll?r=r>1?r:1:(vt.call(i,!1,!0),r=1);var p,st,w,yt,it,lt,ut,a,l,nt=n(i),k=0,y=!0===i.p.multiselect?1:0,d=0,v=!0===i.p.rownumbers?1:0,ft=[],s={},c=[],ri=f(e,"rowBox",!0,"jqgrow ui-row-"+i.p.direction);!0===i.p.subGrid&&(d=1,yt=n.jgrid.getMethod("addSubGridCell"));h.repeatitems||(ft=ai(ii));it=!1===i.p.keyName?n.isFunction(h.id)?h.id.call(i,t):h.id:i.p.keyName;h.repeatitems&&i.p.keyName&&isNaN(it)&&(it=i.p.keyIndex);lt=-1===String(it).indexOf("[")?ft.length?function(t,i){return n(it,t).text()||i}:function(t,i){return n(h.cell,t).eq(it).text()||i}:function(n,t){return n.getAttribute(it.replace(/[\[\]]/g,""))||t};i.p.userData={};i.p.page=b(n.jgrid.getXmlData(t,h.page),i.p.page);i.p.lastpage=b(n.jgrid.getXmlData(t,h.total),1);i.p.records=b(n.jgrid.getXmlData(t,h.records));n.isFunction(h.userdata)?i.p.userData=h.userdata.call(i,t)||{}:n.jgrid.getXmlData(t,h.userdata,!0).each(function(){i.p.userData[this.getAttribute("name")]=n(this).text()});tt=n.jgrid.getXmlData(t,h.root,!0);tt=n.jgrid.getXmlData(tt,h.row,!0);tt||(tt=[]);var at,rt=tt.length,g=0,ht=[],ct=parseInt(i.p.rowNum,10),pt=i.p.scroll?n.jgrid.randId():1,wt=n(i).find("tbody:first"),bt=!1;if(i.p.grouping&&(bt=!0===i.p.groupingView.groupCollapse,at=n.jgrid.getMethod("groupingPrepare")),rt>0&&i.p.page<=0&&(i.p.page=1),tt&&rt){o&&(ct*=o+1);for(var ui=n.isFunction(i.p.afterInsertRow),fi=v?f(e,"rownumBox",!1,"jqgrid-rownum"):"",ei=y?f(e,"multiBox",!1,"cbox"):"";g<rt;){if(a=tt[g],l=lt(a,pt+g),l=i.p.idPrefix+l,kt=c.length,c.push(""),v&&c.push(sr(0,g,i.p.page,i.p.rowNum,fi)),y&&c.push(or(l,v,g,!1,ei)),d&&c.push(yt.call(nt,y+v,g+r)),h.repeatitems)ut||(ut=ni(y+d+v)),dt=n.jgrid.getXmlData(a,h.cell,!0),n.each(ut,function(n){var t=dt[this];if(!t)return!1;w=t.textContent||t.text||"";s[i.p.colModel[n+y+d+v].name]=w;c.push(li(l,w,n+y+d+v,g+r,a,s))});else for(p=0;p<ft.length;p++)w=n.jgrid.getXmlData(a,ft[p]),s[i.p.colModel[p+y+d+v].name]=w,c.push(li(l,w,p+y+d+v,g+r,a,s));if(c[kt]=yi(l,bt,ri,s,a),c.push("<\/tr>"),i.p.grouping&&(ht.push(c),i.p.groupingView._locgr||at.call(nt,s,g),c=[]),(et||!0===i.p.treeGrid&&!i.p._ald)&&(s[ot]=n.jgrid.stripPref(i.p.idPrefix,l),i.p.data.push(s),i.p._index[s[ot]]=i.p.data.length-1),!1===i.p.gridview&&(wt.append(c.join("")),nt.triggerHandler("jqGridAfterInsertRow",[l,s,a]),ui&&i.p.afterInsertRow.call(i,l,s,a),c=[]),s={},k++,g++,k===ct)break}}if(!0===i.p.gridview&&(st=i.p.treeANode>-1?i.p.treeANode:0,i.p.grouping?et||(nt.jqGrid("groupingRender",ht,i.p.colModel.length,i.p.page,ct),ht=null):!0===i.p.treeGrid&&st>0?n(i.rows[st]).after(c.join("")):(wt.append(c.join("")),i.grid.cols=i.rows[0].cells)),i.p.totaltime=new Date-ti,c=null,k>0&&0===i.p.records&&(i.p.records=rt),!0===i.p.treeGrid)try{nt.jqGrid("setTreeNode",st+1,k+st+1)}catch(t){}if(i.p.reccount=k,i.p.treeANode=-1,i.p.userDataOnFooter&&nt.jqGrid("footerData","set",i.p.userData,!0),et&&(i.p.records=rt,i.p.lastpage=Math.ceil(rt/ct)),u||i.updatepager(!1,!0),et){for(;k<rt;){if(a=tt[k],l=lt(a,k+pt),l=i.p.idPrefix+l,h.repeatitems)ut||(ut=ni(y+d+v)),gt=n.jgrid.getXmlData(a,h.cell,!0),n.each(ut,function(n){var t=gt[this];if(!t)return!1;w=t.textContent||t.text||"";s[i.p.colModel[n+y+d+v].name]=w});else for(p=0;p<ft.length;p++)w=n.jgrid.getXmlData(a,ft[p]),s[i.p.colModel[p+y+d+v].name]=w;s[ot]=n.jgrid.stripPref(i.p.idPrefix,l);i.p.grouping&&at.call(nt,s,k);i.p.data.push(s);i.p._index[s[ot]]=i.p.data.length-1;s={};k++}i.p.grouping&&(i.p.groupingView._locgr=!0,nt.jqGrid("groupingRender",ht,i.p.colModel.length,i.p.page,ct),ht=null)}if(!0===i.p.subGrid)try{nt.jqGrid("addSubGrid",y+v)}catch(t){}}},ti=function(t,r,u,o){var oi=new Date,ct,ei,lt;if(t){-1!==i.p.treeANode||i.p.scroll?r=r>1?r:1:(vt.call(i,!1,!0),r=1);var c,at,yt,d,w,s,bt,pt,it,rt,nt,a,ut,h,wt,ft="_id_",ot="local"!==i.p.datatype&&i.p.loadonce||"jsonstring"===i.p.datatype,tt=n(i),k=0,kt=[],p=i.p.multiselect?1:0,g=!0===i.p.subGrid?1:0,y=!0===i.p.rownumbers?1:0,dt=i.p.scroll&&"local"!==i.p.datatype?n.jgrid.randId():1,st=parseInt(i.p.rowNum,10),gt=!1,ti=ni(p+g+y),ii=ai(at),l={},v=[],ri=f(e,"rowBox",!0,"jqgrow ui-row-"+i.p.direction),si=n.isFunction(i.p.afterInsertRow),ht=[],ui=!1,fi=n(i).find("tbody:first"),hi=y?f(e,"rownumBox",!1,"jqgrid-rownum"):"",ci=p?f(e,"multiBox",!1,"cbox"):"";for(ot&&(i.p.data=[],i.p._index={},i.p.localReader.id=ft),i.p.reccount=0,"local"===i.p.datatype?(c=i.p.localReader,at="local"):(c=i.p.jsonReader,at="json"),i.p.page=b(n.jgrid.getAccessor(t,c.page),i.p.page),i.p.lastpage=b(n.jgrid.getAccessor(t,c.total),1),i.p.records=b(n.jgrid.getAccessor(t,c.records)),i.p.userData=n.jgrid.getAccessor(t,c.userdata)||{},g&&(bt=n.jgrid.getMethod("addSubGridCell")),a=!1===i.p.keyName?n.isFunction(c.id)?c.id.call(i,t):c.id:i.p.keyName,c.repeatitems&&i.p.keyName&&isNaN(a)&&(a=i.p.keyIndex),nt=n.jgrid.getAccessor(t,c.root),null==nt&&n.isArray(t)&&(nt=t),nt||(nt=[]),rt=nt.length,d=0,rt>0&&i.p.page<=0&&(i.p.page=1),o&&(st*=o+1),"local"!==i.p.datatype||i.p.deselectAfterSort||(gt=!0),i.p.grouping&&(ui=!0===i.p.groupingView.groupCollapse,wt=n.jgrid.getMethod("groupingPrepare"));d<rt;){for((s=nt[d],void 0===(h=n.jgrid.getAccessor(s,a))&&("number"==typeof a&&null!=i.p.colModel[a+p+g+y]&&(h=n.jgrid.getAccessor(s,i.p.colModel[a+p+g+y].name)),void 0===h&&(h=dt+d,0===kt.length&&c.cell)))&&(ct=n.jgrid.getAccessor(s,c.cell)||s,h=null!=ct&&void 0!==ct[a]?ct[a]:h,ct=null),h=i.p.idPrefix+h,gt&&(pt=i.p.multiselect?-1!==n.inArray(h,i.p.selarrrow):h===i.p.selrow),ei=v.length,v.push(""),y&&v.push(sr(0,d,i.p.page,i.p.rowNum,hi)),p&&v.push(or(h,y,d,pt,ci)),g&&v.push(bt.call(tt,p+y,d+r)),it=ii,c.repeatitems&&(c.cell&&(s=n.jgrid.getAccessor(s,c.cell)||s),n.isArray(s)&&(it=ti)),w=0;w<it.length;w++)yt=n.jgrid.getAccessor(s,it[w]),l[i.p.colModel[w+p+g+y].name]=yt,v.push(li(h,yt,w+p+g+y,d+r,s,l));if(v[ei]=yi(h,ui,pt?ri+" "+et:ri,l,s),v.push("<\/tr>"),i.p.grouping&&(ht.push(v),i.p.groupingView._locgr||wt.call(tt,l,d),v=[]),(ot||!0===i.p.treeGrid&&!i.p._ald)&&(l[ft]=n.jgrid.stripPref(i.p.idPrefix,h),i.p.data.push(l),i.p._index[l[ft]]=i.p.data.length-1),!1===i.p.gridview&&(fi.append(v.join("")),tt.triggerHandler("jqGridAfterInsertRow",[h,l,s]),si&&i.p.afterInsertRow.call(i,h,l,s),v=[]),l={},k++,d++,k===st)break}if(!0===i.p.gridview&&(ut=i.p.treeANode>-1?i.p.treeANode:0,i.p.grouping?ot||(tt.jqGrid("groupingRender",ht,i.p.colModel.length,i.p.page,st),ht=null):!0===i.p.treeGrid&&ut>0?n(i.rows[ut]).after(v.join("")):(fi.append(v.join("")),i.grid.cols=i.rows[0].cells)),i.p.totaltime=new Date-oi,v=null,k>0&&0===i.p.records&&(i.p.records=rt),!0===i.p.treeGrid)try{tt.jqGrid("setTreeNode",ut+1,k+ut+1)}catch(t){}if(i.p.reccount=k,i.p.treeANode=-1,i.p.userDataOnFooter&&tt.jqGrid("footerData","set",i.p.userData,!0),ot&&(i.p.records=rt,i.p.lastpage=Math.ceil(rt/st)),u||i.updatepager(!1,!0),ot){for(;k<rt&&nt[k];){if((s=nt[k],void 0===(h=n.jgrid.getAccessor(s,a))&&("number"==typeof a&&null!=i.p.colModel[a+p+g+y]&&(h=n.jgrid.getAccessor(s,i.p.colModel[a+p+g+y].name)),void 0===h&&(h=dt+k,0===kt.length&&c.cell)))&&(lt=n.jgrid.getAccessor(s,c.cell)||s,h=null!=lt&&void 0!==lt[a]?lt[a]:h,lt=null),s){for(h=i.p.idPrefix+h,it=ii,c.repeatitems&&(c.cell&&(s=n.jgrid.getAccessor(s,c.cell)||s),n.isArray(s)&&(it=ti)),w=0;w<it.length;w++)l[i.p.colModel[w+p+g+y].name]=n.jgrid.getAccessor(s,it[w]);l[ft]=n.jgrid.stripPref(i.p.idPrefix,h);i.p.grouping&&wt.call(tt,l,k);i.p.data.push(l);i.p._index[l[ft]]=i.p.data.length-1;l={}}k++}i.p.grouping&&(i.p.groupingView._locgr=!0,tt.jqGrid("groupingRender",ht,i.p.colModel.length,i.p.page,st),ht=null)}if(!0===i.p.subGrid)try{tt.jqGrid("addSubGrid",p+y)}catch(t){}}},cr=function(t){function et(t){var o,s,l,h,f,e,c=0,a;if(null!=t.groups){for(s=t.groups.length&&"OR"===t.groupOp.toString().toUpperCase(),s&&r.orBegin(),o=0;o<t.groups.length;o++){c>0&&s&&r.or();try{et(t.groups[o])}catch(t){alert(t)}c++}s&&r.orEnd()}if(null!=t.rules)try{for(l=t.rules.length&&"OR"===t.groupOp.toString().toUpperCase(),l&&r.orBegin(),o=0;o<t.rules.length;o++){if(f=t.rules[o],h=t.groupOp.toString().toUpperCase(),b[f.op]&&f.field){c>0&&h&&"OR"===h&&(r=r.or());a=f.field;i.p.useNameForSearch&&u.hasOwnProperty(f.field)&&(a=u[f.field].name);try{e=u[f.field];"date"===e.stype&&e.srcfmt&&e.newfmt&&e.srcfmt!==e.newfmt&&(f.data=n.jgrid.parseDate.call(i,e.newfmt,f.data,e.srcfmt));r=b[f.op](r,h)(a,f.data,e)}catch(t){}}c++}l&&r.orEnd()}catch(t){alert(t)}}var g,y,nt,s,f=i.p.multiSort?[]:"",ot=[],tt=!1,u={},it=[],st=[],p,e,h,w,b,r,l,v,c,ht,ct;if(n.isArray(i.p.data)){if(w=!!i.p.grouping&&i.p.groupingView,n.each(i.p.colModel,function(){if("cb"===this.name||"subgrid"===this.name||"rn"===this.name)return!0;if(y=this.sorttype||"text",h=this.index||this.name,"date"===y||"datetime"===y?(this.formatter&&"string"==typeof this.formatter&&"date"===this.formatter?(g=this.formatoptions&&this.formatoptions.srcformat?this.formatoptions.srcformat:n.jgrid.getRegional(i,"formatter.date.srcformat"),nt=this.formatoptions&&this.formatoptions.newformat?this.formatoptions.newformat:n.jgrid.getRegional(i,"formatter.date.newformat")):g=nt=this.datefmt||"Y-m-d",u[h]={stype:y,srcfmt:g,newfmt:nt,sfunc:this.sortfunc||null,name:this.name}):u[h]={stype:y,srcfmt:"",newfmt:"",sfunc:this.sortfunc||null,name:this.name},i.p.grouping)for(e=0,p=w.groupField.length;e<p;e++)this.name===w.groupField[e]&&(it[e]=u[h],st[e]=h);i.p.multiSort||tt||h!==i.p.sortname||(f=h,tt=!0)}),i.p.multiSort&&(f=k,ot=ut),i.p.treeGrid&&i.p._sort)return void n(i).jqGrid("SortTree",f,i.p.sortorder,u[f].stype||"text",u[f].srcfmt||"");if(b={eq:function(n){return n.equals},ne:function(n){return n.notEquals},lt:function(n){return n.less},le:function(n){return n.lessOrEquals},gt:function(n){return n.greater},ge:function(n){return n.greaterOrEquals},cn:function(n){return n.contains},nc:function(n,t){return"OR"===t?n.orNot().contains:n.andNot().contains},bw:function(n){return n.startsWith},bn:function(n,t){return"OR"===t?n.orNot().startsWith:n.andNot().startsWith},en:function(n,t){return"OR"===t?n.orNot().endsWith:n.andNot().endsWith},ew:function(n){return n.endsWith},ni:function(n,t){return"OR"===t?n.orNot().equals:n.andNot().equals},"in":function(n){return n.equals},nu:function(n){return n.isNull},nn:function(n,t){return"OR"===t?n.orNot().isNull:n.andNot().isNull}},r=n.jgrid.from.call(i,i.p.data),i.p.ignoreCase&&(r=r.ignoreCase()),!0===i.p.search)if(l=i.p.postData.filters,l)"string"==typeof l&&(l=n.jgrid.parse(l)),et(l);else try{s=u[i.p.postData.searchField];"date"===s.stype&&s.srcfmt&&s.newfmt&&s.srcfmt!==s.newfmt&&(i.p.postData.searchString=n.jgrid.parseDate.call(i,s.newfmt,i.p.postData.searchString,s.srcfmt));r=b[i.p.postData.searchOper](r)(i.p.postData.searchField,i.p.postData.searchString,u[i.p.postData.searchField])}catch(t){}else i.p.treeGrid&&"nested"===i.p.treeGridModel&&r.orderBy(i.p.treeReader.left_field,"asc","integer","",null);if(i.p.treeGrid&&"adjacency"===i.p.treeGridModel&&(p=0,f=null),i.p.grouping)for(e=0;e<p;e++)r.orderBy(st[e],w.groupOrder[e],it[e].stype,it[e].srcfmt);i.p.multiSort?n.each(f,function(n){r.orderBy(this,ot[n],u[this].stype,u[this].srcfmt,u[this].sfunc)}):f&&i.p.sortorder&&tt&&("DESC"===i.p.sortorder.toUpperCase()?r.orderBy(i.p.sortname,"d",u[f].stype,u[f].srcfmt,u[f].sfunc):r.orderBy(i.p.sortname,"a",u[f].stype,u[f].srcfmt,u[f].sfunc));var o=r.select(),d=parseInt(i.p.rowNum,10),rt=o.length,ft=parseInt(i.p.page,10),lt=Math.ceil(rt/d),a={};if((i.p.search||i.p.resetsearch)&&i.p.grouping&&i.p.groupingView._locgr){if(i.p.groupingView.groups=[],ct=n.jgrid.getMethod("groupingPrepare"),i.p.footerrow&&i.p.userDataOnFooter){for(c in i.p.userData)i.p.userData.hasOwnProperty(c)&&(i.p.userData[c]=0);ht=!0}for(v=0;v<rt;v++){if(ht)for(c in i.p.userData)i.p.userData.hasOwnProperty(c)&&(i.p.userData[c]+=parseFloat(o[v][c]||0));ct.call(n(i),o[v],v,d)}}return t?o:(o=i.p.treeGrid&&i.p.search?n(i).jqGrid("searchTree",o):o.slice((ft-1)*d,ft*d),r=null,u=null,a[i.p.localReader.total]=lt,a[i.p.localReader.page]=ft,a[i.p.localReader.records]=rt,a[i.p.localReader.root]=o,a[i.p.localReader.userdata]=i.p.userData,o=null,a)}},fu=function(t,r){var c,nt,o,w,l,k,y,it,v="",d=i.p.pager?n.jgrid.jqID(i.p.pager.substr(1)):"",u=d?"_"+d:"",s=i.p.toppager?"_"+i.p.toppager.substr(1):"",g,p,tt,rt,ut;(o=parseInt(i.p.page,10)-1,o<0&&(o=0),o*=parseInt(i.p.rowNum,10),l=o+i.p.reccount,i.p.scroll)&&(g=n("tbody:first > tr:gt(0)",i.grid.bDiv),l>i.p.records&&(l=i.p.records),o=l-g.length,i.p.reccount=g.length,p=g.outerHeight()||i.grid.prevRowHeight,p&&(tt=o*p,rt=parseInt(i.p.records,10)*p,n(">div:first",i.grid.bDiv).css({height:rt}).children("div:first").css({height:tt,display:tt?"":"none"}),0===i.grid.bDiv.scrollTop&&i.p.page>1&&(i.grid.bDiv.scrollTop=i.p.rowNum*(i.p.page-1)*p)),i.grid.bDiv.scrollLeft=i.grid.hDiv.scrollLeft);(v=i.p.pager||"",v+=i.p.toppager?v?","+i.p.toppager:i.p.toppager:"")&&((y=n.jgrid.getRegional(i,"formatter.integer"),c=b(i.p.page),nt=b(i.p.lastpage),n(".selbox",v)[this.p.useProp?"prop":"attr"]("disabled",!1),!0===i.p.pginput&&(n("#input"+u).html(n.jgrid.template(n.jgrid.getRegional(i,"defaults.pgtext",i.p.pgtext)||"","<input "+f(e,"pgInput",!1,"ui-pg-input")+" type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1_"+n.jgrid.jqID(d)+"'><\/span>")),i.p.toppager&&n("#input_t"+s).html(n.jgrid.template(n.jgrid.getRegional(i,"defaults.pgtext",i.p.pgtext)||"","<input "+f(e,"pgInput",!1,"ui-pg-input")+" type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1_"+n.jgrid.jqID(d)+"_toppager'><\/span>")),n(".ui-pg-input",v).val(i.p.page),it=i.p.toppager?"#sp_1"+u+",#sp_1"+u+"_toppager":"#sp_1"+u,n(it).html(n.fmatter?n.fmatter.util.NumberFormat(i.p.lastpage,y):i.p.lastpage)),i.p.viewrecords)&&(0===i.p.reccount?n(".ui-paging-info",v).html(n.jgrid.getRegional(i,"defaults.emptyrecords",i.p.emptyrecords)):(w=o+1,k=i.p.records,n.fmatter&&(w=n.fmatter.util.NumberFormat(w,y),l=n.fmatter.util.NumberFormat(l,y),k=n.fmatter.util.NumberFormat(k,y)),ut=n.jgrid.getRegional(i,"defaults.recordtext",i.p.recordtext),n(".ui-paging-info",v).html(n.jgrid.template(ut,w,l,k)))),!0===i.p.pgbuttons&&(c<=0&&(c=nt=0),1===c||0===c?(n("#first"+u+", #prev"+u).addClass(h).removeClass(a),i.p.toppager&&n("#first_t"+s+", #prev_t"+s).addClass(h).removeClass(a)):(n("#first"+u+", #prev"+u).removeClass(h),i.p.toppager&&n("#first_t"+s+", #prev_t"+s).removeClass(h)),c===nt||0===c?(n("#next"+u+", #last"+u).addClass(h).removeClass(a),i.p.toppager&&n("#next_t"+s+", #last_t"+s).addClass(h).removeClass(a)):(n("#next"+u+", #last"+u).removeClass(h),i.p.toppager&&n("#next_t"+s+", #last_t"+s).removeClass(h))));!0===t&&!0===i.p.rownumbers&&n(">td.jqgrid-rownum",i.rows).each(function(t){n(this).html(o+1+t)});r&&i.p.jqgdnd&&n(i).jqGrid("gridDnD","updateDnD");n(i).triggerHandler("jqGridGridComplete");n.isFunction(i.p.gridComplete)&&i.p.gridComplete.call(i);n(i).triggerHandler("jqGridAfterGridComplete")},yt=function(){i.grid.hDiv.loading=!0;i.p.hiddengrid||n(i).jqGrid("progressBar",{method:"show",loadtype:i.p.loadui,htmlcontent:n.jgrid.getRegional(i,"defaults.loadtext",i.p.loadtext)})},it=function(){i.grid.hDiv.loading=!1;n(i).jqGrid("progressBar",{method:"hide",loadtype:i.p.loadui})},ii=function(t,r,u){var f=n(i).triggerHandler("jqGridBeforeProcessing",[t,r,u]);return f=void 0===f||"boolean"!=typeof f||f,n.isFunction(i.p.beforeProcessing)&&!1===i.p.beforeProcessing.call(i,t,r,u)&&(f=!1),f},lr=function(t,r){n(i).triggerHandler("jqGridLoadComplete",[t]);r&&i.p.loadComplete.call(i,t);n(i).triggerHandler("jqGridAfterLoadComplete",[t]);i.p.datatype="local";i.p.datastr=null;it()},ft=function(t){var h,v,w,y,c,l,e;if(!i.grid.hDiv.loading){var p,f,b=i.p.scroll&&!1===t,u={},r=i.p.prmNames;i.p.page<=0&&(i.p.page=Math.min(1,i.p.lastpage));null!==r.search&&(u[r.search]=i.p.search);null!==r.nd&&(u[r.nd]=(new Date).getTime());null!==r.rows&&(u[r.rows]=i.p.rowNum);null!==r.page&&(u[r.page]=i.p.page);null!==r.sort&&(u[r.sort]=i.p.sortname);null!==r.order&&(u[r.order]=i.p.sortorder);null!==i.p.rowTotal&&null!==r.totalrows&&(u[r.totalrows]=i.p.rowTotal);var a=n.isFunction(i.p.loadComplete),o=a?i.p.loadComplete:null,s=0;if(t=t||1,t>1?null!==r.npage?(u[r.npage]=t,s=t-1,t=1):o=function(n){i.p.page++;i.grid.hDiv.loading=!1;a&&i.p.loadComplete.call(i,n);ft(t-1)}:null!==r.npage&&delete i.p.postData[r.npage],i.p.grouping){for(n(i).jqGrid("groupingSetup"),v=i.p.groupingView,w="",h=0;h<v.groupField.length;h++)y=v.groupField[h],n.each(i.p.colModel,function(n,t){t.name===y&&t.index&&(y=t.index)}),w+=y+" "+v.groupOrder[h]+", ";u[r.sort]=w+u[r.sort]}if(n.extend(i.p.postData,u),c=i.p.scroll?i.rows.length-1:1,n.isFunction(i.p.datatype))return void i.p.datatype.call(i,i.p.postData,"load_"+i.p.id,c,t,s);if(l=n(i).triggerHandler("jqGridBeforeRequest"),!1===l||"stop"===l)return;if(n.isFunction(i.p.beforeRequest)&&(!1===(l=i.p.beforeRequest.call(i))||"stop"===l))return;switch(n.isFunction(i.treeGrid_beforeRequest)&&i.treeGrid_beforeRequest.call(i),p=i.p.datatype.toLowerCase()){case"json":case"jsonp":case"xml":case"script":n.ajax(n.extend({url:i.p.url,type:i.p.mtype,dataType:p,data:n.isFunction(i.p.serializeGridData)?i.p.serializeGridData.call(i,i.p.postData):i.p.postData,success:function(r,u,f){if(!ii(r,u,f))return void it();"xml"===p?pi(r,c,t>1,s):ti(r,c,t>1,s);n(i).triggerHandler("jqGridLoadComplete",[r]);o&&o.call(i,r);n(i).triggerHandler("jqGridAfterLoadComplete",[r]);b&&i.grid.populateVisible();i.p.treeGrid_bigData?i.p.loadonce&&(i.p.datatype="local"):(i.p.loadonce||i.p.treeGrid)&&(i.p.datatype="local");r=null;1===t&&it();n.isFunction(i.treeGrid_afterLoadComplete)&&i.treeGrid_afterLoadComplete.call(i)},error:function(r,u,f){n(i).triggerHandler("jqGridLoadError",[r,u,f]);n.isFunction(i.p.loadError)&&i.p.loadError.call(i,r,u,f);1===t&&it();r=null},beforeSend:function(t,r){var u=!0;if(u=n(i).triggerHandler("jqGridLoadBeforeSend",[t,r]),n.isFunction(i.p.loadBeforeSend)&&(u=i.p.loadBeforeSend.call(i,t,r)),void 0===u&&(u=!0),!1===u)return!1;yt()}},n.jgrid.ajaxOptions,i.p.ajaxGridOptions));break;case"xmlstring":if(yt(),f="string"!=typeof i.p.datastr?i.p.datastr:n.parseXML(i.p.datastr),!ii(f,200,null))return void it();pi(f);lr(f,a);break;case"jsonstring":if(yt(),f="string"==typeof i.p.datastr?n.jgrid.parse(i.p.datastr):i.p.datastr,!ii(f,200,null))return void it();ti(f);lr(f,a);break;case"local":case"clientside":if(yt(),i.p.datatype="local",i.p._ald=!0,e=cr(!1),!ii(e,200,null))return void it();ti(e,c,t>1,s);n(i).triggerHandler("jqGridLoadComplete",[e]);o&&o.call(i,e);n(i).triggerHandler("jqGridAfterLoadComplete",[e]);b&&i.grid.populateVisible();it();i.p._ald=!1}i.p._sort=!1}},ri=function(t){n("#cb_"+n.jgrid.jqID(i.p.id),i.grid.hDiv)[i.p.useProp?"prop":"attr"]("checked",t);(i.p.frozenColumns?i.p.id+"_frozen":"")&&n("#cb_"+n.jgrid.jqID(i.p.id),i.grid.fhDiv)[i.p.useProp?"prop":"attr"]("checked",t)},ar=function(t,r){var o,tt,it,rt,c,ut,d,et="<td class='ui-pg-button "+h+"'><span class='ui-separator'><\/span><\/td>",l="",u="<table class='ui-pg-table ui-common-table ui-paging-pager'><tbody><tr>",v="",nt=function(t,r){var u;return"stop"!==(u=n(i).triggerHandler("jqGridPaging",[t,r]))&&(n.isFunction(i.p.onPaging)&&(u=i.p.onPaging.call(i,t,r)),"stop"!==u&&(i.p.selrow=null,i.p.multiselect&&(i.p.selarrrow=[],ri(!1)),i.p.savedRow=[],!0))},s;if(t=t.substr(1),r+="_"+t,o="pg_"+t,tt=t+"_left",it=t+"_center",rt=t+"_right",n("#"+n.jgrid.jqID(t)).append("<div id='"+o+"' class='ui-pager-control' role='group'><table "+f(e,"pagerTable",!1,"ui-pg-table ui-common-table ui-pager-table")+"><tbody><tr><td id='"+tt+"' align='left'><\/td><td id='"+it+"' align='center' style='white-space:pre;'><\/td><td id='"+rt+"' align='right'><\/td><\/tr><\/tbody><\/table><\/div>").attr("dir","ltr"),i.p.rowList.length>0){for(v='<td dir="'+p+'">',v+="<select "+f(e,"pgSelectBox",!1,"ui-pg-selbox")+' size="1" role="listbox" title="'+(n.jgrid.getRegional(i,"defaults.pgrecs",i.p.pgrecs)||"")+'">',d=0;d<i.p.rowList.length;d++)s=i.p.rowList[d].toString().split(":"),1===s.length&&(s[1]=s[0]),v+='<option role="option" value="'+s[0]+'"'+(b(i.p.rowNum,0)===b(s[0],0)?' selected="selected"':"")+">"+s[1]+"<\/option>";v+="<\/select><\/td>"}if("rtl"===p&&(u+=v),!0===i.p.pginput&&(l="<td id='input"+r+"' dir='"+p+"'>"+n.jgrid.template(n.jgrid.getRegional(i,"defaults.pgtext",i.p.pgtext)||"","<input class='ui-pg-input' type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1_"+n.jgrid.jqID(t)+"'><\/span>")+"<\/td>"),!0===i.p.pgbuttons){var y=["first"+r,"prev"+r,"next"+r,"last"+r],g=f(e,"pgButtonBox",!0,"ui-pg-button"),k=[n.jgrid.getRegional(i,"defaults.pgfirst",i.p.pgfirst)||"",n.jgrid.getRegional(i,"defaults.pgprev",i.p.pgprev)||"",n.jgrid.getRegional(i,"defaults.pgnext",i.p.pgnext)||"",n.jgrid.getRegional(i,"defaults.pglast",i.p.pglast)||""];"rtl"===p&&(y.reverse(),k.reverse());u+="<td id='"+y[0]+"' class='"+g+"' title='"+k[0]+"'><span "+f(e,"icon_first",!1,w)+"><\/span><\/td>";u+="<td id='"+y[1]+"' class='"+g+"'  title='"+k[1]+"'><span "+f(e,"icon_prev",!1,w)+"><\/span><\/td>";u+=""!==l?et+l+et:"";u+="<td id='"+y[2]+"' class='"+g+"' title='"+k[2]+"'><span "+f(e,"icon_next",!1,w)+"><\/span><\/td>";u+="<td id='"+y[3]+"' class='"+g+"' title='"+k[3]+"'><span "+f(e,"icon_end",!1,w)+"><\/span><\/td>"}else""!==l&&(u+=l);"ltr"===p&&(u+=v);u+="<\/tr><\/tbody><\/table>";!0===i.p.viewrecords&&n("td#"+t+"_"+i.p.recordpos,"#"+o).append("<div dir='"+p+"' style='text-align:"+i.p.recordpos+"' class='ui-paging-info'><\/div>");n("td#"+t+"_"+i.p.pagerpos,"#"+o).append(u);ut=n("#gbox_"+n.jgrid.jqID(i.p.id)).css("font-size")||"11px";n("#gbox_"+n.jgrid.jqID(i.p.id)).append("<div id='testpg' "+f(e,"entrieBox",!1,"ui-jqgrid")+" style='font-size:"+ut+";visibility:hidden;' ><\/div>");c=n(u).clone().appendTo("#testpg").width();n("#testpg").remove();c>0&&(""!==l&&(c+=50),n("td#"+t+"_"+i.p.pagerpos,"#"+o).width(c));i.p._nvtd=[];i.p._nvtd[0]=c?Math.floor((i.p.width-c)/2):Math.floor(i.p.width/3);i.p._nvtd[1]=0;u=null;n(".ui-pg-selbox","#"+o).on("change",function(){return!!nt("records",this)&&(i.p.page=Math.round(i.p.rowNum*(i.p.page-1)/this.value-.5)+1,i.p.rowNum=this.value,i.p.pager&&n(".ui-pg-selbox",i.p.pager).val(this.value),i.p.toppager&&n(".ui-pg-selbox",i.p.toppager).val(this.value),ft(),!1)});!0===i.p.pgbuttons&&(n(".ui-pg-button","#"+o).hover(function(){n(this).hasClass(h)?this.style.cursor="default":(n(this).addClass(a),this.style.cursor="pointer")},function(){n(this).hasClass(h)||(n(this).removeClass(a),this.style.cursor="default")}),n("#first"+n.jgrid.jqID(r)+", #prev"+n.jgrid.jqID(r)+", #next"+n.jgrid.jqID(r)+", #last"+n.jgrid.jqID(r)).click(function(){if(n(this).hasClass(h))return!1;var t=b(i.p.page,1),u=b(i.p.lastpage,1),f=!1,s=!0,c=!0,e=!0,o=!0;return 0===u||1===u?(s=!1,c=!1,e=!1,o=!1):u>1&&t>=1?1===t?(s=!1,c=!1):t===u&&(e=!1,o=!1):u>1&&0===t&&(e=!1,o=!1,t=u-1),!!nt(this.id.split("_")[0],this)&&(this.id==="first"+r&&s&&(i.p.page=1,f=!0),this.id==="prev"+r&&c&&(i.p.page=t-1,f=!0),this.id==="next"+r&&e&&(i.p.page=t+1,f=!0),this.id==="last"+r&&o&&(i.p.page=u,f=!0),f&&ft(),!1)}));!0===i.p.pginput&&n("#"+o).on("keypress","input.ui-pg-input",function(t){return 13===(t.charCode||t.keyCode||0)?!!nt("user",this)&&(n(this).val(b(n(this).val(),1)),i.p.page=n(this).val()>0?n(this).val():i.p.page,ft(),!1):this})},eu=function(t,r,u){var a,f=i.p.colModel,s=i.p.frozenColumns?r:i.grid.headers[t].el,e="",c,o,l;for(n("span.ui-grid-ico-sort",s).addClass(h),n(s).attr("aria-selected","false"),a=f[t].index||f[t].name,void 0===u?f[t].lso?"asc"===f[t].lso?(f[t].lso+="-desc",e="desc"):"desc"===f[t].lso?(f[t].lso+="-asc",e="asc"):"asc-desc"!==f[t].lso&&"desc-asc"!==f[t].lso||(f[t].lso=""):f[t].lso=e=f[t].firstsortorder||"asc":f[t].lso=e=u,e?(n("span.s-ico",s).show(),n("span.ui-icon-"+e,s).removeClass(h),n(s).attr("aria-selected","true")):i.p.viewsortcols[0]||n("span.s-ico",s).hide(),c=k.indexOf(a),-1===c?(k.push(a),ut.push(e)):e?ut[c]=e:(ut.splice(c,1),k.splice(c,1)),i.p.sortorder="",i.p.sortname="",o=0,l=k.length;o<l;o++)o>0&&(i.p.sortname+=", "),i.p.sortname+=k[o],o!==l-1&&(i.p.sortname+=" "+ut[o]);i.p.sortorder=ut[l-1]},ui=function(t,r,u,f,e){var a;if(i.p.colModel[r].sortable&&!(i.p.savedRow.length>0)){if(u||(i.p.lastsort===r&&""!==i.p.sortname?"asc"===i.p.sortorder?i.p.sortorder="desc":"desc"===i.p.sortorder&&(i.p.sortorder="asc"):i.p.sortorder=i.p.colModel[r].firstsortorder||"asc",i.p.page=1),i.p.multiSort)eu(r,e,f);else{if(f){if(i.p.lastsort===r&&i.p.sortorder===f&&!u)return;i.p.sortorder=f}var o,c=i.grid.headers[i.p.lastsort]?i.grid.headers[i.p.lastsort].el:null,s=i.p.frozenColumns?e:i.grid.headers[r].el,l="single"===i.p.viewsortcols[1];o=n(c).find("span.ui-grid-ico-sort");o.addClass(h);l&&n(o).css("display","none");n(c).attr("aria-selected","false");i.p.frozenColumns&&(o=i.grid.fhDiv.find("span.ui-grid-ico-sort"),o.addClass(h),l&&o.css("display","none"),i.grid.fhDiv.find("th").attr("aria-selected","false"));o=n(s).find("span.ui-icon-"+i.p.sortorder);o.removeClass(h);l&&o.css("display","");n(s).attr("aria-selected","true");i.p.viewsortcols[0]||(i.p.lastsort!==r?(i.p.frozenColumns&&i.grid.fhDiv.find("span.s-ico").hide(),n("span.s-ico",c).hide(),n("span.s-ico",s).show()):""===i.p.sortname&&n("span.s-ico",s).show());t=t.substring(5+i.p.id.length+1);i.p.sortname=i.p.colModel[r].index||t}if("stop"===n(i).triggerHandler("jqGridSortCol",[i.p.sortname,r,i.p.sortorder])||n.isFunction(i.p.onSortCol)&&"stop"===i.p.onSortCol.call(i,i.p.sortname,r,i.p.sortorder))return void(i.p.lastsort=r);("local"===i.p.datatype?i.p.deselectAfterSort&&n(i).jqGrid("resetSelection"):(i.p.selrow=null,i.p.multiselect&&ri(!1),i.p.selarrrow=[],i.p.savedRow=[]),i.p.scroll)&&(a=i.grid.bDiv.scrollLeft,vt.call(i,!0,!1),i.grid.hDiv.scrollLeft=a);i.p.subGrid&&"local"===i.p.datatype&&n("td.sgexpanded","#"+n.jgrid.jqID(i.p.id)).each(function(){n(this).trigger("click")});i.p._sort=!0;ft();i.p.lastsort=r;i.p.sortname!==t&&r&&(i.p.lastsort=r)}},ou=function(){var c,o,l,s,t=0,u=n.jgrid.cell_width?0:b(i.p.cellLayout,0),f=0,h=b(i.p.scrollOffset,0),a=!1,e=0;n.each(i.p.colModel,function(){if(void 0===this.hidden&&(this.hidden=!1),i.p.grouping&&i.p.autowidth){var r=n.inArray(this.name,i.p.groupingView.groupField);r>=0&&i.p.groupingView.groupColumnShow.length>r&&(this.hidden=!i.p.groupingView.groupColumnShow[r])}this.widthOrg=o=b(this.width,0);!1===this.hidden&&(t+=o+u,this.fixed?e+=o+u:f++)});isNaN(i.p.width)&&(i.p.width=t+(!1!==i.p.shrinkToFit||isNaN(i.p.height)?0:h));r.width=parseInt(i.p.width,10);i.p.tblwidth=t;!1===i.p.shrinkToFit&&!0===i.p.forceFit&&(i.p.forceFit=!1);!0===i.p.shrinkToFit&&f>0&&(l=r.width-u*f-e,isNaN(i.p.height)||(l-=h,a=!0),t=0,n.each(i.p.colModel,function(n){!1!==this.hidden||this.fixed||(o=Math.round(l*this.width/(i.p.tblwidth-u*f-e)),this.width=o,t+=o,c=n)}),s=0,a?r.width-e-(t+u*f)!==h&&(s=r.width-e-(t+u*f)-h):a||0===Math.abs(r.width-e-(t+u*f))||(s=r.width-e-(t+u*f)-nt),i.p.colModel[c].width+=s,i.p.tblwidth=t+s+u*f+e,i.p.tblwidth>i.p.width&&(i.p.colModel[c].width-=i.p.tblwidth-parseInt(i.p.width,10),i.p.tblwidth=i.p.width))},su=function(n){for(var u=n,r=n,t=n+1;t<i.p.colModel.length;t++)if(!0!==i.p.colModel[t].hidden){r=t;break}return r-u},hu=function(t){var u=n(i.grid.headers[t].el),r=[u.position().left+u.outerWidth()];return"rtl"===i.p.direction&&(r[0]=i.p.width-r[0]),r[0]-=i.grid.bDiv.scrollLeft,r.push(n(i.grid.hDiv).position().top),r.push(n(i.grid.bDiv).offset().top-n(i.grid.hDiv).offset().top+n(i.grid.bDiv).height()),r},vr=function(t){for(var u=i.grid.headers,f=n.jgrid.getCellIndex(t),r=0;r<u.length;r++)if(t===u[r].el){f=r;break}return f},cu=function(t,r,u){for(var c,o=i.p.colModel,l=o.length,e=[],y=n.jgrid.getRegional(i,"colmenu"),h='<ul id="col_menu" class="ui-search-menu  ui-col-menu modal-content" role="menu" tabindex="0" style="left:'+r+'px;">',f=0;f<l;f++){var p=o[f].hidden?"":"checked",s=o[f].name,b=i.p.colNames[f];c="cb"===s||"subgrid"===s||"rn"===s||o[f].hidedlg?"style='display:none'":"";h+="<li "+c+' class="ui-menu-item" role="presentation" draggable="true"><a class="g-menu-item" tabindex="0" role="menuitem" ><table class="ui-common-table" ><tr><td class="menu_icon" title="'+y.reorder+'"><span class="'+w+" "+v.icon_move+' notclick"><\/span><\/td><td class="menu_icon"><input class="'+v.input_checkbox+'" type="checkbox" name="'+s+'" '+p+'><\/td><td class="menu_text">'+b+"<\/td><\/tr><\/table><\/a><\/li>";e.push(f)}h+="<\/ul>";n(u).append(h);n("#col_menu").addClass("ui-menu "+v.menu_widget);n.jgrid.isElementInViewport(n("#col_menu")[0])||n("#col_menu").css("left",-parseInt(n("#column_menu").innerWidth(),10)+"px");n.fn.html5sortable()&&n("#col_menu").html5sortable({handle:"span",forcePlaceholderSize:!0}).on("sortupdate",function(t,r){for(e.splice(r.startindex,1),e.splice(r.endindex,0,r.startindex),n(i).jqGrid("destroyFrozenColumns"),n(i).jqGrid("remapColumns",e,!0),n(i).triggerHandler("jqGridColMenuColumnDone",[e,null,null]),n.isFunction(i.p.colMenuColumnDone)&&i.p.colMenuColumnDone.call(i,e,null,null),n(i).jqGrid("setFrozenColumns"),f=0;f<l;f++)e[f]=f});n("#col_menu > li > a").on("click",function(t){var r,u;n(t.target).hasClass("notclick")||(n(t.target).is(":input")?r=n(t.target).is(":checked"):(r=!n("input",this).is(":checked"),n("input",this).prop("checked",r)),u=n("input",this).attr("name"),n(i).triggerHandler("jqGridColMenuColumnDone",[e,u,r]),n.isFunction(i.p.colMenuColumnDone)&&i.p.colMenuColumnDone.call(i,e,u,r),r?(n(i).jqGrid("showCol",u),n(this).parent().attr("draggable","true")):(n(i).jqGrid("hideCol",u),n(this).parent().attr("draggable","false")))}).hover(function(){n(this).addClass(a)},function(){n(this).removeClass(a)})},lu=function(t,r,u,f){var h,k,g,c,s,e=i.p.colModel[t],nt="",d="",tt="",it="",rt="",p="",w=n.jgrid.getRegional(i,"search"),ut=n.jgrid.styleUI[i.p.styleUI||"jQueryUI"].common,o,l,b,y;e&&(h=!(!i.p.colFilters||!i.p.colFilters[e.name])&&i.p.colFilters[e.name],h&&!n.isEmptyObject(h)&&(nt=h.oper1,d=h.value1,tt=h.rule,it=h.oper2,rt=h.value2),e.searchoptions||(e.searchoptions={}),k=e.searchoptions.sopt?e.searchoptions.sopt:"text"===e.sorttype?["eq","ne","bw","bn","ew","en","cn","nc","nu","nn","in","ni"]:["eq","ne","lt","le","gt","ge","nu","nn","in","ni"],g=e.searchoptions.groupOps?e.searchoptions.groupOps:w.groupOps,s=n("<form><\/form>"),o="<div>"+n.jgrid.getRegional(i,"colmenu.searchTitle")+"<\/div>",o+='<div><select size="1" id="oper1" class="'+v.filter_select+'">',n.each(w.odata,function(t,i){c=i.oper===nt?'selected="selected"':"";-1!==n.inArray(i.oper,k)&&(p+='<option value="'+i.oper+'" '+c+">"+i.text+"<\/option>")}),o+=p,o+="<\/select><\/div>",s.append(o),l="",e.searchoptions.defaultValue&&(l=n.isFunction(e.searchoptions.defaultValue)?e.searchoptions.defaultValue.call(i):e.searchoptions.defaultValue),d&&(l=d),b=n.extend(e.searchoptions,{name:e.index||e.name,id:"sval1_"+i.p.idPrefix+e.name,oper:"search"}),y=n.jgrid.createEl.call(i,e.stype,b,l,!1,n.extend({},n.jgrid.ajaxOptions,i.p.ajaxSelectOptions||{})),n(y).addClass(v.filter_input),o=n("<div><\/div>").append(y),s.append(o),o='<div><select size="1" id="operand" class="'+v.filter_select+'">',n.each(g,function(n,t){c=t.op===tt?'selected="selected"':"";o+="<option value='"+t.op+"' "+c+">"+t.text+"<\/option>"}),o+="<\/select><\/div>",s.append(o),p="",n.each(w.odata,function(t,i){c=i.oper===it?'selected="selected"':"";-1!==n.inArray(i.oper,k)&&(p+='<option value="'+i.oper+'" '+c+">"+i.text+"<\/option>")}),o='<div><select size="1" id="oper2" class="'+v.filter_select+'">'+p+"<\/select><\/div>",s.append(o),l=rt||"",b=n.extend(e.searchoptions,{name:e.index||e.name,id:"sval2_"+i.p.idPrefix+e.name,oper:"search"}),y=n.jgrid.createEl.call(i,e.stype,b,l,!1,n.extend({},n.jgrid.ajaxOptions,i.p.ajaxSelectOptions||{})),n(y).addClass(v.filter_input),o=n("<div><\/div>").append(y),s.append(o),o="<div>",o+="<div class='search_buttons'><a tabindex='0' id='bs_reset' class='fm-button "+ut.button+" ui-reset'>"+w.Reset+"<\/a><\/div>",o+="<div class='search_buttons'><a tabindex='0' id='bs_search' class='fm-button "+ut.button+" ui-search'>"+w.Find+"<\/a><\/div>",o+="<\/div>",s.append(o),s=n('<li class="ui-menu-item" role="presentation"><\/li>').append(s),s=n('<ul id="search_menu" class="ui-search-menu modal-content" role="menu" tabindex="0" style="left:'+u+'px;"><\/ul>').append(s),n(f).append(s),n("#search_menu").addClass("ui-menu "+v.menu_widget),n.jgrid.isElementInViewport(n("#search_menu")[0])||n("#search_menu").css("left",-parseInt(n("#column_menu").innerWidth(),10)+"px"),n("#bs_reset, #bs_search","#search_menu").hover(function(){n(this).addClass(a)},function(){n(this).removeClass(a)}),n("#bs_reset",s).on("click",function(){i.p.colFilters[e.name]={};i.p.postData.filters=yr();i.p.search=!1;n(i).trigger("reloadGrid");n("#column_menu").remove()}),n("#bs_search",s).on("click",function(){i.p.colFilters[e.name]={oper1:n("#oper1","#search_menu").val(),value1:n("#sval1_"+i.p.idPrefix+e.name,"#search_menu").val(),rule:n("#operand","#search_menu").val(),oper2:n("#oper2","#search_menu").val(),value2:n("#sval2_"+i.p.idPrefix+e.name,"#search_menu").val()};i.p.postData.filters=yr();i.p.search=!0;n(i).trigger("reloadGrid");n("#column_menu").remove()}))},yr=function(){var t='{"groupOp":"AND","rules":[], "groups" : [',f=0,u,r;for(u in i.p.colFilters)i.p.colFilters.hasOwnProperty(u)&&(r=i.p.colFilters[u],n.isEmptyObject(r)||(f>0&&(t+=","),t+='{"groupOp": "'+r.rule+'", "rules" : [',t+='{"field":"'+u+'",',t+='"op":"'+r.oper1+'",',r.value1+="",t+='"data":"'+r.value1.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}',r.value2&&(t+=',{"field":"'+u+'",',t+='"op":"'+r.oper2+'",',r.value2+="",t+='"data":"'+r.value2.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}'),t+="]}",f++));return t+"]}"},au=function(t,r){var f=i.p.colModel[t],u=i.p.groupingView;-1!==r?u.groupField.splice(r,1):u.groupField.push(f.name);n(i).jqGrid("groupingGroupBy",u.groupField);i.p.frozenColumns&&(n(i).jqGrid("destroyFrozenColumns"),n(i).jqGrid("setFrozenColumns"))},vu=function(t,r){for(var f=[],s=i.p.colModel.length,e=-1,o=i.p.colModel,u=0;u<s;u++)o[u].frozen&&(e=u),f.push(u);f.splice(t,1);f.splice(e+(r?1:0),0,t);o[t].frozen=r;n(i).jqGrid("destroyFrozenColumns");n(i).jqGrid("remapColumns",f,!0);n(i).jqGrid("setFrozenColumns")},yu=function(t,r,u){var g,o,l,nt;r=parseInt(r,10);u=parseInt(u,10)+10;var y,p,f="",b="",h=i.p.colModel[t],c=n.extend({sorting:!0,columns:!0,filtering:!0,seraching:!0,grouping:!0,freeze:!0},h.coloptions),s=n.jgrid.getRegional(i,"colmenu"),k=i.p.colNames[t],e=[],d=n.trim(h.name);e.push(f);c.sorting&&(f='<li class="ui-menu-item" role="presentation"><a class="g-menu-item" tabindex="0" role="menuitem" data-value="sortasc"><table class="ui-common-table"><tr><td class="menu_icon"><span class="'+w+" "+v.icon_sort_asc+'"><\/span><\/td><td class="menu_text">'+s.sortasc+"<\/td><\/tr><\/table><\/a><\/li>",f+='<li class="ui-menu-item" role="presentation"><a class="g-menu-item" tabindex="0" role="menuitem" data-value="sortdesc"><table class="ui-common-table"><tr><td class="menu_icon"><span class="'+w+" "+v.icon_sort_desc+'"><\/span><\/td><td class="menu_text">'+s.sortdesc+"<\/td><\/tr><\/table><\/a><\/li>",e.push(f));c.columns&&(f='<li class="ui-menu-item divider" role="separator"><\/li>',f+='<li class="ui-menu-item" role="presentation"><a class="g-menu-item" tabindex="0" role="menuitem" data-value="columns"><table class="ui-common-table"><tr><td class="menu_icon"><span class="'+w+" "+v.icon_columns+'"><\/span><\/td><td class="menu_text">'+s.columns+"<\/td><\/tr><\/table><\/a><\/li>",e.push(f));c.filtering&&(f='<li class="ui-menu-item divider" role="separator"><\/li>',f+='<li class="ui-menu-item" role="presentation"><a class="g-menu-item" tabindex="0" role="menuitem" data-value="filtering"><table class="ui-common-table"><tr><td class="menu_icon"><span class="'+w+" "+v.icon_filter+'"><\/span><\/td><td class="menu_text">'+s.filter+" "+k+"<\/td><\/tr><\/table><\/a><\/li>",e.push(f));c.grouping&&(y=n.inArray(h.name,i.p.groupingView.groupField),f='<li class="ui-menu-item divider" role="separator"><\/li>',f+='<li class="ui-menu-item" role="presentation"><a class="g-menu-item" tabindex="0" role="menuitem" data-value="grouping"><table class="ui-common-table"><tr><td class="menu_icon"><span class="'+w+" "+v.icon_group+'"><\/span><\/td><td class="menu_text">'+(-1!==y?s.ungrouping:s.grouping+" "+k)+"<\/td><\/tr><\/table><\/a><\/li>",e.push(f));c.freeze&&(p=!h.frozen||!i.p.frozenColumns,f='<li class="ui-menu-item divider" role="separator"><\/li>',f+='<li class="ui-menu-item" role="presentation"><a class="g-menu-item" tabindex="0" role="menuitem" data-value="freeze"><table class="ui-common-table"><tr><td class="menu_icon"><span class="'+w+" "+v.icon_freeze+'"><\/span><\/td><td class="menu_text">'+(p?s.freeze+" "+k:s.unfreeze)+"<\/td><\/tr><\/table><\/a><\/li>",e.push(f));for(g in i.p.colMenuCustom)i.p.colMenuCustom.hasOwnProperty(g)&&(o=i.p.colMenuCustom[g],l=o.exclude.split(","),l=n.map(l,function(t){return n.trim(t)}),(o.colname===d||"_all_"===o.colname&&-1===n.inArray(d,l))&&(b='<li class="ui-menu-item divider" role="separator"><\/li>',f='<li class="ui-menu-item" role="presentation"><a class="g-menu-item" tabindex="0" role="menuitem" data-value="'+o.id+'"><table class="ui-common-table"><tr><td class="menu_icon"><span class="'+w+" "+o.icon+'"><\/span><\/td><td class="menu_text">'+o.title+"<\/td><\/tr><\/table><\/a><\/li>","last"===o.position?(e.push(b),e.push(f)):"first"===o.position&&(e.unshift(b),e.unshift(f))));(e.unshift('<ul id="column_menu" role="menu" tabindex="0">'),e.push("<\/ul>"),n("#gbox_"+i.p.id).append(e.join("")),n("#column_menu").addClass("ui-search-menu modal-content column-menu jqgrid-column-menu ui-menu "+v.menu_widget).css({left:r,top:u}),"ltr"===i.p.direction)&&(nt=n("#column_menu").width()+26,n("#column_menu").css("left",r-nt+"px"));n("#column_menu > li > a").hover(function(){n("#col_menu").remove();n("#search_menu").remove();var i,r;"columns"===n(this).attr("data-value")&&(i=n(this).parent().width()+8,r=n(this).parent().position().top-5,cu(r,i,n(this).parent()));"filtering"===n(this).attr("data-value")&&(i=n(this).parent().width()+8,r=n(this).parent().position().top-5,lu(t,r,i,n(this).parent()));n(this).addClass(a)},function(){n(this).removeClass(a)}).click(function(){var r=n(this).attr("data-value"),f=i.grid.headers[t].el,u;("sortasc"===r?ui("jqgh_"+i.p.id+"_"+h.name,t,!0,"asc",f):"sortdesc"===r?ui("jqgh_"+i.p.id+"_"+h.name,t,!0,"desc",f):"grouping"===r?au(t,y):"freeze"===r&&vu(t,p),-1===r.indexOf("sort")&&"grouping"!==r&&"freeze"!==r||n(this).remove(),i.p.colMenuCustom.hasOwnProperty(r))&&(u=i.p.colMenuCustom[r],n.isFunction(u.funcname)&&(u.funcname.call(i,d),u.closeOnRun&&n(this).remove()))});parseFloat(n("#column_menu").css("left"))<0&&n("#column_menu").css("left",n(i).css("left"))};for((i.p.colMenu||i.p.menubar)&&n("body").on("click",function(t){if(!n(t.target).closest("#column_menu").length)try{n("#column_menu").remove()}catch(t){}if(!n(t.target).closest(".ui-jqgrid-menubar").length)try{n("#"+i.p.id+"_menubar").hide()}catch(t){}}),this.p.id=this.id,-1===n.inArray(i.p.multikey,["shiftKey","altKey","ctrlKey"])&&(i.p.multikey=!1),i.p.keyName=!1,o=0;o<i.p.colModel.length;o++)ur="string"==typeof i.p.colModel[o].template?null!=n.jgrid.cmTemplate&&"object"==typeof n.jgrid.cmTemplate[i.p.colModel[o].template]?n.jgrid.cmTemplate[i.p.colModel[o].template]:{}:i.p.colModel[o].template,i.p.colModel[o]=n.extend(!0,{},i.p.cmTemplate,ur||{},i.p.colModel[o]),!1===i.p.keyName&&!0===i.p.colModel[o].key&&(i.p.keyName=i.p.colModel[o].name,i.p.keyIndex=o);if(i.p.sortorder=i.p.sortorder.toLowerCase(),n.jgrid.cell_width=n.jgrid.cellWidth(),!0===i.p.grouping&&(i.p.scroll=!1,i.p.rownumbers=!1,i.p.treeGrid=!1,i.p.gridview=!0),!0===this.p.treeGrid){try{n(this).jqGrid("setTreeGrid")}catch(t){}"local"!==i.p.datatype&&(i.p.localReader={id:"_id_"})}if(this.p.subGrid)try{n(i).jqGrid("setSubGrid")}catch(t){}this.p.multiselect&&(this.p.colNames.unshift("<input role='checkbox' id='cb_"+this.p.id+"' class='cbox' type='checkbox'/>"),this.p.colModel.unshift({name:"cb",width:n.jgrid.cell_width?i.p.multiselectWidth+i.p.cellLayout:i.p.multiselectWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0,frozen:!0}));this.p.rownumbers&&(this.p.colNames.unshift(""),this.p.colModel.unshift({name:"rn",width:i.p.rownumWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0,frozen:!0}));i.p.xmlReader=n.extend(!0,{root:"rows",row:"row",page:"rows>page",total:"rows>total",records:"rows>records",repeatitems:!0,cell:"cell",id:"[id]",userdata:"userdata",subgrid:{root:"rows",row:"row",repeatitems:!0,cell:"cell"}},i.p.xmlReader);i.p.jsonReader=n.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!0,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},i.p.jsonReader);i.p.localReader=n.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!1,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},i.p.localReader);i.p.scroll&&(i.p.pgbuttons=!1,i.p.pginput=!1,i.p.rowList=[]);i.p.data.length&&(hr(),vi());var pr,wi,fi,pt,l,c,wr,wt,s,d="<thead><tr class='ui-jqgrid-labels' role='row'>",ht="",bi="",ki="";if(!0===i.p.shrinkToFit&&!0===i.p.forceFit)for(o=i.p.colModel.length-1;o>=0;o--)if(!i.p.colModel[o].hidden){i.p.colModel[o].resizable=!1;break}if("horizontal"===i.p.viewsortcols[1]?(bi=" ui-i-asc",ki=" ui-i-desc"):"single"===i.p.viewsortcols[1]&&(bi=" ui-single-sort-asc",ki=" ui-single-sort-desc",ht=" style='display:none'",i.p.viewsortcols[0]=!1),pr=rr?"class='ui-th-div-ie'":"",wt="<span class='s-ico' style='display:none'>",wt+="<span sort='asc'  class='ui-grid-ico-sort ui-icon-asc"+bi+" ui-sort-"+p+" "+h+" "+w+" "+f(e,"icon_asc",!0)+"'"+ht+"><\/span>",wt+="<span sort='desc' class='ui-grid-ico-sort ui-icon-desc"+ki+" ui-sort-"+p+" "+h+" "+w+" "+f(e,"icon_desc",!0)+"'"+ht+"><\/span><\/span>",i.p.multiSort&&i.p.sortname)for(k=i.p.sortname.split(","),o=0;o<k.length;o++)st=n.trim(k[o]).split(" "),k[o]=n.trim(st[0]),ut[o]=st[1]?n.trim(st[1]):i.p.sortorder||"asc";for(o=0;o<this.p.colNames.length;o++)br=i.p.headertitles?' title="'+n.jgrid.stripHtml(i.p.colNames[o])+'"':"",s=i.p.colModel[o],s.hasOwnProperty("colmenu")||(s.colmenu="rn"!==s.name&&"cb"!==s.name&&"subgrid"!==s.name),d+="<th id='"+i.p.id+"_"+s.name+"' role='columnheader' "+f(e,"headerBox",!1,"ui-th-column ui-th-"+p)+" "+br+">",wi=s.index||s.name,d+="<div class='ui-th-div' id='jqgh_"+i.p.id+"_"+s.name+"' "+pr+">"+i.p.colNames[o],s.width=s.width?parseInt(s.width,10):150,"boolean"!=typeof s.title&&(s.title=!0),s.lso="",wi===i.p.sortname&&(i.p.lastsort=o),i.p.multiSort&&-1!==(st=n.inArray(wi,k))&&(s.lso=ut[st]),d+=wt,i.p.colMenu&&s.colmenu&&(d+="<a class='"+("ltr"===i.p.direction?"colmenu":"colmenu-rtl")+"'><span class='colmenuspan "+w+" "+v.icon_menu+"'><\/span><\/a>"),d+="<\/div><\/th>";if(d+="<\/tr><\/thead>",wt=null,s=null,n(this).append(d),n("thead tr:first th",this).hover(function(){n(this).addClass(a)},function(){n(this).removeClass(a)}),this.p.multiselect){bt=[];n("#cb_"+n.jgrid.jqID(i.p.id),this).on("click",function(){i.p.selarrrow=[];var t=!0===i.p.frozenColumns?i.p.id+"_frozen":"";this.checked?(n(i.rows).each(function(r){r>0&&(n(this).hasClass("ui-subgrid")||n(this).hasClass("jqgroup")||n(this).hasClass(h)||n(this).hasClass("jqfoot")||(n("#jqg_"+n.jgrid.jqID(i.p.id)+"_"+n.jgrid.jqID(this.id))[i.p.useProp?"prop":"attr"]("checked",!0),n(this).addClass(et).attr("aria-selected","true"),i.p.selarrrow.push(this.id),i.p.selrow=this.id,t&&(n("#jqg_"+n.jgrid.jqID(i.p.id)+"_"+n.jgrid.jqID(this.id),i.grid.fbDiv)[i.p.useProp?"prop":"attr"]("checked",!0),n("#"+n.jgrid.jqID(this.id),i.grid.fbDiv).addClass(et))))}),ct=!0,bt=[]):(n(i.rows).each(function(r){r>0&&(n(this).hasClass("ui-subgrid")||n(this).hasClass("jqgroup")||n(this).hasClass(h)||n(this).hasClass("jqfoot")||(n("#jqg_"+n.jgrid.jqID(i.p.id)+"_"+n.jgrid.jqID(this.id))[i.p.useProp?"prop":"attr"]("checked",!1),n(this).removeClass(et).attr("aria-selected","false"),bt.push(this.id),t&&(n("#jqg_"+n.jgrid.jqID(i.p.id)+"_"+n.jgrid.jqID(this.id),i.grid.fbDiv)[i.p.useProp?"prop":"attr"]("checked",!1),n("#"+n.jgrid.jqID(this.id),i.grid.fbDiv).removeClass(et))))}),i.p.selrow=null,ct=!1);n(i).triggerHandler("jqGridSelectAll",[ct?i.p.selarrrow:bt,ct]);n.isFunction(i.p.onSelectAll)&&i.p.onSelectAll.call(i,ct?i.p.selarrrow:bt,ct)})}if(!0===i.p.autowidth&&(di=n(ot).parent().width(),s=n(window).width(),i.p.width=s-di>3?di:s),kt="",nt=-1!==i.p.styleUI.search("Bootstrap")?2:0,ou(),n(ot).css("width",r.width+"px").append("<div class='ui-jqgrid-resize-mark' id='rs_m"+i.p.id+"'>&#160;<\/div>"),i.p.scrollPopUp&&n(ot).append("<div "+f(e,"scrollBox",!1,"loading ui-scroll-popup")+" id='scroll_g"+i.p.id+"'><\/div>"),n(rt).css("width",r.width+"px"),d=n("thead:first",i).get(0),i.p.footerrow&&(kt+="<table role='presentation' style='width:"+i.p.tblwidth+"px' "+f(e,"footerTable",!1,"ui-jqgrid-ftable ui-common-table")+"><tbody><tr role='row' "+f(e,"footerBox",!1,"footrow footrow-"+p)+">"),gi=n("tr:first",d),dt="<tr class='jqgfirstrow' role='row'>",i.p.disableClick=!1,n("th",gi).each(function(t){var f,u;s=i.p.colModel[t];fi=s.width;void 0===s.resizable&&(s.resizable=!0);s.resizable?(pt=document.createElement("span"),n(pt).html("&#160;").addClass("ui-jqgrid-resize ui-jqgrid-resize-"+p).css("cursor","col-resize"),n(this).addClass(i.p.resizeclass)):pt="";n(this).css("width",fi+"px").prepend(pt);pt=null;f="";s.hidden&&(n(this).css("display","none"),f="display:none;");dt+="<td role='gridcell' style='height:0px;width:"+fi+"px;"+f+"'><\/td>";r.headers[t]={width:fi,el:this};"boolean"!=typeof(ht=s.sortable)&&(s.sortable=!0,ht=!0);u=s.name;"cb"!==u&&"subgrid"!==u&&"rn"!==u&&i.p.viewsortcols[2]&&n(">div",this).addClass("ui-jqgrid-sortable");ht&&(i.p.multiSort?i.p.viewsortcols[0]?(n("div span.s-ico",this).show(),s.lso&&n("div span.ui-icon-"+s.lso,this).removeClass(h).css("display","")):s.lso&&(n("div span.s-ico",this).show(),n("div span.ui-icon-"+s.lso,this).removeClass(h).css("display","")):i.p.viewsortcols[0]?(n("div span.s-ico",this).show(),t===i.p.lastsort&&n("div span.ui-icon-"+i.p.sortorder,this).removeClass(h).css("display","")):t===i.p.lastsort&&""!==i.p.sortname&&(n("div span.s-ico",this).show(),n("div span.ui-icon-"+i.p.sortorder,this).removeClass(h).css("display","")));i.p.footerrow&&(kt+="<td role='gridcell' "+at(t,0,"",null,"",!1)+">&#160;<\/td>")}).mousedown(function(t){if(1===n(t.target).closest("th>span.ui-jqgrid-resize").length){var u=vr(this);return!0===i.p.forceFit&&(i.p.nv=su(u)),r.dragStart(u,t,hu(u)),!1}}).click(function(t){var o,s,f,r,u,h,e;if(i.p.disableClick)return i.p.disableClick=!1,!1;if(f="th>div.ui-jqgrid-sortable",i.p.viewsortcols[2]||(f="th>div>span>span.ui-grid-ico-sort"),r=n(t.target).closest(f),1===r.length){if(i.p.frozenColumns?(h=n(this)[0].id.substring(i.p.id.length+1),n(i.p.colModel).each(function(n){if(this.name===h)return u=n,!1})):u=vr(this),n(t.target).hasClass("colmenuspan")){if(null!=n("#column_menu")[0]&&n("#column_menu").remove(),e=n.jgrid.getCellIndex(t.target),-1===e)return;var c=n(this).offset(),l=c.left,a=c.top;return"ltr"===i.p.direction&&(l+=n(this).outerWidth()),yu(e,l,a,r),!0===i.p.menubar&&n("#"+i.p.id+"_menubar").hide(),void t.stopPropagation()}return i.p.viewsortcols[2]||(o=!0,s=r.attr("sort")),null!=u&&ui(n("div",this)[0].id,u,o,s,this),!1}}),s=null,i.p.sortable&&n.fn.sortable)try{n(i).jqGrid("sortableColumns",gi)}catch(t){}i.p.footerrow&&(kt+="<\/tr><\/tbody><\/table>");dt+="<\/tr>";wr=document.createElement("tbody");this.appendChild(wr);n(this).addClass(f(e,"rowTable",!0,"ui-jqgrid-btable ui-common-table")).append(dt);i.p.altRows&&n(this).addClass(f(e,"stripedTable",!0,""));dt=null;var kr=n("<table "+f(e,"headerTable",!1,"ui-jqgrid-htable ui-common-table")+" style='width:"+i.p.tblwidth+"px' role='presentation' aria-labelledby='gbox_"+this.id+"'><\/table>").append(d),g=!(!i.p.caption||!0!==i.p.hiddengrid),lt=n("<div class='ui-jqgrid-hbox"+("rtl"===p?"-rtl":"")+"'><\/div>");if(d=null,r.hDiv=document.createElement("div"),r.hDiv.style.width=r.width-nt+"px",r.hDiv.className=f(e,"headerDiv",!0,"ui-jqgrid-hdiv"),n(r.hDiv).append(lt),n(lt).append(kr),kr=null,g&&n(r.hDiv).hide(),i.p.pager&&("string"==typeof i.p.pager?"#"!==i.p.pager.substr(0,1)&&(i.p.pager="#"+i.p.pager):i.p.pager="#"+n(i.p.pager).attr("id"),n(i.p.pager).css({width:r.width-nt+"px"}).addClass(f(e,"pagerBox",!0,"ui-jqgrid-pager")).appendTo(ot),g&&n(i.p.pager).hide(),ar(i.p.pager,"")),!1===i.p.cellEdit&&!0===i.p.hoverrows&&n(i).on({mouseover:function(t){c=n(t.target).closest("tr.jqgrow");"ui-subgrid"!==n(c).attr("class")&&n(c).addClass(a)},mouseout:function(t){c=n(t.target).closest("tr.jqgrow");n(c).removeClass(a)}}),n(i).before(r.hDiv).on({click:function(t){var r,u,o;if(l=t.target,c=n(l,i.rows).closest("tr.jqgrow"),0===n(c).length||c[0].className.indexOf(h)>-1||(n(l,i).closest("table.ui-jqgrid-btable").attr("id")||"").replace("_frozen","")!==i.id)return this;if(r=n(l).filter(":enabled").hasClass("cbox"),u=n(i).triggerHandler("jqGridBeforeSelectRow",[c[0].id,t]),(u=!1!==u&&"stop"!==u,n.isFunction(i.p.beforeSelectRow))&&(o=i.p.beforeSelectRow.call(i,c[0].id,t),!1!==o&&"stop"!==o||(u=!1)),"A"!==l.tagName&&("INPUT"!==l.tagName&&"TEXTAREA"!==l.tagName&&"OPTION"!==l.tagName&&"SELECT"!==l.tagName||r))if(y=c[0].id,l=n(l).closest("tr.jqgrow>td"),l.length>0&&(tt=n.jgrid.getCellIndex(l)),!0!==i.p.cellEdit){if(l.length>0&&(nr=n(l).closest("td,th").html(),n(i).triggerHandler("jqGridCellSelect",[y,tt,nr,t]),n.isFunction(i.p.onCellSelect)&&i.p.onCellSelect.call(i,y,tt,nr,t)),u)if(i.p.multimail&&i.p.multiselect){if(t.shiftKey){if(r){var s=n(i).jqGrid("getGridParam","selrow"),a=n(i).jqGrid("getInd",y),v=n(i).jqGrid("getInd",s),f="",e="";a>v?(f=s,e=y):(f=y,e=s);var p=!1,w=!1,b=!0;return n.inArray(y,i.p.selarrrow)>-1&&(b=!1),n.each(n(this).getDataIDs(),function(t,r){return(w=r===f||w)&&n(i).jqGrid("resetSelection",r),r!==e}),b&&n.each(n(this).getDataIDs(),function(t,r){return(p=r===f||p)&&n(i).jqGrid("setSelection",r,!1),r!==e}),void(i.p.selrow=a>v?e:f)}window.getSelection().removeAllRanges()}ir(y,r,t,!1)}else i.p.multikey?t[i.p.multikey]?n(i).jqGrid("setSelection",y,!0,t):i.p.multiselect&&r&&(r=n("#jqg_"+n.jgrid.jqID(i.p.id)+"_"+y).is(":checked"),n("#jqg_"+n.jgrid.jqID(i.p.id)+"_"+y)[i.p.useProp?"prop":"attr"]("checked",!r)):ir(y,r,t,!0)}else if(i.p.multiselect&&r&&u)n(i).jqGrid("setSelection",y,!0,t);else if(l.length>0)try{n(i).jqGrid("editCell",c[0].rowIndex,tt,!0,t)}catch(t){}},reloadGrid:function(t,r){if(!0===i.p.treeGrid&&(i.p.datatype=i.p.treedatatype),r=r||{},r.current&&i.grid.selectionPreserver(i),"local"===i.p.datatype?(n(i).jqGrid("resetSelection"),i.p.data.length&&(hr(),vi())):i.p.treeGrid||(i.p.selrow=null,i.p.multiselect&&(i.p.selarrrow=[],ri(!1)),i.p.savedRow=[]),i.p.scroll&&vt.call(i,!0,!1),r.page){var u=r.page;u>i.p.lastpage&&(u=i.p.lastpage);u<1&&(u=1);i.p.page=u;i.grid.bDiv.scrollTop=i.grid.prevRowHeight?(u-1)*i.grid.prevRowHeight*i.p.rowNum:0}return i.grid.prevRowHeight&&i.p.scroll&&void 0===r.page?(delete i.p.lastpage,i.grid.populateVisible()):i.grid.populate(),!0===i.p.inlineNav&&n(i).jqGrid("showAddEditButtons"),!1},dblclick:function(t){if(l=t.target,c=n(l,i.rows).closest("tr.jqgrow"),0!==n(c).length){y=c[0].rowIndex;tt=n.jgrid.getCellIndex(l);var r=n(i).triggerHandler("jqGridDblClickRow",[n(c).attr("id"),y,tt,t]);return null!=r?r:n.isFunction(i.p.ondblClickRow)&&null!=(r=i.p.ondblClickRow.call(i,n(c).attr("id"),y,tt,t))?r:void 0}},contextmenu:function(t){if(l=t.target,c=n(l,i.rows).closest("tr.jqgrow"),0!==n(c).length){i.p.multiselect||n(i).jqGrid("setSelection",c[0].id,!0,t);y=c[0].rowIndex;tt=n.jgrid.getCellIndex(l);var r=n(i).triggerHandler("jqGridRightClickRow",[n(c).attr("id"),y,tt,t]);return null!=r?r:n.isFunction(i.p.onRightClickRow)&&null!=(r=i.p.onRightClickRow.call(i,n(c).attr("id"),y,tt,t))?r:void 0}}}),r.bDiv=document.createElement("div"),rr&&"auto"===String(i.p.height).toLowerCase()&&(i.p.height="100%"),n(r.bDiv).append(n('<div style="position:relative;"><\/div>').append("<div><\/div>").append(this)).addClass("ui-jqgrid-bdiv").css({height:i.p.height+(isNaN(i.p.height)?"":"px"),width:r.width-nt+"px"}).scroll(r.scrollGrid),n("table:first",r.bDiv).css({width:i.p.tblwidth+"px"}),n.support.tbody||2===n("tbody",this).length&&n("tbody:gt(0)",this).remove(),i.p.multikey&&(n.jgrid.msie()?n(r.bDiv).on("selectstart",function(){return!1}):n(r.bDiv).on("mousedown",function(){return!1})),g&&n(r.bDiv).hide(),ei=w+" "+f(e,"icon_caption_open",!0),tr=w+" "+f(e,"icon_caption_close",!0),r.cDiv=document.createElement("div"),oi=!0===i.p.hidegrid?n("<a role='link' class='ui-jqgrid-titlebar-close HeaderButton "+iu+"' title='"+(n.jgrid.getRegional(i,"defaults.showhide",i.p.showhide)||"")+"' />").hover(function(){oi.addClass(a)},function(){oi.removeClass(a)}).append("<span class='ui-jqgrid-headlink "+ei+"'><\/span>").css("rtl"===p?"left":"right","0px"):"",(n(r.cDiv).append(oi).append("<span class='ui-jqgrid-title'>"+i.p.caption+"<\/span>").addClass("ui-jqgrid-titlebar ui-jqgrid-caption"+("rtl"===p?"-rtl":"")+" "+f(e,"gridtitleBox",!0)),!0===i.p.menubar)&&(dr='<ul id="'+i.p.id+'_menubar" class="ui-search-menu modal-content column-menu ui-menu jqgrid-caption-menu '+v.menu_widget+'" role="menubar" tabindex="0"><\/ul>',n("#gbox_"+i.p.id).append(dr),n(r.cDiv).append("<a role='link' class='ui-jqgrid-menubar menubar-"+("rtl"===p?"rtl":"ltr")+"' style=''><span class='colmenuspan "+w+" "+v.icon_toolbar_menu+"'><\/span><\/a>"),n(".ui-jqgrid-menubar",r.cDiv).hover(function(){n(this).addClass(a)},function(){n(this).removeClass(a)}).on("click",function(t){var r=n(t.target).offset();n("#"+i.p.id+"_menubar").show();"rtl"===i.p.direction&&n("#"+i.p.id+"_menubar").css({left:r.left-n("#"+i.p.id+"_menubar").width()-20})})),(n(r.cDiv).insertBefore(r.hDiv),i.p.toolbar[0])&&(si=f(e,"customtoolbarBox",!0,"ui-userdata"),r.uDiv=document.createElement("div"),"top"===i.p.toolbar[1]?n(r.uDiv).insertBefore(r.hDiv):"bottom"===i.p.toolbar[1]&&n(r.uDiv).insertAfter(r.hDiv),"both"===i.p.toolbar[1]?(r.ubDiv=document.createElement("div"),n(r.uDiv).addClass(si+" ui-userdata-top").attr("id","t_"+this.id).insertBefore(r.hDiv).width(r.width-nt),n(r.ubDiv).addClass(si+" ui-userdata-bottom").attr("id","tb_"+this.id).insertAfter(r.hDiv).width(r.width-nt),g&&n(r.ubDiv).hide()):n(r.uDiv).width(r.width-nt).addClass(si+" ui-userdata-top").attr("id","t_"+this.id),g&&n(r.uDiv).hide()),(i.p.toppager&&(i.p.toppager=n.jgrid.jqID(i.p.id)+"_toppager",r.topDiv=n("<div id='"+i.p.toppager+"'><\/div>")[0],i.p.toppager="#"+i.p.toppager,n(r.topDiv).addClass(f(e,"toppagerBox",!0,"ui-jqgrid-toppager")).width(r.width-nt).insertBefore(r.hDiv),ar(i.p.toppager,"_t")),i.p.footerrow&&(r.sDiv=n("<div class='ui-jqgrid-sdiv'><\/div>")[0],lt=n("<div class='ui-jqgrid-hbox"+("rtl"===p?"-rtl":"")+"'><\/div>"),n(r.sDiv).append(lt).width(r.width-nt).insertAfter(r.hDiv),n(lt).append(kt),r.footers=n(".ui-jqgrid-ftable",r.sDiv)[0].rows[0].cells,i.p.rownumbers&&(r.footers[0].className=f(e,"rownumBox",!0,"jqgrid-rownum")),g&&n(r.sDiv).hide()),lt=null,i.p.caption)?(gr=i.p.datatype,!0===i.p.hidegrid&&(n(".ui-jqgrid-titlebar-close",r.cDiv).click(function(t){var f,e=n.isFunction(i.p.onHeaderClick),u=".ui-jqgrid-bdiv, .ui-jqgrid-hdiv, .ui-jqgrid-toppager, .ui-jqgrid-pager, .ui-jqgrid-sdiv",o=this;return!0===i.p.toolbar[0]&&("both"===i.p.toolbar[1]&&(u+=", #"+n(r.ubDiv).attr("id")),u+=", #"+n(r.uDiv).attr("id")),f=n(u,"#gview_"+n.jgrid.jqID(i.p.id)).length,"visible"===i.p.gridstate?n(u,"#gbox_"+n.jgrid.jqID(i.p.id)).slideUp("fast",function(){0==--f&&(n("span",o).removeClass(ei).addClass(tr),i.p.gridstate="hidden",n("#gbox_"+n.jgrid.jqID(i.p.id)).hasClass("ui-resizable")&&n(".ui-resizable-handle","#gbox_"+n.jgrid.jqID(i.p.id)).hide(),n(i).triggerHandler("jqGridHeaderClick",[i.p.gridstate,t]),e&&(g||i.p.onHeaderClick.call(i,i.p.gridstate,t)))}):"hidden"===i.p.gridstate&&n(u,"#gbox_"+n.jgrid.jqID(i.p.id)).slideDown("fast",function(){0==--f&&(n("span",o).removeClass(tr).addClass(ei),g&&(i.p.datatype=gr,ft(),g=!1),i.p.gridstate="visible",n("#gbox_"+n.jgrid.jqID(i.p.id)).hasClass("ui-resizable")&&n(".ui-resizable-handle","#gbox_"+n.jgrid.jqID(i.p.id)).show(),n(i).triggerHandler("jqGridHeaderClick",[i.p.gridstate,t]),e&&(g||i.p.onHeaderClick.call(i,i.p.gridstate,t)))}),!1}),g&&(i.p.datatype="local",n(".ui-jqgrid-titlebar-close",r.cDiv).trigger("click")))):(n(r.cDiv).hide(),i.p.toppager||n(r.hDiv).addClass(f(i.p.styleUI+".common","cornertop",!0))),n(r.hDiv).after(r.bDiv).mousemove(function(n){if(r.resizing)return r.dragMove(n),!1}),n(".ui-jqgrid-labels",r.hDiv).on("selectstart",function(){return!1}),n(document).on("mouseup.jqGrid"+i.p.id,function(){return!r.resizing||(r.dragEnd(!0),!1)}),"rtl"===i.p.direction&&n(i).on("jqGridAfterGridComplete.setRTLPadding",function(){var t=r.bDiv.offsetWidth-r.bDiv.clientWidth;i.p.scrollOffset=t;n("div:first",r.hDiv).css({paddingLeft:t+"px"});r.hDiv.scrollLeft=r.bDiv.scrollLeft}),i.formatCol=at,i.sortData=ui,i.updatepager=fu,i.refreshIndex=vi,i.setHeadCheckBox=ri,i.constructTr=yi,i.formatter=function(n,t,i,r,u){return er(n,t,i,r,u)},n.extend(r,{populate:ft,emptyRows:vt,beginReq:yt,endReq:it}),this.grid=r,i.addXmlData=function(n){pi(n)},i.addJSONData=function(n){ti(n)},i.addLocalData=function(n){return cr(n)},i.treeGrid_beforeRequest=function(){ru()},i.treeGrid_afterLoadComplete=function(){uu()},this.grid.cols=this.rows[0].cells,n.isFunction(i.p.onInitGrid)&&i.p.onInitGrid.call(i),n(i).triggerHandler("jqGridInitGrid"),ft(),i.p.hiddengrid=!1,i.p.responsive){nu="onorientationchange"in window;tu=nu?"orientationchange":"resize";n(window).on(tu,function(){n(i).jqGrid("resizeGrid")})}}})};n.jgrid.extend({getGridParam:function(t,i){var r,u=this[0];if(u&&u.grid){if(void 0===i&&"string"!=typeof i&&(i="jqGrid"),r=u.p,"jqGrid"!==i)try{r=n(u).data(i)}catch(t){r=u.p}return t?void 0!==r[t]?r[t]:null:r}},setGridParam:function(t,i){return this.each(function(){if(null==i&&(i=!1),this.grid&&"object"==typeof t)if(!0===i){var r=n.extend({},this.p,t);this.p=r}else n.extend(!0,this.p,t)})},getGridRowById:function(t){var i;return this.each(function(){try{for(var r=this.rows.length;r--;)if(t.toString()===this.rows[r].id){i=this.rows[r];break}}catch(r){i=n(this.grid.bDiv).find("#"+n.jgrid.jqID(t))}}),i},getDataIDs:function(){var i,r=[],t=0,u=0;return this.each(function(){if((i=this.rows.length)&&i>0)for(;t<i;)n(this.rows[t]).hasClass("jqgrow")&&(r[u]=this.rows[t].id,u++),t++}),r},setSelection:function(t,i,r){return this.each(function(){function y(t){var f=n(u.grid.bDiv)[0].clientHeight,i=n(u.grid.bDiv)[0].scrollTop,r=n(u.rows[t]).position().top,e=u.rows[t].clientHeight;r+e>=f+i?n(u.grid.bDiv)[0].scrollTop=r-(f+i)+e+i:r<f+i&&r<i&&(n(u.grid.bDiv)[0].scrollTop=r)}var e,f,a,h,c,o,l,u=this,v=n.jgrid.getMethod("getStyleUI"),s=v(u.p.styleUI+".common","highlight",!0),p=v(u.p.styleUI+".common","disabled",!0);void 0!==t&&(i=!1!==i,!(f=n(u).jqGrid("getGridRowById",t))||!f.className||f.className.indexOf(p)>-1||(!0===u.p.scrollrows&&(a=n(u).jqGrid("getGridRowById",t).rowIndex)>=0&&y(a),!0===u.p.frozenColumns&&(o=u.p.id+"_frozen"),u.p.multiselect?(u.setHeadCheckBox(!1),u.p.selrow=f.id,h=n.inArray(u.p.selrow,u.p.selarrrow),-1===h?("ui-subgrid"!==f.className&&n(f).addClass(s).attr("aria-selected","true"),e=!0,u.p.selarrrow.push(u.p.selrow)):("ui-subgrid"!==f.className&&n(f).removeClass(s).attr("aria-selected","false"),e=!1,u.p.selarrrow.splice(h,1),c=u.p.selarrrow[0],u.p.selrow=void 0===c?null:c),n("#jqg_"+n.jgrid.jqID(u.p.id)+"_"+n.jgrid.jqID(f.id))[u.p.useProp?"prop":"attr"]("checked",e),o&&(-1===h?n("#"+n.jgrid.jqID(t),"#"+n.jgrid.jqID(o)).addClass(s):n("#"+n.jgrid.jqID(t),"#"+n.jgrid.jqID(o)).removeClass(s),n("#jqg_"+n.jgrid.jqID(u.p.id)+"_"+n.jgrid.jqID(t),"#"+n.jgrid.jqID(o))[u.p.useProp?"prop":"attr"]("checked",e)),i&&(n(u).triggerHandler("jqGridSelectRow",[f.id,e,r]),u.p.onSelectRow&&u.p.onSelectRow.call(u,f.id,e,r))):"ui-subgrid"!==f.className&&(u.p.selrow!==f.id?(l=n(u).jqGrid("getGridRowById",u.p.selrow),l&&n(l).removeClass(s).attr({"aria-selected":"false",tabindex:"-1"}),n(f).addClass(s).attr({"aria-selected":"true",tabindex:"0"}),o&&(n("#"+n.jgrid.jqID(u.p.selrow),"#"+n.jgrid.jqID(o)).removeClass(s),n("#"+n.jgrid.jqID(t),"#"+n.jgrid.jqID(o)).addClass(s)),e=!0):e=!1,u.p.selrow=f.id,i&&(n(u).triggerHandler("jqGridSelectRow",[f.id,e,r]),u.p.onSelectRow&&u.p.onSelectRow.call(u,f.id,e,r)))))})},resetSelection:function(t){return this.each(function(){var u,r,i=this,o=n.jgrid.getMethod("getStyleUI"),f=o(i.p.styleUI+".common","highlight",!0),s=o(i.p.styleUI+".common","hover",!0),e;(!0===i.p.frozenColumns&&(r=i.p.id+"_frozen"),void 0!==t)?((u=t===i.p.selrow?i.p.selrow:t,n("#"+n.jgrid.jqID(i.p.id)+" tbody:first tr#"+n.jgrid.jqID(u)).removeClass(f).attr("aria-selected","false"),r&&n("#"+n.jgrid.jqID(u),"#"+n.jgrid.jqID(r)).removeClass(f),i.p.multiselect)&&(n("#jqg_"+n.jgrid.jqID(i.p.id)+"_"+n.jgrid.jqID(u),"#"+n.jgrid.jqID(i.p.id))[i.p.useProp?"prop":"attr"]("checked",!1),r&&n("#jqg_"+n.jgrid.jqID(i.p.id)+"_"+n.jgrid.jqID(u),"#"+n.jgrid.jqID(r))[i.p.useProp?"prop":"attr"]("checked",!1),i.setHeadCheckBox(!1),e=n.inArray(n.jgrid.jqID(u),i.p.selarrrow),-1!==e&&i.p.selarrrow.splice(e,1)),i.p.onUnSelectRow&&i.p.onUnSelectRow.call(i,u),u=null):i.p.multiselect?(n(i.p.selarrrow).each(function(t,u){n(n(i).jqGrid("getGridRowById",u)).removeClass(f).attr("aria-selected","false");n("#jqg_"+n.jgrid.jqID(i.p.id)+"_"+n.jgrid.jqID(u))[i.p.useProp?"prop":"attr"]("checked",!1);r&&(n("#"+n.jgrid.jqID(u),"#"+n.jgrid.jqID(r)).removeClass(f),n("#jqg_"+n.jgrid.jqID(i.p.id)+"_"+n.jgrid.jqID(u),"#"+n.jgrid.jqID(r))[i.p.useProp?"prop":"attr"]("checked",!1));i.p.onUnSelectRow&&i.p.onUnSelectRow.call(i,u)}),i.setHeadCheckBox(!1),i.p.selarrrow=[],i.p.selrow=null):i.p.selrow&&(n("#"+n.jgrid.jqID(i.p.id)+" tbody:first tr#"+n.jgrid.jqID(i.p.selrow)).removeClass(f).attr("aria-selected","false"),r&&n("#"+n.jgrid.jqID(i.p.selrow),"#"+n.jgrid.jqID(r)).removeClass(f),i.p.onUnSelectRow&&i.p.onUnSelectRow.call(i,i.p.selrow),i.p.selrow=null);!0===i.p.cellEdit&&parseInt(i.p.iCol,10)>=0&&parseInt(i.p.iRow,10)>=0&&(n("td:eq("+i.p.iCol+")",i.rows[i.p.iRow]).removeClass("edit-cell "+f),n(i.rows[i.p.iRow]).removeClass("selected-row "+s));i.p.savedRow=[]})},getRowData:function(t,i){var u,f,r={},e=!1,o=0;return this.each(function(){var h,c,s=this;if(null==t)e=!0,u=[],f=s.rows.length-1;else{if(!(c=n(s).jqGrid("getGridRowById",t)))return r;f=1}for(i&&!0===i&&s.p.data.length>0||(i=!1);o<f;)e&&(c=s.rows[o+1]),n(c).hasClass("jqgrow")&&(i?r=s.p.data[s.p._index[c.id]]:n('td[role="gridcell"]',c).each(function(t){if("cb"!==(h=s.p.colModel[t].name)&&"subgrid"!==h&&"rn"!==h)if(!0===s.p.treeGrid&&h===s.p.ExpandColumn)r[h]=n.jgrid.htmlDecode(n("span:first",this).html());else try{r[h]=n.unformat.call(s,this,{rowId:c.id,colModel:s.p.colModel[t]},t)}catch(t){r[h]=n.jgrid.htmlDecode(n(this).html())}}),e&&(u.push(r),r={})),o++}),u||r},delRowData:function(t){var i,u,r,f=!1;return this.each(function(){var e=this,s,o;if(!(i=n(e).jqGrid("getGridRowById",t)))return!1;(e.p.subGrid&&(r=n(i).next(),r.hasClass("ui-subgrid")&&r.remove()),n(i).remove(),e.p.records--,e.p.reccount--,e.updatepager(!0,!1),f=!0,e.p.multiselect&&-1!==(u=n.inArray(t,e.p.selarrrow))&&e.p.selarrrow.splice(u,1),e.p.multiselect&&e.p.selarrrow.length>0?e.p.selrow=e.p.selarrrow[e.p.selarrrow.length-1]:e.p.selrow===t&&(e.p.selrow=null),"local"===e.p.datatype)&&(s=n.jgrid.stripPref(e.p.idPrefix,t),o=e.p._index[s],void 0!==o&&(e.p.data.splice(o,1),e.refreshIndex()))}),f},setRowData:function(t,i,r){var u,f,e=!0;return this.each(function(){var a,y,l;if(!this.grid)return!1;var c,s,o=this,v=typeof r,h={};if(!(s=n(this).jqGrid("getGridRowById",t)))return!1;if(i)try{if(n(this.p.colModel).each(function(r){u=this.name;var e=n.jgrid.getAccessor(i,u);void 0!==e&&(h[u]=this.formatter&&"string"==typeof this.formatter&&"date"===this.formatter?n.unformat.date.call(o,e,this):e,c=o.formatter(t,h[u],r,i,"edit"),f=this.title?{title:n.jgrid.stripHtml(c)}:{},!0===o.p.treeGrid&&u===o.p.ExpandColumn?n("td[role='gridcell']:eq("+r+") > span:first",s).html(c).attr(f):n("td[role='gridcell']:eq("+r+")",s).html(c).attr(f))}),"local"===o.p.datatype){if(y=n.jgrid.stripPref(o.p.idPrefix,t),l=o.p._index[y],o.p.treeGrid)for(a in o.p.treeReader)o.p.treeReader.hasOwnProperty(a)&&delete h[o.p.treeReader[a]];void 0!==l&&(o.p.data[l]=n.extend(!0,o.p.data[l],h));h=null}}catch(t){e=!1}e&&("string"===v?n(s).addClass(r):null!==r&&"object"===v&&n(s).css(r),n(o).triggerHandler("jqGridAfterGridComplete"))}),e},addRowData:function(t,i,r,u){-1===n.inArray(r,["first","last","before","after"])&&(r="last");var y,f,h,w,s,e,c,a,p,v,o,k,b,d=!1,g="",nt="",l="";return i&&(n.isArray(i)?(p=!0,v=t):(i=[i],p=!1),this.each(function(){var tt=this,ut=i.length;s=!0===tt.p.rownumbers?1:0;h=!0===tt.p.multiselect?1:0;w=!0===tt.p.subGrid?1:0;p||(void 0!==t?t=String(t):(t=n.jgrid.randId(),!1!==tt.p.keyName&&(v=tt.p.keyName,void 0!==i[0][v]&&(t=i[0][v]))));var rt=0,ft=n(tt).jqGrid("getStyleUI",tt.p.styleUI+".base","rowBox",!0,"jqgrow ui-row-"+tt.p.direction),it={},et=!!n.isFunction(tt.p.afterInsertRow);for(s&&(g=n(tt).jqGrid("getStyleUI",tt.p.styleUI+".base","rownumBox",!1,"jqgrid-rownum")),h&&(nt=n(tt).jqGrid("getStyleUI",tt.p.styleUI+".base","multiBox",!1,"cbox"));rt<ut;){if(o=i[rt],f=[],p)try{t=o[v];void 0===t&&(t=n.jgrid.randId())}catch(i){t=n.jgrid.randId()}for(b=t,t=tt.p.idPrefix+t,s&&(l=tt.formatCol(0,1,"",null,t,!0),f[f.length]='<td role="gridcell" '+g+" "+l+">0<\/td>"),h&&(a='<input role="checkbox" type="checkbox" id="jqg_'+tt.p.id+"_"+t+'" '+nt+"/>",l=tt.formatCol(s,1,"",null,t,!0),f[f.length]='<td role="gridcell" '+l+">"+a+"<\/td>"),w&&(f[f.length]=n(tt).jqGrid("addSubGridCell",h+s,1)),c=h+w+s;c<tt.p.colModel.length;c++)k=tt.p.colModel[c],y=k.name,it[y]=o[y],a=tt.formatter(t,n.jgrid.getAccessor(o,y),c,o),l=tt.formatCol(c,1,a,o,t,it),f[f.length]='<td role="gridcell" '+l+">"+a+"<\/td>";if(f.unshift(tt.constructTr(t,!1,ft,it,o)),f[f.length]="<\/tr>",0===tt.rows.length)n("table:first",tt.grid.bDiv).append(f.join(""));else switch(r){case"last":n(tt.rows[tt.rows.length-1]).after(f.join(""));e=tt.rows.length-1;break;case"first":n(tt.rows[0]).after(f.join(""));e=1;break;case"after":e=n(tt).jqGrid("getGridRowById",u);e&&(n(tt.rows[e.rowIndex+1]).hasClass("ui-subgrid")?n(tt.rows[e.rowIndex+1]).after(f):n(e).after(f.join("")),e=e.rowIndex+1);break;case"before":e=n(tt).jqGrid("getGridRowById",u);e&&(n(e).before(f.join("")),e=e.rowIndex-1)}!0===tt.p.subGrid&&n(tt).jqGrid("addSubGrid",h+s,e);tt.p.records++;tt.p.reccount++;n(tt).triggerHandler("jqGridAfterInsertRow",[t,o,o]);et&&tt.p.afterInsertRow.call(tt,t,o,o);rt++;"local"===tt.p.datatype&&(it[tt.p.localReader.id]=b,tt.p._index[b]=tt.p.data.length,tt.p.data.push(it),it={})}tt.updatepager(!0,!0);d=!0})),d},footerData:function(t,i,r){function s(n){for(var t in n)if(n.hasOwnProperty(t))return!1;return!0}var u,e,f=!1,o={};return void 0===t&&(t="get"),"boolean"!=typeof r&&(r=!0),t=t.toLowerCase(),this.each(function(){var c,h=this;return!(!h.grid||!h.p.footerrow)&&("set"!==t||!s(i))&&(f=!0,void n(this.p.colModel).each(function(s){u=this.name;"set"===t?void 0!==i[u]&&(c=r?h.formatter("",i[u],s,i,"edit"):i[u],e=this.title?{title:n.jgrid.stripHtml(c)}:{},n("tr.footrow td:eq("+s+")",h.grid.sDiv).html(c).attr(e),f=!0):"get"===t&&(o[u]=n("tr.footrow td:eq("+s+")",h.grid.sDiv).html())}))}),"get"===t?o:f},showHideCol:function(t,i){return this.each(function(){var e,r=this,h=!1,c=n.jgrid.cell_width?0:r.p.cellLayout,u,o,s,f;if(r.grid&&("string"==typeof t&&(t=[t]),i="none"!==i?"":"none",u=""===i,o=r.p.groupHeader&&(n.isArray(r.p.groupHeader)||n.isFunction(r.p.groupHeader)),o&&n(r).jqGrid("destroyGroupHeader",!1),n(this.p.colModel).each(function(f){if(-1!==n.inArray(this.name,t)&&this.hidden===u){if(!0===r.p.frozenColumns&&!0===this.frozen)return!0;n("tr[role=row]",r.grid.hDiv).each(function(){n(this.cells[f]).css("display",i)});n(r.rows).each(function(){n(this).hasClass("jqgroup")||n(this.cells[f]).css("display",i)});r.p.footerrow&&n("tr.footrow td:eq("+f+")",r.grid.sDiv).css("display",i);e=parseInt(this.width,10);"none"===i?r.p.tblwidth-=e+c:r.p.tblwidth+=e+c;this.hidden=!u;h=!0;n(r).triggerHandler("jqGridShowHideCol",[u,this.name,f])}}),!0===h&&(!0!==r.p.shrinkToFit||isNaN(r.p.height)||(r.p.tblwidth+=parseInt(r.p.scrollOffset,10)),n(r).jqGrid("setGridWidth",!0===r.p.shrinkToFit?r.p.tblwidth:r.p.width)),o))for(s=n.extend([],r.p.groupHeader),r.p.groupHeader=null,f=0;f<s.length;f++)n(r).jqGrid("setGroupHeaders",s[f])})},hideCol:function(t){return this.each(function(){n(this).jqGrid("showHideCol",t,"none")})},showCol:function(t){return this.each(function(){n(this).jqGrid("showHideCol",t,"")})},remapColumns:function(t,i,r){function f(i){var r;r=i.length?n.makeArray(i):n.extend({},i);n.each(t,function(n){i[n]=r[this]})}function e(i,r){n(">tr"+(r||""),i).each(function(){var i=this,r=n.makeArray(i.cells);n.each(t,function(){var n=r[this];n&&i.appendChild(n)})})}var u=this.get(0);f(u.p.colModel);f(u.p.colNames);f(u.grid.headers);e(n("thead:first",u.grid.hDiv),r&&":not(.ui-jqgrid-labels)");i&&e(n("#"+n.jgrid.jqID(u.p.id)+" tbody:first"),".jqgfirstrow, tr.jqgrow, tr.jqfoot");u.p.footerrow&&e(n("tbody:first",u.grid.sDiv));u.p.remapColumns&&(u.p.remapColumns.length?f(u.p.remapColumns):u.p.remapColumns=n.makeArray(t));u.p.lastsort=n.inArray(u.p.lastsort,t);u.p.treeGrid&&(u.p.expColInd=n.inArray(u.p.expColInd,t));n(u).triggerHandler("jqGridRemapColumns",[t,i,r])},setGridWidth:function(t,i){return this.each(function(){var p,w;if(this.grid){var u,f,a,l,r=this,e=0,o=n.jgrid.cell_width?0:r.p.cellLayout,s=0,v=!1,y=r.p.scrollOffset,h=0,c=-1!==r.p.styleUI.search("Bootstrap")?2:0;if("boolean"!=typeof i&&(i=r.p.shrinkToFit),!isNaN(t)){if(t=parseInt(t,10),r.grid.width=r.p.width=t,n("#gbox_"+n.jgrid.jqID(r.p.id)).css("width",t+"px"),n("#gview_"+n.jgrid.jqID(r.p.id)).css("width",t+"px"),n(r.grid.bDiv).css("width",t-c+"px"),n(r.grid.hDiv).css("width",t-c+"px"),r.p.pager&&n(r.p.pager).css("width",t-c+"px"),r.p.toppager&&n(r.p.toppager).css("width",t-c+"px"),!0===r.p.toolbar[0]&&(n(r.grid.uDiv).css("width",t-c+"px"),"both"===r.p.toolbar[1]&&n(r.grid.ubDiv).css("width",t-c+"px")),r.p.footerrow&&n(r.grid.sDiv).css("width",t-c+"px"),!1===i&&!0===r.p.forceFit&&(r.p.forceFit=!1),!0===i){if(n.each(r.p.colModel,function(){!1===this.hidden&&(u=this.widthOrg,e+=u+o,this.fixed?h+=u+o:s++)}),0===s)return;if(r.p.tblwidth=e,a=t-o*s-h,isNaN(r.p.height)||(n(r.grid.bDiv)[0].clientHeight<n(r.grid.bDiv)[0].scrollHeight||1===r.rows.length)&&(v=!0,a-=y),e=0,p=r.grid.cols.length>0,n.each(r.p.colModel,function(n){if(!1===this.hidden&&!this.fixed){if(u=this.widthOrg,(u=Math.round(a*u/(r.p.tblwidth-o*s-h)))<0)return;this.width=u;e+=u;r.grid.headers[n].width=u;r.grid.headers[n].el.style.width=u+"px";r.p.footerrow&&(r.grid.footers[n].style.width=u+"px");p&&(r.grid.cols[n].style.width=u+"px");f=n}}),!f)return;(l=0,v?t-h-(e+o*s)!==y&&(l=t-h-(e+o*s)-y):v||0===Math.abs(t-h-(e+o*s))||(l=t-h-(e+o*s)-c),r.p.colModel[f].width+=l,r.p.tblwidth=e+l+o*s+h,r.p.tblwidth>t)?(w=r.p.tblwidth-parseInt(t,10),r.p.tblwidth=t,u=r.p.colModel[f].width=r.p.colModel[f].width-w):u=r.p.colModel[f].width;r.grid.headers[f].width=u;r.grid.headers[f].el.style.width=u+"px";p&&(r.grid.cols[f].style.width=u+"px");r.p.footerrow&&(r.grid.footers[f].style.width=u+"px")}r.p.tblwidth&&(n("table:first",r.grid.bDiv).css("width",r.p.tblwidth+"px"),n("table:first",r.grid.hDiv).css("width",r.p.tblwidth+"px"),r.grid.hDiv.scrollLeft=r.grid.bDiv.scrollLeft,r.p.footerrow&&n("table:first",r.grid.sDiv).css("width",r.p.tblwidth+"px"))}}})},setGridHeight:function(t){return this.each(function(){var i=this,r;i.grid&&(r=n(i.grid.bDiv),r.css({height:t+(isNaN(t)?"":"px")}),!0===i.p.frozenColumns&&n("#"+n.jgrid.jqID(i.p.id)+"_frozen").parent().height(r.height()-16),i.p.height=t,i.p.scroll&&i.grid.populateVisible())})},setCaption:function(t){return this.each(function(){var i=n(this).jqGrid("getStyleUI",this.p.styleUI+".common","cornertop",!0);this.p.caption=t;n(".ui-jqgrid-title, .ui-jqgrid-title-rtl",this.grid.cDiv).html(t);n(this.grid.cDiv).show();n(this.grid.hDiv).removeClass(i)})},setLabel:function(t,i,r,u){return this.each(function(){var o=this,e=-1,f,s;o.grid&&null!=t&&(isNaN(t)?n(o.p.colModel).each(function(n){if(this.name===t)return e=n,!1}):e=parseInt(t,10),e>=0)&&(f=n("tr.ui-jqgrid-labels th:eq("+e+")",o.grid.hDiv),i&&(s=n(".s-ico",f),n("[id^=jqgh_]",f).empty().html(i).append(s),o.p.colNames[e]=i),r&&("string"==typeof r?n(f).addClass(r):n(f).css(r)),"object"==typeof u&&n(f).attr(u))})},setSortIcon:function(t,i){return this.each(function(){var u=this,r=-1,f;u.grid&&null!=t&&(isNaN(t)?n(u.p.colModel).each(function(n){if(this.name===t)return r=n,!1}):r=parseInt(t,10),r>=0)&&(f=n("tr.ui-jqgrid-labels th:eq("+r+")",u.grid.hDiv),"left"===i?f.find(".s-ico").css("float","left"):f.find(".s-ico").css("float","none"))})},setCell:function(t,i,r,u,f,e){return this.each(function(){var l,p,o=this,h=-1,c,s,a,y,w,v;if(o.grid&&(isNaN(i)?n(o.p.colModel).each(function(n){if(this.name===i)return h=n,!1}):h=parseInt(i,10),h>=0)&&(c=n(o).jqGrid("getGridRowById",t),c)){a=0;y=[];try{s=c.cells[h]}catch(t){}if(s){if(""!==r||!0===e){if("local"===o.p.datatype)y=n(o).jqGrid("getLocalRow",t);else if(void 0!==c.cells)for(;a<c.cells.length;)l=n.unformat.call(o,n(c.cells[a]),{rowId:c.id,colModel:o.p.colModel[a]},a),y.push(l),a++;(l=o.formatter(t,r,h,y,"edit"),p=o.p.colModel[h].title?{title:n.jgrid.stripHtml(l)}:{},o.p.treeGrid&&n(".tree-wrap",n(s)).length>0?n("span",n(s)).html(l).attr(p):n(s).html(l).attr(p),"local"===o.p.datatype)&&(v=o.p.colModel[h],r=v.formatter&&"string"==typeof v.formatter&&"date"===v.formatter?n.unformat.date.call(o,r,v):r,w=o.p._index[n.jgrid.stripPref(o.p.idPrefix,t)],void 0!==w&&(o.p.data[w][v.name]=r))}"string"==typeof u?n(s).addClass(u):u&&n(s).css(u);"object"==typeof f&&n(s).attr(f)}}})},getCell:function(t,i,r){var f,u=!1;return void 0===r&&(r=!1),this.each(function(){var s,h,e=this,o=-1;if(e.grid&&(s=i,isNaN(i)?n(e.p.colModel).each(function(n){if(this.name===i)return s=this.name,o=n,!1}):o=parseInt(i,10),o>=0&&(h=n(e).jqGrid("getGridRowById",t))))if(f=n("td:eq("+o+")",h),r)u=f;else{try{u=n.unformat.call(e,f,{rowId:h.id,colModel:e.p.colModel[o]},o)}catch(t){u=n.jgrid.htmlDecode(f.html())}e.p.treeGrid&&u&&e.p.ExpandColumn===s&&(u=n("<div>"+u+"<\/div>").find("span:first").html())}}),u},getCol:function(t,i,r){var e,s,o,f,u=[],h=0;return i="boolean"==typeof i&&i,void 0===r&&(r=!1),this.each(function(){var c=this,l=-1;if(c.grid&&(isNaN(t)?n(c.p.colModel).each(function(n){if(this.name===t)return l=n,!1}):l=parseInt(t,10),l>=0)){var v=c.rows.length,a=0,y=0;if(v&&v>0){for(;a<v;){if(n(c.rows[a]).hasClass("jqgrow")){try{e=n.unformat.call(c,n(c.rows[a].cells[l]),{rowId:c.rows[a].id,colModel:c.p.colModel[l]},l)}catch(t){e=n.jgrid.htmlDecode(c.rows[a].cells[l].innerHTML)}r?(f=parseFloat(e),isNaN(f)||(h+=f,void 0===o&&(o=s=f),s=Math.min(s,f),o=Math.max(o,f),y++)):i?u.push({id:c.rows[a].id,value:e}):u.push(e)}a++}if(r)switch(r.toLowerCase()){case"sum":u=h;break;case"avg":u=h/y;break;case"count":u=v-1;break;case"min":u=s;break;case"max":u=o}}}}),u},clearGridData:function(t){return this.each(function(){var i=this,r;i.grid&&(("boolean"!=typeof t&&(t=!1),i.p.deepempty)?n("#"+n.jgrid.jqID(i.p.id)+" tbody:first tr:gt(0)").remove():(r=n("#"+n.jgrid.jqID(i.p.id)+" tbody:first tr:first")[0],n("#"+n.jgrid.jqID(i.p.id)+" tbody:first").empty().append(r)),i.p.footerrow&&t&&n(".ui-jqgrid-ftable td",i.grid.sDiv).html("&#160;"),i.p.selrow=null,i.p.selarrrow=[],i.p.savedRow=[],i.p.records=0,i.p.page=1,i.p.lastpage=0,i.p.reccount=0,i.p.data=[],i.p._index={},i.p.groupingView._locgr=!1,i.updatepager(!0,!1))})},getInd:function(t,i){var r,u=!1;return this.each(function(){(r=n(this).jqGrid("getGridRowById",t))&&(u=!0===i?r:r.rowIndex)}),u},bindKeys:function(t){var i=n.extend({onEnter:null,onSpace:null,onLeftKey:null,onRightKey:null,scrollingRows:!0},t||{});return this.each(function(){var t=this;n("body").is("[role]")||n("body").attr("role","application");t.p.scrollrows=i.scrollingRows;n(t).keydown(function(r){var f,u,s,e=n(t).find("tr[tabindex=0]")[0],h=t.p.treeReader.expanded_field,o;if(e)if(o=t.p.selrow,s=t.p._index[n.jgrid.stripPref(t.p.idPrefix,e.id)],37===r.keyCode||38===r.keyCode||39===r.keyCode||40===r.keyCode){if(38===r.keyCode){if(u=e.previousSibling,f="",u)if(n(u).is(":hidden")){for(;u;)if(u=u.previousSibling,!n(u).is(":hidden")&&n(u).hasClass("jqgrow")){f=u.id;break}}else f=u.id;n(t).jqGrid("setSelection",f,!0,r);n(t).triggerHandler("jqGridKeyUp",[f,o,r]);n.isFunction(i.onUpKey)&&i.onUpKey.call(t,f,o,r);r.preventDefault()}if(40===r.keyCode){if(u=e.nextSibling,f="",u)if(n(u).is(":hidden")){for(;u;)if(u=u.nextSibling,!n(u).is(":hidden")&&n(u).hasClass("jqgrow")){f=u.id;break}}else f=u.id;n(t).jqGrid("setSelection",f,!0,r);n(t).triggerHandler("jqGridKeyDown",[f,o,r]);n.isFunction(i.onDownKey)&&i.onDownKey.call(t,f,o,r);r.preventDefault()}37===r.keyCode&&(t.p.treeGrid&&t.p.data[s][h]&&n(e).find("div.treeclick").trigger("click"),n(t).triggerHandler("jqGridKeyLeft",[t.p.selrow,r]),n.isFunction(i.onLeftKey)&&i.onLeftKey.call(t,t.p.selrow,r));39===r.keyCode&&(t.p.treeGrid&&!t.p.data[s][h]&&n(e).find("div.treeclick").trigger("click"),n(t).triggerHandler("jqGridKeyRight",[t.p.selrow,r]),n.isFunction(i.onRightKey)&&i.onRightKey.call(t,t.p.selrow,r))}else 13===r.keyCode?(n(t).triggerHandler("jqGridKeyEnter",[t.p.selrow,r]),n.isFunction(i.onEnter)&&i.onEnter.call(t,t.p.selrow,r)):32===r.keyCode&&(n(t).triggerHandler("jqGridKeySpace",[t.p.selrow,r]),n.isFunction(i.onSpace)&&i.onSpace.call(t,t.p.selrow,r))});n(t).on("click",function(i){n(i.target,t.rows).closest("tr.jqgrow").focus()})})},unbindKeys:function(){return this.each(function(){n(this).off("keydown")})},getLocalRow:function(t){var i,r=!1;return this.each(function(){void 0!==t&&(i=this.p._index[n.jgrid.stripPref(this.p.idPrefix,t)])>=0&&(r=this.p.data[i])}),r},progressBar:function(t){return t=n.extend({htmlcontent:"",method:"hide",loadtype:"disable"},t||{}),this.each(function(){var u,f,r="show"===t.method,i=n("#load_"+n.jgrid.jqID(this.p.id)),e=n(window).scrollTop();switch(""!==t.htmlcontent&&i.html(t.htmlcontent),t.loadtype){case"enable":i.toggle(r);break;case"block":n("#lui_"+n.jgrid.jqID(this.p.id)).css(r?{top:0,left:0,height:n("#gbox_"+n.jgrid.jqID(this.p.id)).height(),width:n("#gbox_"+n.jgrid.jqID(this.p.id)).width(),"z-index":1e4,position:"absolute"}:{}).toggle(r);i.toggle(r)}i.is(":visible")&&(u=i.offsetParent(),i.css("top",""),i.offset().top<e&&(f=Math.min(10+e-u.offset().top,u.height()-i.height()),i.css("top",f+"px")))})},getColProp:function(n){var r={},u=this[0],t,i;if(!u.grid)return!1;for(i=u.p.colModel,t=0;t<i.length;t++)if(i[t].name===n){r=i[t];break}return r},setColProp:function(t,i){return this.each(function(){if(this.grid&&n.isPlainObject(i))for(var u=this.p.colModel,r=0;r<u.length;r++)if(u[r].name===t){n.extend(!0,this.p.colModel[r],i);break}})},sortGrid:function(n,t,i){return this.each(function(){var u,r=this,f=-1,e=!1,o;if(r.grid){for(n||(n=r.p.sortname),u=0;u<r.p.colModel.length;u++)if(r.p.colModel[u].index===n||r.p.colModel[u].name===n){f=u;!0===r.p.frozenColumns&&!0===r.p.colModel[u].frozen&&(e=r.grid.fhDiv.find("#"+r.p.id+"_"+n));break}-1!==f&&(o=r.p.colModel[f].sortable,e||(e=r.grid.headers[f].el),"boolean"!=typeof o&&(o=!0),"boolean"!=typeof t&&(t=!1),o&&r.sortData("jqgh_"+r.p.id+"_"+n,f,t,i,e))}})},setGridState:function(t){return this.each(function(){if(this.grid){var i=this,r=n(this).jqGrid("getStyleUI",this.p.styleUI+".base","icon_caption_open",!0),u=n(this).jqGrid("getStyleUI",this.p.styleUI+".base","icon_caption_close",!0);"hidden"===t?(n(".ui-jqgrid-bdiv, .ui-jqgrid-hdiv","#gview_"+n.jgrid.jqID(i.p.id)).slideUp("fast"),i.p.pager&&n(i.p.pager).slideUp("fast"),i.p.toppager&&n(i.p.toppager).slideUp("fast"),!0===i.p.toolbar[0]&&("both"===i.p.toolbar[1]&&n(i.grid.ubDiv).slideUp("fast"),n(i.grid.uDiv).slideUp("fast")),i.p.footerrow&&n(".ui-jqgrid-sdiv","#gbox_"+n.jgrid.jqID(i.p.id)).slideUp("fast"),n(".ui-jqgrid-headlink",i.grid.cDiv).removeClass(r).addClass(u),i.p.gridstate="hidden"):"visible"===t&&(n(".ui-jqgrid-hdiv, .ui-jqgrid-bdiv","#gview_"+n.jgrid.jqID(i.p.id)).slideDown("fast"),i.p.pager&&n(i.p.pager).slideDown("fast"),i.p.toppager&&n(i.p.toppager).slideDown("fast"),!0===i.p.toolbar[0]&&("both"===i.p.toolbar[1]&&n(i.grid.ubDiv).slideDown("fast"),n(i.grid.uDiv).slideDown("fast")),i.p.footerrow&&n(".ui-jqgrid-sdiv","#gbox_"+n.jgrid.jqID(i.p.id)).slideDown("fast"),n(".ui-jqgrid-headlink",i.grid.cDiv).removeClass(u).addClass(r),i.p.gridstate="visible")}})},setFrozenColumns:function(){return this.each(function(){var r,l,b,o,f,a,k,h;if(this.grid){var t=this,v=t.p.colModel,s=0,d=v.length,i=-1,y=!1,g=n(t).jqGrid("getStyleUI",t.p.styleUI+".base","headerDiv",!0,"ui-jqgrid-hdiv"),u=n(t).jqGrid("getStyleUI",t.p.styleUI+".common","hover",!0),p="border-box"===n("#gbox_"+n.jgrid.jqID(t.p.id)).css("box-sizing"),c=p?1:0;if(!0!==t.p.subGrid&&!0!==t.p.treeGrid&&!0!==t.p.cellEdit&&!t.p.scroll){for(;s<d&&!0===v[s].frozen;)y=!0,i=s,s++;if(i>=0&&y){var e=t.p.caption?n(t.grid.cDiv).outerHeight():0,nt=parseInt(n(".ui-jqgrid-htable","#gview_"+n.jgrid.jqID(t.p.id)).height(),10),w=parseInt(n(".ui-jqgrid-hdiv","#gview_"+n.jgrid.jqID(t.p.id)).height(),10);t.p.toppager&&(e+=n(t.grid.topDiv).outerHeight());!0===t.p.toolbar[0]&&"bottom"!==t.p.toolbar[1]&&(e+=n(t.grid.uDiv).outerHeight());t.grid.fhDiv=n('<div style="position:absolute;'+("rtl"===t.p.direction?"right:0;":"left:0;")+"top:"+e+"px;height:"+(w-c)+'px;" class="frozen-div '+g+'"><\/div>');t.grid.fbDiv=n('<div style="position:absolute;'+("rtl"===t.p.direction?"right:0;":"left:0;")+"top:"+(parseInt(e,10)+parseInt(w,10)+1-c)+'px;overflow-y:hidden" class="frozen-bdiv ui-jqgrid-bdiv"><\/div>');n("#gview_"+n.jgrid.jqID(t.p.id)).append(t.grid.fhDiv);r=n(".ui-jqgrid-htable","#gview_"+n.jgrid.jqID(t.p.id)).clone(!0);t.p.groupHeader?(n("tr.jqg-first-row-header, tr.jqg-third-row-header",r).each(function(){n("th:gt("+i+")",this).remove()}),o=-1,f=-1,n("tr.jqg-second-row-header th",r).each(function(){if(l=parseInt(n(this).attr("colspan"),10),b=parseInt(n(this).attr("rowspan"),10),b&&(o++,f++),l&&(o+=l,f++),o===i)return f=i,!1}),o!==i&&(f=i),n("tr.jqg-second-row-header",r).each(function(){n("th:gt("+f+")",this).remove()})):(a=[],n(".ui-jqgrid-htable tr","#gview_"+n.jgrid.jqID(t.p.id)).each(function(){a.push(parseInt(n(this).height(),10))}),n("tr",r).each(function(){n("th:gt("+i+")",this).remove()}),n("tr",r).each(function(t){n(this).height(a[t])}));(n(r).width(1),n.jgrid.msie()||n(r).css("height","100%"),n(t.grid.fhDiv).append(r).mousemove(function(n){if(t.grid.resizing)return t.grid.dragMove(n),!1}),t.p.footerrow)&&(k=n(".ui-jqgrid-bdiv","#gview_"+n.jgrid.jqID(t.p.id)).height(),t.grid.fsDiv=n('<div style="position:absolute;left:0px;top:'+(parseInt(e,10)+parseInt(nt,10)+parseInt(k,10)+1-c)+'px;" class="frozen-sdiv ui-jqgrid-sdiv"><\/div>'),n("#gview_"+n.jgrid.jqID(t.p.id)).append(t.grid.fsDiv),h=n(".ui-jqgrid-ftable","#gview_"+n.jgrid.jqID(t.p.id)).clone(!0),n("tr",h).each(function(){n("td:gt("+i+")",this).remove()}),n(h).width(1),n(t.grid.fsDiv).append(h));n(t).on("jqGridResizeStop.setFrozenColumns",function(i,r,u){var f=p?"outerWidth":"width",o=n(".ui-jqgrid-htable",t.grid.fhDiv),s=n(".ui-jqgrid-btable",t.grid.fbDiv),e;(n("th:eq("+u+")",o)[f](r),n("tr:first td:eq("+u+")",s)[f](r),t.p.footerrow)&&(e=n(".ui-jqgrid-ftable",t.grid.fsDiv),n("tr:first td:eq("+u+")",e)[f](r))});n("#gview_"+n.jgrid.jqID(t.p.id)).append(t.grid.fbDiv);n(t.grid.fbDiv).on("mousewheel DOMMouseScroll",function(i){var r=n(t.grid.bDiv).scrollTop();i.originalEvent.wheelDelta>0||i.originalEvent.detail<0?n(t.grid.bDiv).scrollTop(r-25):n(t.grid.bDiv).scrollTop(r+25);i.preventDefault()});!0===t.p.hoverrows&&n("#"+n.jgrid.jqID(t.p.id)).off("mouseover mouseout");n(t).on("jqGridAfterGridComplete.setFrozenColumns",function(){var f,r;n("#"+n.jgrid.jqID(t.p.id)+"_frozen").remove();n(t.grid.fbDiv).height(n(t.grid.bDiv)[0].clientHeight);f=[];n("#"+n.jgrid.jqID(t.p.id)+" tr[role=row].jqgrow").each(function(){f.push(n(this).outerHeight())});r=n("#"+n.jgrid.jqID(t.p.id)).clone(!0);n("tr[role=row]",r).each(function(){n("td[role=gridcell]:gt("+i+")",this).remove()});n(r).width(1).attr("id",t.p.id+"_frozen");n(t.grid.fbDiv).append(r);n("tr[role=row].jqgrow",r).each(function(t){n(this).height(f[t])});!0===t.p.hoverrows&&(n("tr.jqgrow",r).hover(function(){n(this).addClass(u);n("#"+n.jgrid.jqID(this.id),"#"+n.jgrid.jqID(t.p.id)).addClass(u)},function(){n(this).removeClass(u);n("#"+n.jgrid.jqID(this.id),"#"+n.jgrid.jqID(t.p.id)).removeClass(u)}),n("tr.jqgrow","#"+n.jgrid.jqID(t.p.id)).hover(function(){n(this).addClass(u);n("#"+n.jgrid.jqID(this.id),"#"+n.jgrid.jqID(t.p.id)+"_frozen").addClass(u)},function(){n(this).removeClass(u);n("#"+n.jgrid.jqID(this.id),"#"+n.jgrid.jqID(t.p.id)+"_frozen").removeClass(u)}));r=null});t.grid.hDiv.loading||n(t).triggerHandler("jqGridAfterGridComplete");t.p.frozenColumns=!0}}}})},destroyFrozenColumns:function(){return this.each(function(){var t,r,i;if(this.grid&&!0===this.p.frozenColumns){if(t=this,r=n(t).jqGrid("getStyleUI",t.p.styleUI+".common","hover",!0),n(t.grid.fhDiv).remove(),n(t.grid.fbDiv).remove(),t.grid.fhDiv=null,t.grid.fbDiv=null,t.p.footerrow&&(n(t.grid.fsDiv).remove(),t.grid.fsDiv=null),n(this).off(".setFrozenColumns"),!0===t.p.hoverrows)n("#"+n.jgrid.jqID(t.p.id)).on({mouseover:function(t){i=n(t.target).closest("tr.jqgrow");"ui-subgrid"!==n(i).attr("class")&&n(i).addClass(r)},mouseout:function(t){i=n(t.target).closest("tr.jqgrow");n(i).removeClass(r)}});this.p.frozenColumns=!1}})},resizeColumn:function(n,t,i){return this.each(function(){var u,o,f=this.grid,r=this.p,e=r.colModel,s=e.length;if("string"==typeof n){for(u=0;u<s;u++)if(e[u].name===n){n=u;break}}else n=parseInt(n,10);if(void 0===i&&(i=!1),(e[n].resizable||i)&&(t=parseInt(t,10),!("number"!=typeof n||n<0||n>e.length-1||"number"!=typeof t||t<r.minColWidth))){if(r.forceFit)for(r.nv=0,u=n+1;u<s;u++)if(!0!==e[u].hidden){r.nv=u-n;break}if(f.resizing={idx:n},o=t-f.headers[n].width,r.forceFit){if(f.headers[n+r.nv].width-o<r.minColWidth)return;f.headers[n+r.nv].newWidth=f.headers[n+r.nv].width-o}f.newWidth=r.tblwidth+o;f.headers[n].newWidth=t;f.dragEnd(!1)}})},getStyleUI:function(t,i,r,u){var f="",e="",o;try{o=t.split(".");switch(r||(f="class=",e='"'),null==u&&(u=""),o.length){case 1:f+=e+n.trim(u+" "+n.jgrid.styleUI[o[0]][i]+e);break;case 2:f+=e+n.trim(u+" "+n.jgrid.styleUI[o[0]][o[1]][i]+e)}}catch(t){f=""}return f},resizeGrid:function(t){return this.each(function(){var i=this;void 0===t&&(t=500);setTimeout(function(){try{var t=n(window).width(),r=n("#gbox_"+n.jgrid.jqID(i.p.id)).parent().width(),u=i.p.width;u=t-r>3?r:t;n("#"+n.jgrid.jqID(i.p.id)).jqGrid("setGridWidth",u)}catch(t){}},t)})},colMenuAdd:function(t,i){var r=this[0].p.styleUI,u=n.jgrid.styleUI[r].colmenu;return i=n.extend({title:"Item",icon:u.icon_new_item,funcname:null,position:"last",closeOnRun:!0,exclude:"",id:null},i||{}),this.each(function(){i.colname="all"===t?"_all_":t;var r=this;i.id=null===i.id?n.jgrid.randId():i.id;r.p.colMenuCustom[i.id]=i})},colMenuDelete:function(n){return this.each(function(){this.p.colMenuCustom.hasOwnProperty(n)&&delete this.p.colMenuCustom[n]})},menubarAdd:function(t){var i,r,f=this[0].p.styleUI,u=n.jgrid.styleUI[f].common;return this.each(function(){var o=this,f,e;if(n.isArray(t))for(f=0;f<t.length;f++)i=t[f],i.id||(i.id=n.jgrid.randId()),e="",i.icon&&(e='<span class="'+u.icon_base+" "+i.icon+'"><\/span>'),i.position||(i.position="last"),i.closeoncall||(i.closeoncall=!0),i.divider?(r='<li class="ui-menu-item divider" role="separator"><\/li>',i.cick=null):r='<li class="ui-menu-item" role="presentation"><a id="'+i.id+'" class="g-menu-item" tabindex="0" role="menuitem" ><table class="ui-common-table"><tr><td class="menu_icon">'+e+'<\/td><td class="menu_text">'+i.title+"<\/td><\/tr><\/table><\/a><\/li>","last"===i.position?n("#"+this.p.id+"_menubar").append(r):n("#"+this.p.id+"_menubar").prepend(r);n("li a","#"+this.p.id+"_menubar").each(function(i,r){n(t).each(function(t,i){if(i.id===r.id&&n.isFunction(i.click))return n(r).on("click",function(n){i.click.call(o,n)}),!1});n(this).hover(function(t){n(this).addClass(u.hover);t.stopPropagation()},function(){n(this).removeClass(u.hover)})})})},menubarDelete:function(t){return this.each(function(){n("#"+t,"#"+this.p.id+"_menubar").remove()})}})});!function(n){"use strict";"function"==typeof define&&define.amd?define(["jquery","./grid.base"],n):n(jQuery)}(function(n){"use strict";n.fmatter={};n.extend(n.fmatter,{isBoolean:function(n){return"boolean"==typeof n},isObject:function(t){return t&&("object"==typeof t||n.isFunction(t))||!1},isString:function(n){return"string"==typeof n},isNumber:function(n){return"number"==typeof n&&isFinite(n)},isValue:function(n){return this.isObject(n)||this.isString(n)||this.isNumber(n)||this.isBoolean(n)},isEmpty:function(t){return!(!this.isString(t)&&this.isValue(t))&&(!this.isValue(t)||""===(t=n.trim(t).replace(/\&nbsp\;/gi,"").replace(/\&#160\;/gi,"")))}});n.fn.fmatter=function(t,i,r,u,f){var e=i;r=n.extend({},n.jgrid.getRegional(this,"formatter"),r);try{e=n.fn.fmatter[t].call(this,i,r,u,f)}catch(n){}return e};n.fmatter.util={NumberFormat:function(t,i){var s,h,l,f,e,c;if(n.fmatter.isNumber(t)||(t*=1),n.fmatter.isNumber(t)){var u,a=t<0,r=String(t),o=i.decimalSeparator||".";if(n.fmatter.isNumber(i.decimalPlaces)&&(s=i.decimalPlaces,h=Math.pow(10,s),r=String(Math.round(t*h)/h),u=r.lastIndexOf("."),s>0))for(u<0?(r+=o,u=r.length-1):"."!==o&&(r=r.replace(".",o));r.length-1-u<s;)r+="0";if(i.thousandsSeparator){for(l=i.thousandsSeparator,u=r.lastIndexOf(o),u=u>-1?u:r.length,e=r.substring(u),c=-1,f=u;f>0;f--)c++,c%3==0&&f!==u&&(!a||f>1)&&(e=l+e),e=r.charAt(f-1)+e;r=e}return r=i.prefix?i.prefix+r:r,r=i.suffix?r+i.suffix:r}return t}};n.fn.fmatter.defaultFormat=function(t,i){return n.fmatter.isValue(t)&&""!==t?t:i.defaultValue||"&#160;"};n.fn.fmatter.email=function(t,i){return n.fmatter.isEmpty(t)?n.fn.fmatter.defaultFormat(t,i):'<a href="mailto:'+t+'">'+t+"<\/a>"};n.fn.fmatter.checkbox=function(t,i){var u,r=n.extend({},i.checkbox);return void 0!==i.colModel&&void 0!==i.colModel.formatoptions&&(r=n.extend({},r,i.colModel.formatoptions)),u=!0===r.disabled?'disabled="disabled"':"",(n.fmatter.isEmpty(t)||void 0===t)&&(t=n.fn.fmatter.defaultFormat(t,r)),t=String(t),t=(t+"").toLowerCase(),'<input type="checkbox" '+(t.search(/(false|f|0|no|n|off|undefined)/i)<0?" checked='checked' ":"")+' value="'+t+'" offval="no" '+u+"/>"};n.fn.fmatter.link=function(t,i){var r={target:i.target},u="";return void 0!==i.colModel&&void 0!==i.colModel.formatoptions&&(r=n.extend({},r,i.colModel.formatoptions)),r.target&&(u="target="+r.target),n.fmatter.isEmpty(t)?n.fn.fmatter.defaultFormat(t,i):"<a "+u+' href="'+t+'">'+t+"<\/a>"};n.fn.fmatter.showlink=function(t,i){var u,r={baseLinkUrl:i.baseLinkUrl,showAction:i.showAction,addParam:i.addParam||"",target:i.target,idName:i.idName},f="";return void 0!==i.colModel&&void 0!==i.colModel.formatoptions&&(r=n.extend({},r,i.colModel.formatoptions)),r.target&&(f="target="+r.target),u=r.baseLinkUrl+r.showAction+"?"+r.idName+"="+i.rowId+r.addParam,n.fmatter.isString(t)||n.fmatter.isNumber(t)?"<a "+f+' href="'+u+'">'+t+"<\/a>":n.fn.fmatter.defaultFormat(t,i)};n.fn.fmatter.integer=function(t,i){var r=n.extend({},i.integer);return void 0!==i.colModel&&void 0!==i.colModel.formatoptions&&(r=n.extend({},r,i.colModel.formatoptions)),n.fmatter.isEmpty(t)?r.defaultValue:n.fmatter.util.NumberFormat(t,r)};n.fn.fmatter.number=function(t,i){var r=n.extend({},i.number);return void 0!==i.colModel&&void 0!==i.colModel.formatoptions&&(r=n.extend({},r,i.colModel.formatoptions)),n.fmatter.isEmpty(t)?r.defaultValue:n.fmatter.util.NumberFormat(t,r)};n.fn.fmatter.currency=function(t,i){var r=n.extend({},i.currency);return void 0!==i.colModel&&void 0!==i.colModel.formatoptions&&(r=n.extend({},r,i.colModel.formatoptions)),n.fmatter.isEmpty(t)?r.defaultValue:n.fmatter.util.NumberFormat(t,r)};n.fn.fmatter.date=function(t,i,r,u){var f=n.extend({},i.date);return void 0!==i.colModel&&void 0!==i.colModel.formatoptions&&(f=n.extend({},f,i.colModel.formatoptions)),f.reformatAfterEdit||"edit"!==u?n.fmatter.isEmpty(t)?n.fn.fmatter.defaultFormat(t,i):n.jgrid.parseDate.call(this,f.srcformat,t,f.newformat,f):n.fn.fmatter.defaultFormat(t,i)};n.fn.fmatter.select=function(t,i){var o,c,r,f,u,s,e,h,l,a;if(t=String(t),r=!1,f=[],void 0!==i.colModel.formatoptions?(r=i.colModel.formatoptions.value,o=void 0===i.colModel.formatoptions.separator?":":i.colModel.formatoptions.separator,c=void 0===i.colModel.formatoptions.delimiter?";":i.colModel.formatoptions.delimiter):void 0!==i.colModel.editoptions&&(r=i.colModel.editoptions.value,o=void 0===i.colModel.editoptions.separator?":":i.colModel.editoptions.separator,c=void 0===i.colModel.editoptions.delimiter?";":i.colModel.editoptions.delimiter),r)if(s=!0==(null!=i.colModel.editoptions&&!0===i.colModel.editoptions.multiple),e=[],s&&(e=t.split(","),e=n.map(e,function(t){return n.trim(t)})),n.fmatter.isString(r)){for(l=r.split(c),a=0,h=0;h<l.length;h++)if(u=l[h].split(o),u.length>2&&(u[1]=n.map(u,function(n,t){if(t>0)return n}).join(o)),s)n.inArray(u[0],e)>-1&&(f[a]=u[1],a++);else if(n.trim(u[0])===n.trim(t)){f[0]=u[1];break}}else n.fmatter.isObject(r)&&(s?f=n.map(e,function(n){return r[n]}):f[0]=r[t]||"");return t=f.join(", "),""===t?n.fn.fmatter.defaultFormat(t,i):t};n.fn.fmatter.rowactions=function(t){var c=n(this).closest("tr.jqgrow"),f=c.attr("id"),v=n(this).closest("table.ui-jqgrid-btable").attr("id").replace(/_frozen([^_]*)$/,"$1"),r=n("#"+v),o=r[0],e=o.p,s=e.colModel[n.jgrid.getCellIndex(this)],u=s.frozen?n("tr#"+f+" td:eq("+n.jgrid.getCellIndex(this)+") > div",r):n(this).parent(),i={extraparam:{}},y=function(t,r){n.isFunction(i.afterSave)&&i.afterSave.call(o,t,r);u.find("div.ui-inline-edit,div.ui-inline-del").show();u.find("div.ui-inline-save,div.ui-inline-cancel").hide()},l=function(t){n.isFunction(i.afterRestore)&&i.afterRestore.call(o,t);u.find("div.ui-inline-edit,div.ui-inline-del").show();u.find("div.ui-inline-save,div.ui-inline-cancel").hide()},a,h;void 0!==s.formatoptions&&(a=n.extend(!0,{},s.formatoptions),i=n.extend(i,a));void 0!==e.editOptions&&(i.editOptions=e.editOptions);void 0!==e.delOptions&&(i.delOptions=e.delOptions);c.hasClass("jqgrid-new-row")&&(i.extraparam[e.prmNames.oper]=e.prmNames.addoper);h={keys:i.keys,oneditfunc:i.onEdit,successfunc:i.onSuccess,url:i.url,extraparam:i.extraparam,aftersavefunc:y,errorfunc:i.onError,afterrestorefunc:l,restoreAfterError:i.restoreAfterError,mtype:i.mtype};switch(t){case"edit":r.jqGrid("editRow",f,h);u.find("div.ui-inline-edit,div.ui-inline-del").hide();u.find("div.ui-inline-save,div.ui-inline-cancel").show();r.triggerHandler("jqGridAfterGridComplete");break;case"save":r.jqGrid("saveRow",f,h)&&(u.find("div.ui-inline-edit,div.ui-inline-del").show(),u.find("div.ui-inline-save,div.ui-inline-cancel").hide(),r.triggerHandler("jqGridAfterGridComplete"));break;case"cancel":r.jqGrid("restoreRow",f,l);u.find("div.ui-inline-edit,div.ui-inline-del").show();u.find("div.ui-inline-save,div.ui-inline-cancel").hide();r.triggerHandler("jqGridAfterGridComplete");break;case"del":r.jqGrid("delGridRow",f,i.delOptions);break;case"formedit":r.jqGrid("setSelection",f);r.jqGrid("editGridRow",f,i.editOptions)}};n.fn.fmatter.actions=function(t,i){var r,o={keys:!1,editbutton:!0,delbutton:!0,editformbutton:!1},u=i.rowId,s="",h=n.jgrid.getRegional(this,"nav"),c=n.jgrid.styleUI[i.styleUI||"jQueryUI"].fmatter,f=n.jgrid.styleUI[i.styleUI||"jQueryUI"].common,e;return(void 0!==i.colModel.formatoptions&&(o=n.extend(o,i.colModel.formatoptions)),void 0===u||n.fmatter.isEmpty(u))?"":(e="onmouseover=jQuery(this).addClass('"+f.hover+"'); onmouseout=jQuery(this).removeClass('"+f.hover+"');  ",o.editformbutton?(r="id='jEditButton_"+u+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'formedit'); "+e,s+="<div title='"+h.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+r+"><span class='"+f.icon_base+" "+c.icon_edit+"'><\/span><\/div>"):o.editbutton&&(r="id='jEditButton_"+u+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'edit'); "+e,s+="<div title='"+h.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+r+"><span class='"+f.icon_base+" "+c.icon_edit+"'><\/span><\/div>"),o.delbutton&&(r="id='jDeleteButton_"+u+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'del'); "+e,s+="<div title='"+h.deltitle+"' style='float:left;' class='ui-pg-div ui-inline-del' "+r+"><span class='"+f.icon_base+" "+c.icon_del+"'><\/span><\/div>"),r="id='jSaveButton_"+u+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'save'); "+e,s+="<div title='"+h.savetitle+"' style='float:left;display:none' class='ui-pg-div ui-inline-save' "+r+"><span class='"+f.icon_base+" "+c.icon_save+"'><\/span><\/div>",r="id='jCancelButton_"+u+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'cancel'); "+e,"<div style='margin-left:8px;'>"+(s+="<div title='"+h.canceltitle+"' style='float:left;display:none;' class='ui-pg-div ui-inline-cancel' "+r+"><span class='"+f.icon_base+" "+c.icon_cancel+"'><\/span><\/div>")+"<\/div>")};n.unformat=function(t,i,r,u){var e,o,h=i.colModel.formatter,f=i.colModel.formatoptions||{},l=/([\.\*\_\'\(\)\{\}\+\?\\])/g,a=i.colModel.unformat||n.fn.fmatter[h]&&n.fn.fmatter[h].unformat,s,c,v;if(void 0!==a&&n.isFunction(a))e=a.call(this,n(t).text(),i,t);else if(void 0!==h&&n.fmatter.isString(h)){c=n.jgrid.getRegional(this,"formatter")||{};switch(h){case"integer":f=n.extend({},c.integer,f);o=f.thousandsSeparator.replace(l,"\\$1");s=new RegExp(o,"g");e=n(t).text().replace(s,"");break;case"number":f=n.extend({},c.number,f);o=f.thousandsSeparator.replace(l,"\\$1");s=new RegExp(o,"g");e=n(t).text().replace(s,"").replace(f.decimalSeparator,".");break;case"currency":f=n.extend({},c.currency,f);o=f.thousandsSeparator.replace(l,"\\$1");s=new RegExp(o,"g");e=n(t).text();f.prefix&&f.prefix.length&&(e=e.substr(f.prefix.length));f.suffix&&f.suffix.length&&(e=e.substr(0,e.length-f.suffix.length));e=e.replace(s,"").replace(f.decimalSeparator,".");break;case"checkbox":v=i.colModel.editoptions?i.colModel.editoptions.value.split(":"):["Yes","No"];e=n("input",t).is(":checked")?v[0]:v[1];break;case"select":e=n.unformat.select(t,i,r,u);break;case"actions":return"";default:e=n(t).text()}}return void 0!==e?e:!0===u?n(t).text():n.jgrid.htmlDecode(n(t).html())};n.unformat.select=function(t,i,r,u){var c=[],s=n(t).text(),l,v,y;if(!0===u)return s;var e=n.extend({},void 0!==i.colModel.formatoptions?i.colModel.formatoptions:i.colModel.editoptions),p=void 0===e.separator?":":e.separator,w=void 0===e.delimiter?";":e.delimiter;if(e.value){var f,h=e.value,a=!0===e.multiple,o=[];if(a&&(o=s.split(","),o=n.map(o,function(t){return n.trim(t)})),n.fmatter.isString(h)){for(v=h.split(w),y=0,l=0;l<v.length;l++)if(f=v[l].split(p),f.length>2&&(f[1]=n.map(f,function(n,t){if(t>0)return n}).join(p)),a)n.inArray(n.trim(f[1]),o)>-1&&(c[y]=f[0],y++);else if(n.trim(f[1])===n.trim(s)){c[0]=f[0];break}}else(n.fmatter.isObject(h)||n.isArray(h))&&(a||(o[0]=s),c=n.map(o,function(t){var i;if(n.each(h,function(n,r){if(r===t)return i=n,!1}),void 0!==i)return i}));return c.join(", ")}return s||""};n.unformat.date=function(t,i){var r=n.jgrid.getRegional(this,"formatter.date")||{};return void 0!==i.formatoptions&&(r=n.extend({},r,i.formatoptions)),n.fmatter.isEmpty(t)?n.fn.fmatter.defaultFormat(t,i):n.jgrid.parseDate.call(this,r.newformat,t,r.srcformat,r)}});!function(n){"use strict";"function"==typeof define&&define.amd?define(["jquery","./grid.base","./jqModal","./jqDnR"],n):n(jQuery)}(function(n){"use strict";n.extend(n.jgrid,{showModal:function(n){n.w.show()},closeModal:function(n){n.w.hide().attr("aria-hidden","true");n.o&&n.o.remove()},hideModal:function(t,i){var r,o,u,f,e,s;if(i=n.extend({jqm:!0,gb:"",removemodal:!1,formprop:!1,form:""},i||{}),r=!(!i.gb||"string"!=typeof i.gb||"#gbox_"!==i.gb.substr(0,6))&&n("#"+i.gb.substr(6))[0],!i.onClose||(o=r?i.onClose.call(r,t):i.onClose(t),"boolean"!=typeof o||o)){if(i.formprop&&r&&i.form&&(u=n(t)[0].style.height,f=n(t)[0].style.width,u.indexOf("px")>-1&&(u=parseFloat(u)),f.indexOf("px")>-1&&(f=parseFloat(f)),"edit"===i.form?(e="#"+n.jgrid.jqID("FrmGrid_"+i.gb.substr(6)),s="formProp"):"view"===i.form&&(e="#"+n.jgrid.jqID("ViewGrid_"+i.gb.substr(6)),s="viewProp"),n(r).data(s,{top:parseFloat(n(t).css("top")),left:parseFloat(n(t).css("left")),width:f,height:u,dataheight:n(e).height(),datawidth:n(e).width()})),n.fn.jqm&&!0===i.jqm)n(t).attr("aria-hidden","true").jqmHide();else{if(""!==i.gb)try{n(".jqgrid-overlay:first",i.gb).hide()}catch(n){}try{n(".jqgrid-overlay-modal").hide()}catch(n){}n(t).hide().attr("aria-hidden","true")}i.removemodal&&n(t).remove()}},findPos:function(t){var i=n(t).offset();return[i.left,i.top]},createModal:function(t,i,r,u,f,e,o){var h,v,y,c,p,w,b;r=n.extend(!0,{},n.jgrid.jqModal||{},r);var k=this,d="rtl"===n(r.gbox).attr("dir"),l=n.jgrid.styleUI[r.styleUI||"jQueryUI"].modal,a=n.jgrid.styleUI[r.styleUI||"jQueryUI"].common,s=document.createElement("div");if(o=n.extend({},o||{}),s.className="ui-jqdialog "+l.modal,s.id=t.themodal,h=document.createElement("div"),h.className="ui-jqdialog-titlebar "+l.header,h.id=t.modalhead,n(h).append("<span class='ui-jqdialog-title'>"+r.caption+"<\/span>"),v=n("<a class='ui-jqdialog-titlebar-close "+a.cornerall+"'><\/a>").hover(function(){v.addClass(a.hover)},function(){v.removeClass(a.hover)}).append("<span class='"+a.icon_base+" "+l.icon_close+"'><\/span>"),n(h).append(v),d?(s.dir="rtl",n(".ui-jqdialog-title",h).css("float","right"),n(".ui-jqdialog-titlebar-close",h).css("left","0.3em")):(s.dir="ltr",n(".ui-jqdialog-title",h).css("float","left"),n(".ui-jqdialog-titlebar-close",h).css("right","0.3em")),y=document.createElement("div"),n(y).addClass("ui-jqdialog-content "+l.content).attr("id",t.modalcontent),n(y).append(i),s.appendChild(y),n(s).prepend(h),!0===e?n("body").append(s):"string"==typeof e?n(e).append(s):n(s).insertBefore(u),n(s).css(o),void 0===r.jqModal&&(r.jqModal=!0),c={},n.fn.jqm&&!0===r.jqModal?(0===r.left&&0===r.top&&r.overlay&&(p=[],p=n.jgrid.findPos(f),r.left=p[0]+4,r.top=p[1]+4),c.top=r.top+"px",c.left=r.left):0===r.left&&0===r.top||(c.left=r.left,c.top=r.top+"px"),(n("a.ui-jqdialog-titlebar-close",h).click(function(){var i=n("#"+n.jgrid.jqID(t.themodal)).data("onClose")||r.onClose,u=n("#"+n.jgrid.jqID(t.themodal)).data("gbox")||r.gbox;return k.hideModal("#"+n.jgrid.jqID(t.themodal),{gb:u,jqm:r.jqModal,onClose:i,removemodal:r.removemodal||!1,formprop:!r.recreateForm||!1,form:r.form||""}),!1}),0!==r.width&&r.width||(r.width=300),0!==r.height&&r.height||(r.height=200),r.zIndex)||(w=n(u).parents("*[role=dialog]").filter(":first").css("z-index"),r.zIndex=w?parseInt(w,10)+2:950),b=0,d&&c.left&&!e&&(b=n(r.gbox).width()-(isNaN(r.width)?0:parseInt(r.width,10))-8,c.left=parseInt(c.left,10)+parseInt(b,10)),c.left&&(c.left+="px"),n(s).css(n.extend({width:isNaN(r.width)?"auto":r.width+"px",height:isNaN(r.height)?"auto":r.height+"px",zIndex:r.zIndex,overflow:"hidden"},c)).attr({tabIndex:"-1",role:"dialog","aria-labelledby":t.modalhead,"aria-hidden":"true"}),void 0===r.drag&&(r.drag=!0),void 0===r.resize&&(r.resize=!0),r.drag)if(n(h).css("cursor","move"),n.fn.tinyDraggable)n(s).tinyDraggable({handle:"#"+n.jgrid.jqID(h.id)});else try{n(s).draggable({handle:n("#"+n.jgrid.jqID(h.id))})}catch(n){}if(r.resize)if(n.fn.jqResize)n(s).append("<div class='jqResize "+l.resizable+" "+a.icon_base+" "+l.icon_resizable+"'><\/div>"),n("#"+n.jgrid.jqID(t.themodal)).jqResize(".jqResize",!!t.scrollelm&&"#"+n.jgrid.jqID(t.scrollelm));else try{n(s).resizable({handles:"se, sw",alsoResize:!!t.scrollelm&&"#"+n.jgrid.jqID(t.scrollelm)})}catch(n){}!0===r.closeOnEscape&&n(s).keydown(function(i){if(27===i.which){var u=n("#"+n.jgrid.jqID(t.themodal)).data("onClose")||r.onClose;k.hideModal("#"+n.jgrid.jqID(t.themodal),{gb:r.gbox,jqm:r.jqModal,onClose:u,removemodal:r.removemodal||!1,formprop:!r.recreateForm||!1,form:r.form||""})}})},viewModal:function(t,i){var u,r,f;if(i=n.extend({toTop:!0,overlay:10,modal:!1,overlayClass:"ui-widget-overlay",onShow:n.jgrid.showModal,onHide:n.jgrid.closeModal,gbox:"",jqm:!0,jqM:!0},i||{}),u="",i.gbox){r=n("#"+i.gbox.substring(6))[0];try{u=n(r).jqGrid("getStyleUI",r.p.styleUI+".common","overlay",!1,"jqgrid-overlay-modal");i.overlayClass=n(r).jqGrid("getStyleUI",r.p.styleUI+".common","overlay",!0)}catch(n){}}if(void 0===i.focusField&&(i.focusField=0),i.focusField="number"==typeof i.focusField&&i.focusField>=0?parseInt(i.focusField,10):"boolean"!=typeof i.focusField||i.focusField?0:!1,n.fn.jqm&&!0===i.jqm)i.jqM?n(t).attr("aria-hidden","false").jqm(i).jqmShow():n(t).attr("aria-hidden","false").jqmShow();else if(""!==i.gbox&&(f=parseInt(n(t).css("z-index"))-1,i.modal?(n(".jqgrid-overlay-modal")[0]||n("body").prepend("<div "+u+"><\/div>"),n(".jqgrid-overlay-modal").css("z-index",f).show()):(n(".jqgrid-overlay:first",i.gbox).css("z-index",f).show(),n(t).data("gbox",i.gbox))),n(t).show().attr("aria-hidden","false"),i.focusField>=0)try{n(":input:visible",t)[i.focusField].focus()}catch(n){}},info_dialog:function(t,i,r,u){var f={width:290,height:"auto",dataheight:"auto",drag:!0,resize:!1,left:250,top:170,zIndex:1e3,jqModal:!0,modal:!1,closeOnEscape:!0,align:"center",buttonalign:"center",buttons:[]},e,o,a;n.extend(!0,f,n.jgrid.jqModal||{},{caption:"<b>"+t+"<\/b>"},u||{});var s=f.jqModal,v=this,l=n.jgrid.styleUI[f.styleUI||"jQueryUI"].modal,h=n.jgrid.styleUI[f.styleUI||"jQueryUI"].common;if(n.fn.jqm&&!s&&(s=!1),o="",f.buttons.length>0)for(e=0;e<f.buttons.length;e++)void 0===f.buttons[e].id&&(f.buttons[e].id="info_button_"+e),o+="<a id='"+f.buttons[e].id+"' class='fm-button "+h.button+"'>"+f.buttons[e].text+"<\/a>";var y=isNaN(f.dataheight)?f.dataheight:f.dataheight+"px",p="text-align:"+f.align+";",c="<div id='info_id'>";c+="<div id='infocnt' style='margin:0px;padding-bottom:1em;width:100%;overflow:auto;position:relative;height:"+y+";"+p+"'>"+i+"<\/div>";c+=r?"<div class='"+l.content+"' style='text-align:"+f.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'><a id='closedialog' class='fm-button "+h.button+"'>"+r+"<\/a>"+o+"<\/div>":""!==o?"<div class='"+l.content+"' style='text-align:"+f.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'>"+o+"<\/div>":"";c+="<\/div>";try{"false"===n("#info_dialog").attr("aria-hidden")&&n.jgrid.hideModal("#info_dialog",{jqm:s});n("#info_dialog").remove()}catch(n){}a=n(".ui-jqgrid").css("font-size")||"11px";n.jgrid.createModal({themodal:"info_dialog",modalhead:"info_head",modalcontent:"info_content",scrollelm:"infocnt"},c,f,"","",!0,{"font-size":a});o&&n.each(f.buttons,function(t){n("#"+n.jgrid.jqID(this.id),"#info_id").on("click",function(){return f.buttons[t].onClick.call(n("#info_dialog")),!1})});n("#closedialog","#info_id").on("click",function(){return v.hideModal("#info_dialog",{jqm:s,onClose:n("#info_dialog").data("onClose")||f.onClose,gb:n("#info_dialog").data("gbox")||f.gbox}),!1});n(".fm-button","#info_dialog").hover(function(){n(this).addClass(h.hover)},function(){n(this).removeClass(h.hover)});n.isFunction(f.beforeOpen)&&f.beforeOpen();n.jgrid.viewModal("#info_dialog",{onHide:function(n){n.w.hide().remove();n.o&&n.o.remove()},modal:f.modal,jqm:s});n.isFunction(f.afterOpen)&&f.afterOpen();try{n("#info_dialog").focus()}catch(n){}},bindEv:function(t,i){var r=this;n.isFunction(i.dataInit)&&i.dataInit.call(r,t,i);i.dataEvents&&n.each(i.dataEvents,function(){void 0!==this.data?n(t).on(this.type,this.data,this.fn):n(t).on(this.type,this.fn)})},createEl:function(t,i,r,u,f){function p(t,i,r){var u=["dataInit","dataEvents","dataUrl","buildSelect","sopt","searchhidden","defaultValue","attr","custom_element","custom_value","oper"];u=u.concat(["cacheUrlData","delimiter","separator"]);void 0!==r&&n.isArray(r)&&n.merge(u,r);n.each(i,function(i,r){-1===n.inArray(i,u)&&n(t).attr(i,r)});i.hasOwnProperty("id")||n(t).attr("id",n.jgrid.randId())}var e="",s=this,g,it,l,a,w,k,v,rt,y,o,c,h,nt,ut,ft,d,tt,b,et;switch(t){case"textarea":e=document.createElement("textarea");u?i.cols||n(e).css({width:"98%"}):i.cols||(i.cols=20);i.rows||(i.rows=2);("&nbsp;"===r||"&#160;"===r||1===r.length&&160===r.charCodeAt(0))&&(r="");e.value=r;n(e).attr({role:"textbox",multiline:"true"});p(e,i);break;case"checkbox":(e=document.createElement("input"),e.type="checkbox",i.value)?(g=i.value.split(":"),r===g[0]&&(e.checked=!0,e.defaultChecked=!0),e.value=g[0],n(e).attr("offval",g[1])):(it=(r+"").toLowerCase(),it.search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==it?(e.checked=!0,e.defaultChecked=!0,e.value=r):e.value="on",n(e).attr("offval","off"));n(e).attr("role","checkbox");p(e,i,["value"]);break;case"select":if(e=document.createElement("select"),e.setAttribute("role","select"),a=[],!0===i.multiple?(l=!0,e.multiple="multiple",n(e).attr("aria-multiselectable","true")):l=!1,null!=i.dataUrl){w=null;k=i.postData||f.postData;try{w=i.rowId}catch(n){}s.p&&s.p.idPrefix&&(w=n.jgrid.stripPref(s.p.idPrefix,w));n.ajax(n.extend({url:n.isFunction(i.dataUrl)?i.dataUrl.call(s,w,r,String(i.name)):i.dataUrl,type:"GET",dataType:"html",data:n.isFunction(k)?k.call(s,w,r,String(i.name)):k,context:{elem:e,options:i,vl:r},success:function(t){var h,r=[],u=this.elem,f=this.vl,i=n.extend({},this.options),c=!0===i.multiple,l=!0===i.cacheUrlData,o="",e=n.isFunction(i.buildSelect)?i.buildSelect.call(s,t):t,a,v;("string"==typeof e&&(e=n(n.trim(e)).html()),e)&&((n(u).append(e),p(u,i,k?["postData"]:void 0),void 0===i.size&&(i.size=c?3:1),c?(r=f.split(","),r=n.map(r,function(t){return n.trim(t)})):r[0]=n.trim(f),n("option",u).each(function(t){h=n(this).text();f=n(this).val();l&&(o+=(0!==t?";":"")+f+":"+h);0===t&&u.multiple&&(this.selected=!1);n(this).attr("role","option");(n.inArray(n.trim(h),r)>-1||n.inArray(n.trim(f),r)>-1)&&(this.selected="selected")}),l)&&("edit"===i.oper?n(s).jqGrid("setColProp",i.name,{editoptions:{buildSelect:null,dataUrl:null,value:o}}):"search"===i.oper?n(s).jqGrid("setColProp",i.name,{searchoptions:{dataUrl:null,value:o}}):"filter"===i.oper&&n("#fbox_"+s.p.id)[0].p&&(v=n("#fbox_"+s.p.id)[0].p.columns,n.each(v,function(){if(a=this.index||this.name,i.name===a)return this.searchoptions.dataUrl=null,this.searchoptions.value=o,!1}))),n(s).triggerHandler("jqGridAddEditAfterSelectUrlComplete",[u]))}},f||{}))}else if(i.value){if(void 0===i.size&&(i.size=l?3:1),l&&(a=r.split(","),a=n.map(a,function(t){return n.trim(t)})),"function"==typeof i.value&&(i.value=i.value()),ut=void 0===i.separator?":":i.separator,ft=void 0===i.delimiter?";":i.delimiter,"string"==typeof i.value)for(rt=i.value.split(ft),v=0;v<rt.length;v++)y=rt[v].split(ut),y.length>2&&(y[1]=n.map(y,function(n,t){if(t>0)return n}).join(ut)),o=document.createElement("option"),o.setAttribute("role","option"),o.value=y[0],o.innerHTML=y[1],e.appendChild(o),l||n.trim(y[0])!==n.trim(r)&&n.trim(y[1])!==n.trim(r)||(o.selected="selected"),l&&(n.inArray(n.trim(y[1]),a)>-1||n.inArray(n.trim(y[0]),a)>-1)&&(o.selected="selected");else if("[object Array]"===Object.prototype.toString.call(i.value))for(c=i.value,v=0;v<c.length;v++)2===c[v].length&&(h=c[v][0],nt=c[v][1],o=document.createElement("option"),o.setAttribute("role","option"),o.value=h,o.innerHTML=nt,e.appendChild(o),l||n.trim(h)!==n.trim(r)&&n.trim(nt)!==n.trim(r)||(o.selected="selected"),l&&(n.inArray(n.trim(nt),a)>-1||n.inArray(n.trim(h),a)>-1)&&(o.selected="selected"));else if("object"==typeof i.value){c=i.value;for(h in c)c.hasOwnProperty(h)&&(o=document.createElement("option"),o.setAttribute("role","option"),o.value=h,o.innerHTML=c[h],e.appendChild(o),l||n.trim(h)!==n.trim(r)&&n.trim(c[h])!==n.trim(r)||(o.selected="selected"),l&&(n.inArray(n.trim(c[h]),a)>-1||n.inArray(n.trim(h),a)>-1)&&(o.selected="selected"))}p(e,i,["value"])}break;case"image":case"file":e=document.createElement("input");e.type=t;p(e,i);break;case"custom":e=document.createElement("span");try{if(!n.isFunction(i.custom_element))throw"e1";if(d=i.custom_element.call(s,r,i),!d)throw"e2";d=n(d).addClass("customelement").attr({id:i.id,name:i.name});n(e).empty().append(d)}catch(t){tt=n.jgrid.getRegional(s,"errors");b=n.jgrid.getRegional(s,"edit");"e1"===t?n.jgrid.info_dialog(tt.errcap,"function 'custom_element' "+b.msg.nodefined,b.bClose,{styleUI:s.p.styleUI}):"e2"===t?n.jgrid.info_dialog(tt.errcap,"function 'custom_element' "+b.msg.novalue,b.bClose,{styleUI:s.p.styleUI}):n.jgrid.info_dialog(tt.errcap,"string"==typeof t?t:t.message,b.bClose,{styleUI:s.p.styleUI})}break;default:et="button"===t?"button":"textbox";e=document.createElement("input");e.type=t;e.value=r;"button"!==t&&(u?i.size||n(e).css({width:"96%"}):i.size||(i.size=20));n(e).attr("role",et);p(e,i)}return e},checkDate:function(n,t){var h,a=function(n){return n%4!=0||n%100==0&&n%400!=0?28:29},i={},c,s,l;if(n=n.toLowerCase(),h=-1!==n.indexOf("/")?"/":-1!==n.indexOf("-")?"-":-1!==n.indexOf(".")?".":"/",n=n.split(h),t=t.split(h),3!==t.length)return!1;for(var f,u=-1,e=-1,o=-1,r=0;r<n.length;r++)c=isNaN(t[r])?0:parseInt(t[r],10),i[n[r]]=c,f=n[r],-1!==f.indexOf("y")&&(u=r),-1!==f.indexOf("m")&&(o=r),-1!==f.indexOf("d")&&(e=r);return f="y"===n[u]||"yyyy"===n[u]?4:"yy"===n[u]?2:-1,l=[0,31,29,31,30,31,30,31,31,30,31,30,31],-1!==u&&(s=i[n[u]].toString(),2===f&&1===s.length&&(f=1),s.length===f&&(0!==i[n[u]]||"00"===t[u])&&-1!==o&&(s=i[n[o]].toString(),!(s.length<1||i[n[o]]<1||i[n[o]]>12)&&-1!==e&&(s=i[n[e]].toString(),!(s.length<1||i[n[e]]<1||i[n[e]]>31||2===i[n[o]]&&i[n[e]]>a(i[n[u]])||i[n[e]]>l[i[n[o]]]))))},isEmpty:function(n){return!(void 0!==n&&!n.match(/^\s+$/)&&""!==n)},checkTime:function(t){var i;if(!n.jgrid.isEmpty(t)){if(!(i=t.match(/^(\d{1,2}):(\d{2})([apAP][Mm])?$/)))return!1;if(i[3]){if(i[1]<1||i[1]>12)return!1}else if(i[1]>23)return!1;if(i[2]>59)return!1}return!0},checkValues:function(t,i,r,u){var f,h,e,l,w,y,a=this,s=a.p.colModel,o=n.jgrid.getRegional(this,"edit.msg"),b=function(n){var n=n.toString(),t,i;return n.length>=2&&("-"===n[0]?(t=n[1],n[2]&&(i=n[2])):(t=n[0],n[1]&&(i=n[1])),"0"===t&&"."!==i)?!1:"number"==typeof parseFloat(n)&&isFinite(n)},c,v,p;if(void 0===r)if("string"==typeof i){for(h=0,w=s.length;h<w;h++)if(s[h].name===i){f=s[h].editrules;i=h;null!=s[h].formoptions&&(e=s[h].formoptions.label);break}}else i>=0&&(f=s[i].editrules);else f=r,e=void 0===u?"_":u;if(f){if(e||(e=null!=a.p.colNames?a.p.colNames[i]:s[i].label),!0===f.required&&n.jgrid.isEmpty(t))return[!1,e+": "+o.required,""];if(c=!1!==f.required,!0===f.number&&!(!1===c&&n.jgrid.isEmpty(t)||b(t)))return[!1,e+": "+o.number,""];if(void 0!==f.minValue&&!isNaN(f.minValue)&&parseFloat(t)<parseFloat(f.minValue))return[!1,e+": "+o.minValue+" "+f.minValue,""];if(void 0!==f.maxValue&&!isNaN(f.maxValue)&&parseFloat(t)>parseFloat(f.maxValue))return[!1,e+": "+o.maxValue+" "+f.maxValue,""];if(!0===f.email&&!(!1===c&&n.jgrid.isEmpty(t)||(v=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,v.test(t))))return[!1,e+": "+o.email,""];if(!0===f.integer&&(!1!==c||!n.jgrid.isEmpty(t))){if(!b(t))return[!1,e+": "+o.integer,""];if(t%1!=0||-1!==t.indexOf("."))return[!1,e+": "+o.integer,""]}if(!0===f.date&&!(!1===c&&n.jgrid.isEmpty(t)||(s[i].formatoptions&&s[i].formatoptions.newformat?(l=s[i].formatoptions.newformat,(y=n.jgrid.getRegional(a,"formatter.date.masks"))&&y.hasOwnProperty(l)&&(l=y[l])):l=s[i].datefmt||"Y-m-d",n.jgrid.checkDate(l,t))))return[!1,e+": "+o.date+" - "+l,""];if(!0===f.time&&!(!1===c&&n.jgrid.isEmpty(t)||n.jgrid.checkTime(t)))return[!1,e+": "+o.date+" - hh:mm (am/pm)",""];if(!0===f.url&&!(!1===c&&n.jgrid.isEmpty(t)||(v=/^(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i,v.test(t))))return[!1,e+": "+o.url,""];if(!0===f.custom&&(!1!==c||!n.jgrid.isEmpty(t)))return n.isFunction(f.custom_func)?(p=f.custom_func.call(a,t,e,i),n.isArray(p)?p:[!1,o.customarray,""]):[!1,o.customfcheck,""]}return[!0,"",""]},validateForm:function(t){for(var i,u=!0,r=0;r<t.elements.length;r++)if(i=t.elements[r],("INPUT"===i.nodeName||"TEXTAREA"===i.nodeName||"SELECT"===i.nodeName)&&(void 0!==i.willValidate?("INPUT"===i.nodeName&&i.type!==i.getAttribute("type")&&i.setCustomValidity(n.jgrid.LegacyValidation(i)?"":"error"),i.reportValidity()):(i.validity=i.validity||{},i.validity.valid=n.jgrid.LegacyValidation(i)),!i.validity.valid)){u=!1;break}return u},LegacyValidation:function(n){var t=!0,i=n.value,f=n.getAttribute("type"),u="checkbox"===f||"radio"===f,s=n.getAttribute("required"),e=n.getAttribute("minlength"),o=n.getAttribute("maxlength"),r=n.getAttribute("pattern");return n.disabled?t:(t=t&&(!s||u&&n.checked||!u&&""!==i),t=t&&(u||(!e||i.length>=e)&&(!o||i.length<=o)),t&&r&&(r=new RegExp(r),t=r.test(i)),t)},buildButtons:function(t,i,r){var f,u;return n.each(t,function(t,e){e.id||(e.id=n.jgrid.randId());e.position||(e.position="last");e.side||(e.side="left");f=e.icon?" fm-button-icon-"+e.side+"'><span class='"+r.icon_base+" "+e.icon+"'><\/span>":"'>";u="<a  data-index='"+t+"' id='"+e.id+"' class='fm-button "+r.button+f+e.text+"<\/a>";"last"===e.position?i+=u:i=u+i}),i}})});!function(n){"use strict";"function"==typeof define&&define.amd?define(["jquery","./grid.base","./grid.common"],n):n(jQuery)}(function(n){"use strict";var t={};n.jgrid.extend({editGridRow:function(i,r){var o=n.jgrid.getRegional(this[0],"edit"),e=this[0].p.styleUI,f=n.jgrid.styleUI[e].formedit,u=n.jgrid.styleUI[e].common;return r=n.extend(!0,{top:0,left:0,width:"500",datawidth:"auto",height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:null,mtype:"POST",clearAfterAdd:!0,closeAfterEdit:!1,reloadAfterSubmit:!0,onInitializeForm:null,beforeInitData:null,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},recreateForm:!1,jqModal:!0,closeOnEscape:!1,addedrow:"first",topinfo:"",bottominfo:"",saveicon:[],closeicon:[],savekey:[!1,13],navkeys:[!1,38,40],checkOnSubmit:!1,checkOnUpdate:!1,processing:!1,onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:!0,overlayClass:u.overlay,removemodal:!0,form:"edit",template:null,focusField:!0,editselected:!1,html5Check:!1,buttons:[]},o,r||{}),t[n(this)[0].p.id]=r,this.each(function(){function gt(){var i,r={},u;n(y).find(".FormElement").each(function(){var u=n(".customelement",this),f,i,s;if(u.length)f=u[0],i=n(f).attr("name"),n.each(e.p.colModel,function(){if(this.name===i&&this.editoptions&&n.isFunction(this.editoptions.custom_value)){try{if(o[i]=this.editoptions.custom_value.call(e,n("#"+n.jgrid.jqID(i),y),"get"),void 0===o[i])throw"e1";}catch(r){"e1"===r?n.jgrid.info_dialog(k.errcap,"function 'custom_value' "+t[n(this)[0]].p.msg.novalue,t[n(this)[0]].p.bClose,{styleUI:t[n(this)[0]].p.styleUI}):n.jgrid.info_dialog(k.errcap,r.message,t[n(this)[0]].p.bClose,{styleUI:t[n(this)[0]].p.styleUI})}return!0}});else{switch(n(this).get(0).type){case"checkbox":n(this).is(":checked")?o[this.name]=n(this).val():(s=n(this).attr("offval"),o[this.name]=s);break;case"select-one":o[this.name]=n(this).val();break;case"select-multiple":o[this.name]=n(this).val();o[this.name]=o[this.name]?o[this.name].join(","):"";break;case"radio":if(r.hasOwnProperty(this.name))return!0;r[this.name]=void 0===n(this).attr("offval")?"off":n(this).attr("offval");break;default:o[this.name]=n(this).val()}e.p.autoencode&&(o[this.name]=n.jgrid.htmlEncode(o[this.name]))}});for(i in r)r.hasOwnProperty(i)&&(u=n('input[name="'+i+'"]:checked',y).val(),o[i]=void 0!==u?u:r[i],e.p.autoencode&&(o[i]=n.jgrid.htmlEncode(o[i])));return!0}function ii(i,r,u,o){for(var c,d,a,h,g,l,k,p=0,nt=[],y=!1,tt="",w,b=1;b<=o;b++)tt+="<td class='CaptionTD'><\/td><td class='DataTD'><\/td>";return("_empty"!==i&&(y=n(r).jqGrid("getInd",i)),n(r.p.colModel).each(function(w){var ft,et;if(c=this.name,d=(!this.editrules||!0!==this.editrules.edithidden)&&!0===this.hidden,g=d?"style='display:none'":"","cb"!==c&&"subgrid"!==c&&!0===this.editable&&"rn"!==c){if(!1===y)h="";else if(c===r.p.ExpandColumn&&!0===r.p.treeGrid)h=n("td[role='gridcell']:eq("+w+")",r.rows[y]).text();else{try{h=n.unformat.call(r,n("td[role='gridcell']:eq("+w+")",r.rows[y]),{rowId:i,colModel:this},w)}catch(t){h=this.edittype&&"textarea"===this.edittype?n("td[role='gridcell']:eq("+w+")",r.rows[y]).text():n("td[role='gridcell']:eq("+w+")",r.rows[y]).html()}h&&"&nbsp;"!==h&&"&#160;"!==h&&(1!==h.length||160!==h.charCodeAt(0))||(h="")}var b=n.extend({},this.editoptions||{},{id:c,name:c,rowId:i,oper:"edit"}),it=n.extend({},{elmprefix:"",elmsuffix:"",rowabove:!1,rowcontent:""},this.formoptions||{}),ut=parseInt(it.rowpos,10)||p+1,ot=parseInt(2*(parseInt(it.colpos,10)||1),10);("_empty"===i&&b.defaultValue&&(h=n.isFunction(b.defaultValue)?b.defaultValue.call(e):b.defaultValue),this.edittype||(this.edittype="text"),e.p.autoencode&&(h=n.jgrid.htmlDecode(h)),l=n.jgrid.createEl.call(e,this.edittype,b,h,!1,n.extend({},n.jgrid.ajaxOptions,r.p.ajaxSelectOptions||{})),"select"===this.edittype&&(h=n(l).val(),"select-multiple"===n(l).get(0).type&&h&&(h=h.join(","))),"checkbox"===this.edittype&&(h=n(l).is(":checked")?n(l).val():n(l).attr("offval")),n(l).addClass("FormElement"),n.inArray(this.edittype,["text","textarea","password","select","color","date","datetime","datetime-local","email","month","number","range","search","tel","time","url","week"])>-1&&n(l).addClass(f.inputClass),k=!0,rt)?(ft=n(v).find("#"+c),ft.length?ft.replaceWith(l):k=!1):((a=n(u).find("tr[rowpos="+ut+"]"),it.rowabove)&&(et=n("<tr><td class='contentinfo' colspan='"+2*o+"'>"+it.rowcontent+"<\/td><\/tr>"),n(u).append(et),et[0].rp=ut),0===a.length&&(a=n("<tr "+g+" rowpos='"+ut+"'><\/tr>").addClass("FormData").attr("id","tr_"+c),n(a).append(tt),n(u).append(a),a[0].rp=ut),n("td:eq("+(ot-2)+")",a[0]).html("<label for='"+c+"'>"+(void 0===it.label?r.p.colNames[w]:it.label)+"<\/label>"),n("td:eq("+(ot-1)+")",a[0]).append(it.elmprefix).append(l).append(it.elmsuffix));(t[e.p.id].checkOnSubmit||t[e.p.id].checkOnUpdate)&&k&&(e.p.savedData[c]=h);"custom"===this.edittype&&n.isFunction(b.custom_value)&&b.custom_value.call(e,n("#"+c,s),"set",h);n.jgrid.bindEv.call(e,l,b);nt[p]=w;p++}}),p>0)&&(rt?(w="<div class='FormData' style='display:none'><input class='FormElement' id='id_g' type='text' name='"+r.p.id+"_id' value='"+i+"'/>",n(v).append(w)):(w=n("<tr class='FormData' style='display:none'><td class='CaptionTD'><\/td><td colspan='"+(2*o-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='"+r.p.id+"_id' value='"+i+"'/><\/td><\/tr>"),w[0].rp=p+999,n(u).append(w)),(t[e.p.id].checkOnSubmit||t[e.p.id].checkOnUpdate)&&(e.p.savedData[r.p.id+"_id"]=i)),nt}function st(i,r,u){var o,f,s,l,c,a,p=0,h,v;if((t[e.p.id].checkOnSubmit||t[e.p.id].checkOnUpdate)&&(e.p.savedData={},e.p.savedData[r.p.id+"_id"]=i),h=r.p.colModel,"_empty"===i)return n(h).each(function(){o=this.name;l=n.extend({},this.editoptions||{});(s=n("#"+n.jgrid.jqID(o),u))&&s.length&&null!==s[0]&&(c="","custom"===this.edittype&&n.isFunction(l.custom_value)?l.custom_value.call(e,n("#"+o,u),"set",c):l.defaultValue?(c=n.isFunction(l.defaultValue)?l.defaultValue.call(e):l.defaultValue,"checkbox"===s[0].type?(a=c.toLowerCase(),a.search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==a?(s[0].checked=!0,s[0].defaultChecked=!0,s[0].value=c):(s[0].checked=!1,s[0].defaultChecked=!1)):s.val(c)):"checkbox"===s[0].type?(s[0].checked=!1,s[0].defaultChecked=!1,c=n(s).attr("offval")):s[0].type&&"select"===s[0].type.substr(0,6)?s[0].selectedIndex=0:s.val(c),(!0===t[e.p.id].checkOnSubmit||t[e.p.id].checkOnUpdate)&&(e.p.savedData[o]=c))}),void n("#id_g",u).val(i);v=n(r).jqGrid("getInd",i,!0);v&&(n('td[role="gridcell"]',v).each(function(s){if("cb"!==(o=h[s].name)&&"subgrid"!==o&&"rn"!==o&&!0===h[s].editable){if(o===r.p.ExpandColumn&&!0===r.p.treeGrid)f=n(this).text();else try{f=n.unformat.call(r,n(this),{rowId:i,colModel:h[s]},s)}catch(t){f="textarea"===h[s].edittype?n(this).text():n(this).html()}switch(e.p.autoencode&&(f=n.jgrid.htmlDecode(f)),(!0===t[e.p.id].checkOnSubmit||t[e.p.id].checkOnUpdate)&&(e.p.savedData[o]=f),o=n.jgrid.jqID(o),h[s].edittype){case"select":var c=f.split(",");c=n.map(c,function(t){return n.trim(t)});n("#"+o+" option",u).each(function(){this.selected=h[s].editoptions.multiple||n.trim(f)!==n.trim(n(this).text())&&c[0]!==n.trim(n(this).text())&&c[0]!==n.trim(n(this).val())?h[s].editoptions.multiple&&(n.inArray(n.trim(n(this).text()),c)>-1||n.inArray(n.trim(n(this).val()),c)>-1)?!0:!1:!0});(!0===t[e.p.id].checkOnSubmit||t[e.p.id].checkOnUpdate)&&(f=n("#"+o,u).val(),h[s].editoptions.multiple&&(f=f.join(",")),e.p.savedData[o]=f);break;case"checkbox":(f=String(f),h[s].editoptions&&h[s].editoptions.value)?h[s].editoptions.value.split(":")[0]===f?n("#"+o,u)[e.p.useProp?"prop":"attr"]({checked:!0,defaultChecked:!0}):n("#"+o,u)[e.p.useProp?"prop":"attr"]({checked:!1,defaultChecked:!1}):(f=f.toLowerCase(),f.search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==f?(n("#"+o,u)[e.p.useProp?"prop":"attr"]("checked",!0),n("#"+o,u)[e.p.useProp?"prop":"attr"]("defaultChecked",!0)):(n("#"+o,u)[e.p.useProp?"prop":"attr"]("checked",!1),n("#"+o,u)[e.p.useProp?"prop":"attr"]("defaultChecked",!1)));(!0===t[e.p.id].checkOnSubmit||t[e.p.id].checkOnUpdate)&&(f=n("#"+o,u).is(":checked")?n("#"+o,u).val():n("#"+o,u).attr("offval"),e.p.savedData[o]=f);break;case"custom":try{if(!h[s].editoptions||!n.isFunction(h[s].editoptions.custom_value))throw"e1";h[s].editoptions.custom_value.call(e,n("#"+o,u),"set",f)}catch(i){"e1"===i?n.jgrid.info_dialog(k.errcap,"function 'custom_value' "+t[n(this)[0]].p.msg.nodefined,n.rp_ge[n(this)[0]].p.bClose,{styleUI:t[n(this)[0]].p.styleUI}):n.jgrid.info_dialog(k.errcap,i.message,n.rp_ge[n(this)[0]].p.bClose,{styleUI:t[n(this)[0]].p.styleUI})}break;default:("&nbsp;"===f||"&#160;"===f||1===f.length&&160===f.charCodeAt(0))&&(f="");n("#"+o,u).val(f)}p++}}),p>0&&(n("#id_g",y).val(i),(!0===t[e.p.id].checkOnSubmit||t[e.p.id].checkOnUpdate)&&(e.p.savedData[r.p.id+"_id"]=i)))}function ri(){n.each(e.p.colModel,function(n,t){t.editoptions&&!0===t.editoptions.NullIfEmpty&&o.hasOwnProperty(t.name)&&""===o[t.name]&&(o[t.name]="null")})}function tt(){var g,f,w,nt,rt,tt,ut,i=[!0,"",""],it={},l=e.p.prmNames,b=n(e).triggerHandler("jqGridAddEditBeforeCheckValues",[o,n(s),c]),et,ft,p,d;if(b&&"object"==typeof b&&(o=b),n.isFunction(t[e.p.id].beforeCheckValues)&&(b=t[e.p.id].beforeCheckValues.call(e,o,n(s),c))&&"object"==typeof b&&(o=b),t[e.p.id].html5Check&&!n.jgrid.validateForm(v[0]))return!1;for(nt in o)if(o.hasOwnProperty(nt)&&(i=n.jgrid.checkValues.call(e,o[nt],nt),!1===i[0]))break;if(ri(),i[0]&&(it=n(e).triggerHandler("jqGridAddEditClickSubmit",[t[e.p.id],o,c]),void 0===it&&n.isFunction(t[e.p.id].onclickSubmit)&&(it=t[e.p.id].onclickSubmit.call(e,t[e.p.id],o,c)||{}),i=n(e).triggerHandler("jqGridAddEditBeforeSubmit",[o,n(s),c]),void 0===i&&(i=[!0,"",""]),i[0]&&n.isFunction(t[e.p.id].beforeSubmit)&&(i=t[e.p.id].beforeSubmit.call(e,o,n(s),c))),i[0]&&!t[e.p.id].processing){if(t[e.p.id].processing=!0,n("#sData",y+"_2").addClass(u.active),ut=t[e.p.id].url||n(e).jqGrid("getGridParam","editurl"),w=l.oper,f="clientArray"===ut?e.p.keyName:l.id,o[w]="_empty"===n.trim(o[e.p.id+"_id"])?l.addoper:l.editoper,o[w]!==l.addoper?o[f]=o[e.p.id+"_id"]:void 0===o[f]&&(o[f]=o[e.p.id+"_id"]),delete o[e.p.id+"_id"],o=n.extend(o,t[e.p.id].editData,it),!0===e.p.treeGrid){o[w]===l.addoper&&(rt=n(e).jqGrid("getGridParam","selrow"),et="adjacency"===e.p.treeGridModel?e.p.treeReader.parent_id_field:"parent_id",o[et]=rt);for(tt in e.p.treeReader)if(e.p.treeReader.hasOwnProperty(tt)&&(ft=e.p.treeReader[tt],o.hasOwnProperty(ft))){if(o[w]===l.addoper&&"parent_id_field"===tt)continue;delete o[ft]}}o[f]=n.jgrid.stripPref(e.p.idPrefix,o[f]);p=n.extend({url:ut,type:t[e.p.id].mtype,data:n.isFunction(t[e.p.id].serializeEditData)?t[e.p.id].serializeEditData.call(e,o):o,complete:function(v,p){var b;if(n("#sData",y+"_2").removeClass(u.active),o[f]=e.p.idPrefix+o[f],v.status>=300&&304!==v.status?(i[0]=!1,i[1]=n(e).triggerHandler("jqGridAddEditErrorTextFormat",[v,c]),i[1]=n.isFunction(t[e.p.id].errorTextFormat)?t[e.p.id].errorTextFormat.call(e,v,c):p+" Status: '"+v.statusText+"'. Error code: "+v.status):(i=n(e).triggerHandler("jqGridAddEditAfterSubmit",[v,o,c]),void 0===i&&(i=[!0,"",""]),i[0]&&n.isFunction(t[e.p.id].afterSubmit)&&(i=t[e.p.id].afterSubmit.call(e,v,o,c))),!1===i[0])n(".FormError",s).html(i[1]),n(".FormError",s).show();else if(e.p.autoencode&&n.each(o,function(t,i){o[t]=n.jgrid.htmlDecode(i)}),o[w]===l.addoper?(i[2]||(i[2]=n.jgrid.randId()),null==o[f]||o[f]===e.p.idPrefix+"_empty"||""===o[f]?o[f]=i[2]:i[2]=o[f],t[e.p.id].reloadAfterSubmit?n(e).trigger("reloadGrid"):!0===e.p.treeGrid?n(e).jqGrid("addChildNode",i[2],rt,o):n(e).jqGrid("addRowData",i[2],o,r.addedrow),t[e.p.id].closeAfterAdd?(!0!==e.p.treeGrid&&n(e).jqGrid("setSelection",i[2]),n.jgrid.hideModal("#"+n.jgrid.jqID(h.themodal),{gb:"#gbox_"+n.jgrid.jqID(a),jqm:r.jqModal,onClose:t[e.p.id].onClose,removemodal:t[e.p.id].removemodal,formprop:!t[e.p.id].recreateForm,form:t[e.p.id].form})):t[e.p.id].clearAfterAdd&&st("_empty",e,s)):(t[e.p.id].reloadAfterSubmit?(n(e).trigger("reloadGrid"),t[e.p.id].closeAfterEdit||setTimeout(function(){n(e).jqGrid("setSelection",o[f])},1e3)):!0===e.p.treeGrid?n(e).jqGrid("setTreeRow",o[f],o):n(e).jqGrid("setRowData",o[f],o),t[e.p.id].closeAfterEdit&&n.jgrid.hideModal("#"+n.jgrid.jqID(h.themodal),{gb:"#gbox_"+n.jgrid.jqID(a),jqm:r.jqModal,onClose:t[e.p.id].onClose,removemodal:t[e.p.id].removemodal,formprop:!t[e.p.id].recreateForm,form:t[e.p.id].form})),(n.isFunction(t[e.p.id].afterComplete)||n._data(n(e)[0],"events").hasOwnProperty("jqGridAddEditAfterComplete"))&&(g=v,setTimeout(function(){n(e).triggerHandler("jqGridAddEditAfterComplete",[g,o,n(s),c]);try{t[e.p.id].afterComplete.call(e,g,o,n(s),c)}catch(n){}g=null},500)),(t[e.p.id].checkOnSubmit||t[e.p.id].checkOnUpdate)&&(n(s).data("disabled",!1),"_empty"!==e.p.savedData[e.p.id+"_id"]))for(b in e.p.savedData)e.p.savedData.hasOwnProperty(b)&&o[b]&&(e.p.savedData[b]=o[b]);t[e.p.id].processing=!1;try{n(":input:visible",s)[0].focus()}catch(n){}}},n.jgrid.ajaxOptions,t[e.p.id].ajaxEditOptions);(p.url||t[e.p.id].useDataProxy||(n.isFunction(e.p.dataProxy)?t[e.p.id].useDataProxy=!0:(i[0]=!1,i[1]+=" "+k.nourl)),i[0])&&(t[e.p.id].useDataProxy?(d=e.p.dataProxy.call(e,p,"set_"+e.p.id),void 0===d&&(d=[!0,""]),!1===d[0]?(i[0]=!1,i[1]=d[1]||"Error deleting the selected row!"):(p.data.oper===l.addoper&&t[e.p.id].closeAfterAdd&&n.jgrid.hideModal("#"+n.jgrid.jqID(h.themodal),{gb:"#gbox_"+n.jgrid.jqID(a),jqm:r.jqModal,onClose:t[e.p.id].onClose,removemodal:t[e.p.id].removemodal,formprop:!t[e.p.id].recreateForm,form:t[e.p.id].form}),p.data.oper===l.editoper&&t[e.p.id].closeAfterEdit&&n.jgrid.hideModal("#"+n.jgrid.jqID(h.themodal),{gb:"#gbox_"+n.jgrid.jqID(a),jqm:r.jqModal,onClose:t[e.p.id].onClose,removemodal:t[e.p.id].removemodal,formprop:!t[e.p.id].recreateForm,form:t[e.p.id].form}))):"clientArray"===p.url?(t[e.p.id].reloadAfterSubmit=!1,o=p.data,p.complete({status:200,statusText:""},"")):n.ajax(p))}!1===i[0]&&(n(".FormError",s).html(i[1]),n(".FormError",s).show())}function ni(t,i){var r,u=!1;if(!(u=!(n.isPlainObject(t)&&n.isPlainObject(i)&&Object.getOwnPropertyNames(t).length===Object.getOwnPropertyNames(i).length)))for(r in i)if(i.hasOwnProperty(r)){if(!t.hasOwnProperty(r)){u=!0;break}if(t[r]!==i[r]){u=!0;break}}return u}function p(){var i=!0;return n(".FormError",s).hide(),t[e.p.id].checkOnUpdate&&(o={},gt(),(at=ni(o,e.p.savedData))&&(n(s).data("disabled",!0),n(".confirm","#"+h.themodal).show(),i=!1)),i}function ui(){var t;if("_empty"!==i&&void 0!==e.p.savedRow&&e.p.savedRow.length>0&&n.isFunction(n.fn.jqGrid.restoreRow))for(t=0;t<e.p.savedRow.length;t++)if(e.p.savedRow[t].id===i){n(e).jqGrid("restoreRow",i);break}}function ht(t,i){var r=i[1].length-1;0===t?n("#pData",l).addClass(u.disabled):void 0!==i[1][t-1]&&n("#"+n.jgrid.jqID(i[1][t-1])).hasClass(u.disabled)?n("#pData",l).addClass(u.disabled):n("#pData",l).removeClass(u.disabled);t===r?n("#nData",l).addClass(u.disabled):void 0!==i[1][t+1]&&n("#"+n.jgrid.jqID(i[1][t+1])).hasClass(u.disabled)?n("#nData",l).addClass(u.disabled):n("#nData",l).removeClass(u.disabled)}function ct(){var r,i=n(e).jqGrid("getDataIDs"),o=n("#id_g",y).val();if(e.p.multiselect&&t[e.p.id].editselected){for(var f=[],u=0,s=i.length;u<s;u++)-1!==n.inArray(i[u],e.p.selarrrow)&&f.push(i[u]);return r=n.inArray(o,f),[r,f]}return r=n.inArray(o,i),[r,i]}function fi(n){var t="";return"string"==typeof n&&(t=n.replace(/\{([\w\-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,function(n,t){return'<span id="'+t+'" ><\/span>'})),t}function lt(){var u,i,r,f;if(t[e.p.id].checkOnSubmit||t[e.p.id].checkOnUpdate){u=[];i={};u=n.map(e.p.savedData,function(n,t){return t});n(".FormElement",v).each(function(){if(-1===u.indexOf(this.name)){var t=n(this).val(),r=n(this).get(0).type;if("checkbox"===r)n(this).is(":checked")||(t=n(this).attr("offval"));else if("select-multiple"===r)t=t.join(",");else if("radio"===r){if(i.hasOwnProperty(this.name))return!0;i[this.name]=void 0===n(this).attr("offval")?"off":n(this).attr("offval")}e.p.savedData[this.name]=t}});for(r in i)i.hasOwnProperty(r)&&(f=n('input[name="'+r+'"]:checked',v).val(),e.p.savedData[r]=void 0!==f?f:i[r])}}var e=this,pt,ft,kt,et,ti,ot,dt;if(e.grid&&i){e.p.savedData={};var l,o,at,c,a=e.p.id,s="FrmGrid_"+a,it="TblGrid_"+a,y="#"+n.jgrid.jqID(it),h={themodal:"editmod"+a,modalhead:"edithd"+a,modalcontent:"editcnt"+a,scrollelm:s},w=!0,vt=1,yt=0,rt="string"==typeof t[e.p.id].template&&t[e.p.id].template.length>0,k=n.jgrid.getRegional(this,"errors");t[e.p.id].styleUI=e.p.styleUI||"jQueryUI";n.jgrid.isMobile()&&(t[e.p.id].resize=!1);"new"===i?(i="_empty",c="add",r.caption=t[e.p.id].addCaption):(r.caption=t[e.p.id].editCaption,c="edit");r.recreateForm||n(e).data("formProp")&&n.extend(t[n(this)[0].p.id],n(e).data("formProp"));pt=!0;r.checkOnUpdate&&r.jqModal&&!r.modal&&(pt=!1);var b,ei=isNaN(t[n(this)[0].p.id].dataheight)?t[n(this)[0].p.id].dataheight:t[n(this)[0].p.id].dataheight+"px",oi=isNaN(t[n(this)[0].p.id].datawidth)?t[n(this)[0].p.id].datawidth:t[n(this)[0].p.id].datawidth+"px",v=n("<form name='FormPost' id='"+s+"' class='FormGrid' onSubmit='return false;' style='width:"+oi+";height:"+ei+";'><\/form>").data("disabled",!1);if(rt?(b=fi(t[n(this)[0].p.id].template),l=y):(b=n("<table id='"+it+"' class='EditTable ui-common-table'><tbody><\/tbody><\/table>"),l=y+"_2"),s="#"+n.jgrid.jqID(s),n(v).append("<div class='FormError "+u.error+"' style='display:none;'><\/div>"),n(v).append("<div class='tinfo topinfo'>"+t[e.p.id].topinfo+"<\/div>"),n(e.p.colModel).each(function(){var n=this.formoptions;vt=Math.max(vt,n?n.colpos||0:0);yt=Math.max(yt,n?n.rowpos||0:0)}),n(v).append(b),w=n(e).triggerHandler("jqGridAddEditBeforeInitData",[v,c]),void 0===w&&(w=!0),w&&n.isFunction(t[e.p.id].beforeInitData)&&(w=t[e.p.id].beforeInitData.call(e,v,c)),!1!==w){ui();ii(i,e,b,vt);var ut="rtl"===e.p.direction,si=ut?"nData":"pData",hi=ut?"pData":"nData",wt="<a id='"+si+"' class='fm-button "+u.button+"'><span class='"+u.icon_base+" "+f.icon_prev+"'><\/span><\/a>",d="<a id='"+hi+"' class='fm-button "+u.button+"'><span class='"+u.icon_base+" "+f.icon_next+"'><\/span><\/a>",g="<a id='sData' class='fm-button "+u.button+"'>"+r.bSubmit+"<\/a>",nt="<a id='cData' class='fm-button "+u.button+"'>"+r.bCancel+"<\/a>",ci=n.isArray(t[e.p.id].buttons)?n.jgrid.buildButtons(t[e.p.id].buttons,g+nt,u):g+nt,bt="<table style='height:auto' class='EditTable ui-common-table' id='"+it+"_2'><tbody><tr><td colspan='2'><hr class='"+u.content+"' style='margin:1px'/><\/td><\/tr><tr id='Act_Buttons'><td class='navButton'>"+(ut?d+wt:wt+d)+"<\/td><td class='EditButton'>"+ci+"<\/td><\/tr>";(bt+="<\/tbody><\/table>",yt>0)&&(ft=[],n.each(n(b)[0].rows,function(n,t){ft[n]=t}),ft.sort(function(n,t){return n.rp>t.rp?1:n.rp<t.rp?-1:0}),n.each(ft,function(t,i){n("tbody",b).append(i)}));r.gbox="#gbox_"+n.jgrid.jqID(a);kt=!1;!0===r.closeOnEscape&&(r.closeOnEscape=!1,kt=!0);rt?(n(v).find("#pData").replaceWith(wt),n(v).find("#nData").replaceWith(d),n(v).find("#sData").replaceWith(g),n(v).find("#cData").replaceWith(nt),et=n("<div id="+it+"><\/div>").append(v)):et=n("<div><\/div>").append(v).append(bt);n(v).append("<div class='binfo topinfo bottominfo'>"+t[e.p.id].bottominfo+"<\/div>");ti=n(".ui-jqgrid").css("font-size")||"11px";(n.jgrid.createModal(h,et,t[n(this)[0].p.id],"#gview_"+n.jgrid.jqID(e.p.id),n("#gbox_"+n.jgrid.jqID(e.p.id))[0],null,{"font-size":ti}),ut&&(n("#pData, #nData",y+"_2").css("float","right"),n(".EditButton",y+"_2").css("text-align","left")),t[e.p.id].topinfo&&n(".tinfo",s).show(),t[e.p.id].bottominfo&&n(".binfo",s).show(),et=null,bt=null,n("#"+n.jgrid.jqID(h.themodal)).keydown(function(i){var u=i.target;if(!0===n(s).data("disabled"))return!1;if(!0===t[e.p.id].savekey[0]&&i.which===t[e.p.id].savekey[1]&&"TEXTAREA"!==u.tagName)return n("#sData",y+"_2").trigger("click"),!1;if(27===i.which)return!!p()&&(kt&&n.jgrid.hideModal("#"+n.jgrid.jqID(h.themodal),{gb:r.gbox,jqm:r.jqModal,onClose:t[e.p.id].onClose,removemodal:t[e.p.id].removemodal,formprop:!t[e.p.id].recreateForm,form:t[e.p.id].form}),!1);if(!0===t[e.p.id].navkeys[0]){if("_empty"===n("#id_g",y).val())return!0;if(i.which===t[e.p.id].navkeys[1])return n("#pData",l).trigger("click"),!1;if(i.which===t[e.p.id].navkeys[2])return n("#nData",l).trigger("click"),!1}}),r.checkOnUpdate&&(n("a.ui-jqdialog-titlebar-close span","#"+n.jgrid.jqID(h.themodal)).removeClass("jqmClose"),n("a.ui-jqdialog-titlebar-close","#"+n.jgrid.jqID(h.themodal)).off("click").click(function(){return!!p()&&(n.jgrid.hideModal("#"+n.jgrid.jqID(h.themodal),{gb:"#gbox_"+n.jgrid.jqID(a),jqm:r.jqModal,onClose:t[e.p.id].onClose,removemodal:t[e.p.id].removemodal,formprop:!t[e.p.id].recreateForm,form:t[e.p.id].form}),!1)})),r.saveicon=n.extend([!0,"left",f.icon_save],r.saveicon),r.closeicon=n.extend([!0,"left",f.icon_close],r.closeicon),!0===r.saveicon[0]&&n("#sData",l).addClass("right"===r.saveicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+u.icon_base+" "+r.saveicon[2]+"'><\/span>"),!0===r.closeicon[0]&&n("#cData",l).addClass("right"===r.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+u.icon_base+" "+r.closeicon[2]+"'><\/span>"),t[e.p.id].checkOnSubmit||t[e.p.id].checkOnUpdate)&&(g="<a id='sNew' class='fm-button "+u.button+"' style='z-index:1002'>"+r.bYes+"<\/a>",d="<a id='nNew' class='fm-button "+u.button+"' style='z-index:1002;margin-left:5px'>"+r.bNo+"<\/a>",nt="<a id='cNew' class='fm-button "+u.button+"' style='z-index:1002;margin-left:5px;'>"+r.bExit+"<\/a>",ot=r.zIndex||999,ot++,n("#"+h.themodal).append("<div class='"+r.overlayClass+" jqgrid-overlay confirm' style='z-index:"+ot+";display:none;position:absolute;'>&#160;<\/div><div class='confirm ui-jqconfirm "+u.content+"' style='z-index:"+(ot+1)+"'>"+r.saveData+"<br/><br/>"+g+d+nt+"<\/div>"),n("#sNew","#"+n.jgrid.jqID(h.themodal)).click(function(){return tt(),n(s).data("disabled",!1),n(".confirm","#"+n.jgrid.jqID(h.themodal)).hide(),!1}),n("#nNew","#"+n.jgrid.jqID(h.themodal)).click(function(){return n(".confirm","#"+n.jgrid.jqID(h.themodal)).hide(),n(s).data("disabled",!1),setTimeout(function(){n(":input:visible",s)[0].focus()},0),!1}),n("#cNew","#"+n.jgrid.jqID(h.themodal)).click(function(){return n(".confirm","#"+n.jgrid.jqID(h.themodal)).hide(),n(s).data("disabled",!1),n.jgrid.hideModal("#"+n.jgrid.jqID(h.themodal),{gb:"#gbox_"+n.jgrid.jqID(a),jqm:r.jqModal,onClose:t[e.p.id].onClose,removemodal:t[e.p.id].removemodal,formprop:!t[e.p.id].recreateForm,form:t[e.p.id].form}),!1}));n(e).triggerHandler("jqGridAddEditInitializeForm",[n(s),c]);n.isFunction(t[e.p.id].onInitializeForm)&&t[e.p.id].onInitializeForm.call(e,n(s),c);"_empty"!==i&&t[e.p.id].viewPagerButtons?n("#pData,#nData",l).show():n("#pData,#nData",l).hide();n(e).triggerHandler("jqGridAddEditBeforeShowForm",[n(s),c]);n.isFunction(t[e.p.id].beforeShowForm)&&t[e.p.id].beforeShowForm.call(e,n(s),c);lt();n("#"+n.jgrid.jqID(h.themodal)).data("onClose",t[e.p.id].onClose);n.jgrid.viewModal("#"+n.jgrid.jqID(h.themodal),{gbox:"#gbox_"+n.jgrid.jqID(a),jqm:r.jqModal,overlay:r.overlay,modal:r.modal,overlayClass:r.overlayClass,focusField:r.focusField,onHide:function(t){var i=n("#editmod"+a)[0].style.height,r=n("#editmod"+a)[0].style.width;i.indexOf("px")>-1&&(i=parseFloat(i));r.indexOf("px")>-1&&(r=parseFloat(r));n(e).data("formProp",{top:parseFloat(n(t.w).css("top")),left:parseFloat(n(t.w).css("left")),width:r,height:i,dataheight:n(s).height(),datawidth:n(s).width()});t.w.remove();t.o&&t.o.remove()}});pt||n("."+n.jgrid.jqID(r.overlayClass)).click(function(){return!!p()&&(n.jgrid.hideModal("#"+n.jgrid.jqID(h.themodal),{gb:"#gbox_"+n.jgrid.jqID(a),jqm:r.jqModal,onClose:t[e.p.id].onClose,removemodal:t[e.p.id].removemodal,formprop:!t[e.p.id].recreateForm,form:t[e.p.id].form}),!1)});n(".fm-button","#"+n.jgrid.jqID(h.themodal)).hover(function(){n(this).addClass(u.hover)},function(){n(this).removeClass(u.hover)});n("#sData",l).click(function(){return o={},n(".FormError",s).hide(),gt(),"_empty"===o[e.p.id+"_id"]?tt():!0===r.checkOnSubmit?(at=ni(o,e.p.savedData),at?(n(s).data("disabled",!0),n(".confirm","#"+n.jgrid.jqID(h.themodal)).show()):tt()):tt(),!1});n("#cData",l).click(function(){return!!p()&&(n.jgrid.hideModal("#"+n.jgrid.jqID(h.themodal),{gb:"#gbox_"+n.jgrid.jqID(a),jqm:r.jqModal,onClose:t[e.p.id].onClose,removemodal:t[e.p.id].removemodal,formprop:!t[e.p.id].recreateForm,form:t[e.p.id].form}),!1)});n(l).find("[data-index]").each(function(){var i=parseInt(n(this).attr("data-index"),10);i>=0&&r.buttons[i].hasOwnProperty("click")&&n(this).on("click",function(u){r.buttons[i].click.call(e,n(s)[0],t[e.p.id],u)})});n("#nData",l).click(function(){var i,f;if(!p())return!1;if(n(".FormError",s).hide(),i=ct(),i[0]=parseInt(i[0],10),-1!==i[0]&&i[1][i[0]+1]){if((n(e).triggerHandler("jqGridAddEditClickPgButtons",["next",n(s),i[1][i[0]]]),n.isFunction(r.onclickPgButtons)&&void 0!==(f=r.onclickPgButtons.call(e,"next",n(s),i[1][i[0]]))&&!1===f)||n("#"+n.jgrid.jqID(i[1][i[0]+1])).hasClass(u.disabled))return!1;st(i[1][i[0]+1],e,s);e.p.multiselect&&t[e.p.id].editselected||n(e).jqGrid("setSelection",i[1][i[0]+1]);n(e).triggerHandler("jqGridAddEditAfterClickPgButtons",["next",n(s),i[1][i[0]]]);n.isFunction(r.afterclickPgButtons)&&r.afterclickPgButtons.call(e,"next",n(s),i[1][i[0]+1]);lt();ht(i[0]+1,i)}return!1});n("#pData",l).click(function(){var i,f;if(!p())return!1;if(n(".FormError",s).hide(),i=ct(),-1!==i[0]&&i[1][i[0]-1]){if((n(e).triggerHandler("jqGridAddEditClickPgButtons",["prev",n(s),i[1][i[0]]]),n.isFunction(r.onclickPgButtons)&&void 0!==(f=r.onclickPgButtons.call(e,"prev",n(s),i[1][i[0]]))&&!1===f)||n("#"+n.jgrid.jqID(i[1][i[0]-1])).hasClass(u.disabled))return!1;st(i[1][i[0]-1],e,s);e.p.multiselect&&t[e.p.id].editselected||n(e).jqGrid("setSelection",i[1][i[0]-1]);n(e).triggerHandler("jqGridAddEditAfterClickPgButtons",["prev",n(s),i[1][i[0]]]);n.isFunction(r.afterclickPgButtons)&&r.afterclickPgButtons.call(e,"prev",n(s),i[1][i[0]-1]);lt();ht(i[0]-1,i)}return!1});n(e).triggerHandler("jqGridAddEditAfterShowForm",[n(s),c]);n.isFunction(t[e.p.id].afterShowForm)&&t[e.p.id].afterShowForm.call(e,n(s),c);dt=ct();ht(dt[0],dt)}}})},viewGridRow:function(i,r){var o=n.jgrid.getRegional(this[0],"view"),e=this[0].p.styleUI,f=n.jgrid.styleUI[e].formedit,u=n.jgrid.styleUI[e].common;return r=n.extend(!0,{top:0,left:0,width:500,datawidth:"auto",height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,jqModal:!0,closeOnEscape:!1,labelswidth:"auto",closeicon:[],navkeys:[!1,38,40],onClose:null,beforeShowForm:null,beforeInitData:null,viewPagerButtons:!0,recreateForm:!1,removemodal:!0,form:"view",buttons:[]},o,r||{}),t[n(this)[0].p.id]=r,this.each(function(){function w(){!0!==t[e.p.id].closeOnEscape&&!0!==t[e.p.id].navkeys[0]||setTimeout(function(){n(".ui-jqdialog-titlebar-close","#"+n.jgrid.jqID(c.modalhead)).attr("tabindex","-1").focus()},0)}function st(t,i,f,e){for(var s,y,o,k,d,p,w,g,h=0,nt=[],l=!1,it="<td class='CaptionTD form-view-label "+u.content+"' width='"+r.labelswidth+"'><\/td><td class='DataTD form-view-data ui-helper-reset "+u.content+"'><\/td>",tt="",rt="<td class='CaptionTD form-view-label "+u.content+"'><\/td><td class='DataTD form-view-data "+u.content+"'><\/td>",ut=["integer","number","currency"],a=0,v=0,b,c=1;c<=e;c++)tt+=1===c?it:rt;return(n(i.p.colModel).each(function(){(y=(!this.editrules||!0!==this.editrules.edithidden)&&!0===this.hidden)||"right"!==this.align||(this.formatter&&-1!==n.inArray(this.formatter,ut)?a=Math.max(a,parseInt(this.width,10)):v=Math.max(v,parseInt(this.width,10)))}),p=0!==a?a:0!==v?v:0,l=n(i).jqGrid("getInd",t),n(i.p.colModel).each(function(t){var a;if(s=this.name,w=!1,y=(!this.editrules||!0!==this.editrules.edithidden)&&!0===this.hidden,d=y?"style='display:none'":"",g="boolean"!=typeof this.viewable||this.viewable,"cb"!==s&&"subgrid"!==s&&"rn"!==s&&g){k=!1===l?"":s===i.p.ExpandColumn&&!0===i.p.treeGrid?n("td:eq("+t+")",i.rows[l]).text():n("td:eq("+t+")",i.rows[l]).html();w="right"===this.align&&0!==p;var r=n.extend({},{rowabove:!1,rowcontent:""},this.formoptions||{}),u=parseInt(r.rowpos,10)||h+1,c=parseInt(2*(parseInt(r.colpos,10)||1),10);r.rowabove&&(a=n("<tr><td class='contentinfo' colspan='"+2*e+"'>"+r.rowcontent+"<\/td><\/tr>"),n(f).append(a),a[0].rp=u);o=n(f).find("tr[rowpos="+u+"]");0===o.length&&(o=n("<tr "+d+" rowpos='"+u+"'><\/tr>").addClass("FormData").attr("id","trv_"+s),n(o).append(tt),n(f).append(o),o[0].rp=u);n("td:eq("+(c-2)+")",o[0]).html("<b>"+(void 0===r.label?i.p.colNames[t]:r.label)+"<\/b>");n("td:eq("+(c-1)+")",o[0]).append("<span>"+k+"<\/span>").attr("id","v_"+s);w&&n("td:eq("+(c-1)+") span",o[0]).css({"text-align":"right",width:p+"px"});nt[h]=t;h++}}),h>0)&&(b=n("<tr class='FormData' style='display:none'><td class='CaptionTD'><\/td><td colspan='"+(2*e-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='id' value='"+t+"'/><\/td><\/tr>"),b[0].rp=h+99,n(f).append(b)),nt}function it(t,i){var r,u,f,e,s=0;(e=n(i).jqGrid("getInd",t,!0))&&(n("td",e).each(function(t){r=i.p.colModel[t].name;u=(!i.p.colModel[t].editrules||!0!==i.p.colModel[t].editrules.edithidden)&&!0===i.p.colModel[t].hidden;"cb"!==r&&"subgrid"!==r&&"rn"!==r&&(f=r===i.p.ExpandColumn&&!0===i.p.treeGrid?n(this).text():n(this).html(),r=n.jgrid.jqID("v_"+r),n("#"+r+" span","#"+o).html(f),u&&n("#"+r,"#"+o).parents("tr:first").hide(),s++)}),s>0&&n("#id_g","#"+o).val(t))}function b(t,i){var r=i[1].length-1;0===t?n("#pData","#"+o+"_2").addClass(u.disabled):void 0!==i[1][t-1]&&n("#"+n.jgrid.jqID(i[1][t-1])).hasClass(u.disabled)?n("#pData",o+"_2").addClass(u.disabled):n("#pData","#"+o+"_2").removeClass(u.disabled);t===r?n("#nData","#"+o+"_2").addClass(u.disabled):void 0!==i[1][t+1]&&n("#"+n.jgrid.jqID(i[1][t+1])).hasClass(u.disabled)?n("#nData",o+"_2").addClass(u.disabled):n("#nData","#"+o+"_2").removeClass(u.disabled)}function k(){var t=n(e).jqGrid("getDataIDs"),i=n("#id_g","#"+o).val();return[n.inArray(i,t),t]}var e=this,p,nt,ot,tt;if(e.grid&&i){var h=e.p.id,s="ViewGrid_"+n.jgrid.jqID(h),o="ViewTbl_"+n.jgrid.jqID(h),rt="ViewGrid_"+h,ht="ViewTbl_"+h,c={themodal:"viewmod"+h,modalhead:"viewhd"+h,modalcontent:"viewcnt"+h,scrollelm:s},l=!0,d=1,g=0;t[e.p.id].styleUI=e.p.styleUI||"jQueryUI";r.recreateForm||n(e).data("viewProp")&&n.extend(t[n(this)[0].p.id],n(e).data("viewProp"));var ct=isNaN(t[n(this)[0].p.id].dataheight)?t[n(this)[0].p.id].dataheight:t[n(this)[0].p.id].dataheight+"px",lt=isNaN(t[n(this)[0].p.id].datawidth)?t[n(this)[0].p.id].datawidth:t[n(this)[0].p.id].datawidth+"px",a=n("<form name='FormPost' id='"+rt+"' class='FormGrid' style='width:"+lt+";height:"+ct+";'><\/form>"),v=n("<table id='"+ht+"' class='EditTable ViewTable'><tbody><\/tbody><\/table>");if(n(e.p.colModel).each(function(){var n=this.formoptions;d=Math.max(d,n?n.colpos||0:0);g=Math.max(g,n?n.rowpos||0:0)}),n(a).append(v),l=n(e).triggerHandler("jqGridViewRowBeforeInitData",[a]),void 0===l&&(l=!0),l&&n.isFunction(t[e.p.id].beforeInitData)&&(l=t[e.p.id].beforeInitData.call(e,a)),!1!==l){st(i,e,v,d);var y="rtl"===e.p.direction,at=y?"nData":"pData",vt=y?"pData":"nData",ut="<a id='"+at+"' class='fm-button "+u.button+"'><span class='"+u.icon_base+" "+f.icon_prev+"'><\/span><\/a>",ft="<a id='"+vt+"' class='fm-button "+u.button+"'><span class='"+u.icon_base+" "+f.icon_next+"'><\/span><\/a>",et="<a id='cData' class='fm-button "+u.button+"'>"+r.bClose+"<\/a>",yt=n.isArray(t[e.p.id].buttons)?n.jgrid.buildButtons(t[e.p.id].buttons,et,u):et;g>0&&(p=[],n.each(n(v)[0].rows,function(n,t){p[n]=t}),p.sort(function(n,t){return n.rp>t.rp?1:n.rp<t.rp?-1:0}),n.each(p,function(t,i){n("tbody",v).append(i)}));r.gbox="#gbox_"+n.jgrid.jqID(h);nt=n("<div><\/div>").append(a).append("<table border='0' class='EditTable' id='"+o+"_2'><tbody><tr id='Act_Buttons'><td class='navButton' width='"+r.labelswidth+"'>"+(y?ft+ut:ut+ft)+"<\/td><td class='EditButton'>"+yt+"<\/td><\/tr><\/tbody><\/table>");ot=n(".ui-jqgrid").css("font-size")||"11px";n.jgrid.createModal(c,nt,t[n(this)[0].p.id],"#gview_"+n.jgrid.jqID(e.p.id),n("#gview_"+n.jgrid.jqID(e.p.id))[0],null,{"font-size":ot});y&&(n("#pData, #nData","#"+o+"_2").css("float","right"),n(".EditButton","#"+o+"_2").css("text-align","left"));r.viewPagerButtons||n("#pData, #nData","#"+o+"_2").hide();nt=null;n("#"+c.themodal).keydown(function(i){if(27===i.which)return t[e.p.id].closeOnEscape&&n.jgrid.hideModal("#"+n.jgrid.jqID(c.themodal),{gb:r.gbox,jqm:r.jqModal,onClose:r.onClose,removemodal:t[e.p.id].removemodal,formprop:!t[e.p.id].recreateForm,form:t[e.p.id].form}),!1;if(!0===r.navkeys[0]){if(i.which===r.navkeys[1])return n("#pData","#"+o+"_2").trigger("click"),!1;if(i.which===r.navkeys[2])return n("#nData","#"+o+"_2").trigger("click"),!1}});r.closeicon=n.extend([!0,"left",f.icon_close],r.closeicon);!0===r.closeicon[0]&&n("#cData","#"+o+"_2").addClass("right"===r.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+u.icon_base+" "+r.closeicon[2]+"'><\/span>");n(e).triggerHandler("jqGridViewRowBeforeShowForm",[n("#"+s)]);n.isFunction(r.beforeShowForm)&&r.beforeShowForm.call(e,n("#"+s));n.jgrid.viewModal("#"+n.jgrid.jqID(c.themodal),{gbox:"#gbox_"+n.jgrid.jqID(h),jqm:r.jqModal,overlay:r.overlay,modal:r.modal,onHide:function(t){n(e).data("viewProp",{top:parseFloat(n(t.w).css("top")),left:parseFloat(n(t.w).css("left")),width:n(t.w).width(),height:n(t.w).height(),dataheight:n("#"+s).height(),datawidth:n("#"+s).width()});t.w.remove();t.o&&t.o.remove()}});n(".fm-button:not(."+u.disabled+")","#"+o+"_2").hover(function(){n(this).addClass(u.hover)},function(){n(this).removeClass(u.hover)});w();n("#cData","#"+o+"_2").click(function(){return n.jgrid.hideModal("#"+n.jgrid.jqID(c.themodal),{gb:"#gbox_"+n.jgrid.jqID(h),jqm:r.jqModal,onClose:r.onClose,removemodal:t[e.p.id].removemodal,formprop:!t[e.p.id].recreateForm,form:t[e.p.id].form}),!1});n("#"+o+"_2").find("[data-index]").each(function(){var i=parseInt(n(this).attr("data-index"),10);i>=0&&r.buttons[i].hasOwnProperty("click")&&n(this).on("click",function(u){r.buttons[i].click.call(e,n("#"+rt)[0],t[e.p.id],u)})});n("#nData","#"+o+"_2").click(function(){n("#FormError","#"+o).hide();var t=k();return t[0]=parseInt(t[0],10),-1!==t[0]&&t[1][t[0]+1]&&(n(e).triggerHandler("jqGridViewRowClickPgButtons",["next",n("#"+s),t[1][t[0]]]),n.isFunction(r.onclickPgButtons)&&r.onclickPgButtons.call(e,"next",n("#"+s),t[1][t[0]]),it(t[1][t[0]+1],e),n(e).jqGrid("setSelection",t[1][t[0]+1]),n(e).triggerHandler("jqGridViewRowAfterClickPgButtons",["next",n("#"+s),t[1][t[0]+1]]),n.isFunction(r.afterclickPgButtons)&&r.afterclickPgButtons.call(e,"next",n("#"+s),t[1][t[0]+1]),b(t[0]+1,t)),w(),!1});n("#pData","#"+o+"_2").click(function(){n("#FormError","#"+o).hide();var t=k();return-1!==t[0]&&t[1][t[0]-1]&&(n(e).triggerHandler("jqGridViewRowClickPgButtons",["prev",n("#"+s),t[1][t[0]]]),n.isFunction(r.onclickPgButtons)&&r.onclickPgButtons.call(e,"prev",n("#"+s),t[1][t[0]]),it(t[1][t[0]-1],e),n(e).jqGrid("setSelection",t[1][t[0]-1]),n(e).triggerHandler("jqGridViewRowAfterClickPgButtons",["prev",n("#"+s),t[1][t[0]-1]]),n.isFunction(r.afterclickPgButtons)&&r.afterclickPgButtons.call(e,"prev",n("#"+s),t[1][t[0]-1]),b(t[0]-1,t)),w(),!1});tt=k();b(tt[0],tt)}}})},delGridRow:function(i,r){var o=n.jgrid.getRegional(this[0],"del"),f=this[0].p.styleUI,e=n.jgrid.styleUI[f].formedit,u=n.jgrid.styleUI[f].common;return r=n.extend(!0,{top:0,left:0,width:240,height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:"",mtype:"POST",reloadAfterSubmit:!0,beforeShowForm:null,beforeInitData:null,afterShowForm:null,beforeSubmit:null,onclickSubmit:null,afterSubmit:null,jqModal:!0,closeOnEscape:!1,delData:{},delicon:[],cancelicon:[],onClose:null,ajaxDelOptions:{},processing:!1,serializeDelData:null,useDataProxy:!1},o,r||{}),t[n(this)[0].p.id]=r,this.each(function(){var f=this;if(f.grid&&i){var c,p,y,w,h=f.p.id,v={},s=!0,o="DelTbl_"+n.jgrid.jqID(h),b="DelTbl_"+h,l={themodal:"delmod"+h,modalhead:"delhd"+h,modalcontent:"delcnt"+h,scrollelm:o};if(t[f.p.id].styleUI=f.p.styleUI||"jQueryUI",n.isArray(i)&&(i=i.join()),void 0!==n("#"+n.jgrid.jqID(l.themodal))[0]){if(s=n(f).triggerHandler("jqGridDelRowBeforeInitData",[n("#"+o)]),void 0===s&&(s=!0),s&&n.isFunction(t[f.p.id].beforeInitData)&&(s=t[f.p.id].beforeInitData.call(f,n("#"+o))),!1===s)return;n("#DelData>td","#"+o).text(i);n("#DelError","#"+o).hide();!0===t[f.p.id].processing&&(t[f.p.id].processing=!1,n("#dData","#"+o).removeClass(u.active));n(f).triggerHandler("jqGridDelRowBeforeShowForm",[n("#"+o)]);n.isFunction(t[f.p.id].beforeShowForm)&&t[f.p.id].beforeShowForm.call(f,n("#"+o));n.jgrid.viewModal("#"+n.jgrid.jqID(l.themodal),{gbox:"#gbox_"+n.jgrid.jqID(h),jqm:t[f.p.id].jqModal,overlay:t[f.p.id].overlay,modal:t[f.p.id].modal});n(f).triggerHandler("jqGridDelRowAfterShowForm",[n("#"+o)]);n.isFunction(t[f.p.id].afterShowForm)&&t[f.p.id].afterShowForm.call(f,n("#"+o))}else{var g=isNaN(t[f.p.id].dataheight)?t[f.p.id].dataheight:t[f.p.id].dataheight+"px",nt=isNaN(r.datawidth)?r.datawidth:r.datawidth+"px",a="<div id='"+b+"' class='formdata' style='width:"+nt+";overflow:auto;position:relative;height:"+g+";'>";a+="<table class='DelTable'><tbody>";a+="<tr id='DelError' style='display:none'><td class='"+u.error+"'><\/td><\/tr>";a+="<tr id='DelData' style='display:none'><td >"+i+"<\/td><\/tr>";a+='<tr><td class="delmsg" style="white-space:pre;">'+t[f.p.id].msg+"<\/td><\/tr><tr><td >&#160;<\/td><\/tr>";a+="<\/tbody><\/table><\/div>";var k="<a id='dData' class='fm-button "+u.button+"'>"+r.bSubmit+"<\/a>",d="<a id='eData' class='fm-button "+u.button+"'>"+r.bCancel+"<\/a>",tt=n.isArray(t[f.p.id].buttons)?n.jgrid.buildButtons(t[f.p.id].buttons,k+d,u):k+d,it=n(".ui-jqgrid").css("font-size")||"11px";if(a+="<table class='EditTable ui-common-table' id='"+o+"_2'><tbody><tr><td><hr class='"+u.content+"' style='margin:1px'/><\/td><\/tr><tr><td class='DelButton EditButton'>"+tt+"<\/td><\/tr><\/tbody><\/table>",r.gbox="#gbox_"+n.jgrid.jqID(h),n.jgrid.createModal(l,a,t[f.p.id],"#gview_"+n.jgrid.jqID(f.p.id),n("#gview_"+n.jgrid.jqID(f.p.id))[0],null,{"font-size":it}),n(".fm-button","#"+o+"_2").hover(function(){n(this).addClass(u.hover)},function(){n(this).removeClass(u.hover)}),r.delicon=n.extend([!0,"left",e.icon_del],t[f.p.id].delicon),r.cancelicon=n.extend([!0,"left",e.icon_cancel],t[f.p.id].cancelicon),!0===r.delicon[0]&&n("#dData","#"+o+"_2").addClass("right"===r.delicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+u.icon_base+" "+r.delicon[2]+"'><\/span>"),!0===r.cancelicon[0]&&n("#eData","#"+o+"_2").addClass("right"===r.cancelicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+u.icon_base+" "+r.cancelicon[2]+"'><\/span>"),n("#dData","#"+o+"_2").click(function(){var b,i=[!0,""],e=n("#DelData>td","#"+o).text(),s,a;if(v={},v=n(f).triggerHandler("jqGridDelRowClickSubmit",[t[f.p.id],e]),void 0===v&&n.isFunction(t[f.p.id].onclickSubmit)&&(v=t[f.p.id].onclickSubmit.call(f,t[f.p.id],e)||{}),i=n(f).triggerHandler("jqGridDelRowBeforeSubmit",[e]),void 0===i&&(i=[!0,"",""]),i[0]&&n.isFunction(t[f.p.id].beforeSubmit)&&(i=t[f.p.id].beforeSubmit.call(f,e)),i[0]&&!t[f.p.id].processing){if(t[f.p.id].processing=!0,y=f.p.prmNames,c=n.extend({},t[f.p.id].delData,v),w=y.oper,c[w]=y.deloper,p=y.id,e=String(e).split(","),!e.length)return!1;for(b in e)e.hasOwnProperty(b)&&(e[b]=n.jgrid.stripPref(f.p.idPrefix,e[b]));c[p]=e.join();n(this).addClass(u.active);s=n.extend({url:t[f.p.id].url||n(f).jqGrid("getGridParam","editurl"),type:t[f.p.id].mtype,data:n.isFunction(t[f.p.id].serializeDelData)?t[f.p.id].serializeDelData.call(f,c):c,complete:function(s,a){var v,y;if(n("#dData","#"+o+"_2").removeClass(u.active),s.status>=300&&304!==s.status?(i[0]=!1,i[1]=n(f).triggerHandler("jqGridDelRowErrorTextFormat",[s]),n.isFunction(t[f.p.id].errorTextFormat)&&(i[1]=t[f.p.id].errorTextFormat.call(f,s)),void 0===i[1]&&(i[1]=a+" Status: '"+s.statusText+"'. Error code: "+s.status)):(i=n(f).triggerHandler("jqGridDelRowAfterSubmit",[s,c]),void 0===i&&(i=[!0,"",""]),i[0]&&n.isFunction(t[f.p.id].afterSubmit)&&(i=t[f.p.id].afterSubmit.call(f,s,c))),!1===i[0])n("#DelError>td","#"+o).html(i[1]),n("#DelError","#"+o).show();else{if(t[f.p.id].reloadAfterSubmit&&"local"!==f.p.datatype)n(f).trigger("reloadGrid");else{if(!0===f.p.treeGrid)try{n(f).jqGrid("delTreeNode",f.p.idPrefix+e[0])}catch(n){}else for(v=0;v<e.length;v++)n(f).jqGrid("delRowData",f.p.idPrefix+e[v]);f.p.selrow=null;f.p.selarrrow=[]}(n.isFunction(t[f.p.id].afterComplete)||n._data(n(f)[0],"events").hasOwnProperty("jqGridDelRowAfterComplete"))&&(y=s,setTimeout(function(){n(f).triggerHandler("jqGridDelRowAfterComplete",[y,c]);try{t[f.p.id].afterComplete.call(f,y,c)}catch(n){}},500))}t[f.p.id].processing=!1;i[0]&&n.jgrid.hideModal("#"+n.jgrid.jqID(l.themodal),{gb:"#gbox_"+n.jgrid.jqID(h),jqm:r.jqModal,onClose:t[f.p.id].onClose})}},n.jgrid.ajaxOptions,t[f.p.id].ajaxDelOptions);(s.url||t[f.p.id].useDataProxy||(n.isFunction(f.p.dataProxy)?t[f.p.id].useDataProxy=!0:(i[0]=!1,i[1]+=" "+n.jgrid.getRegional(f,"errors.nourl"))),i[0])&&(t[f.p.id].useDataProxy?(a=f.p.dataProxy.call(f,s,"del_"+f.p.id),void 0===a&&(a=[!0,""]),!1===a[0]?(i[0]=!1,i[1]=a[1]||"Error deleting the selected row!"):n.jgrid.hideModal("#"+n.jgrid.jqID(l.themodal),{gb:"#gbox_"+n.jgrid.jqID(h),jqm:r.jqModal,onClose:t[f.p.id].onClose})):"clientArray"===s.url?(c=s.data,s.complete({status:200,statusText:""},"")):n.ajax(s))}return!1===i[0]&&(n("#DelError>td","#"+o).html(i[1]),n("#DelError","#"+o).show()),!1}),n("#eData","#"+o+"_2").click(function(){return n.jgrid.hideModal("#"+n.jgrid.jqID(l.themodal),{gb:"#gbox_"+n.jgrid.jqID(h),jqm:t[f.p.id].jqModal,onClose:t[f.p.id].onClose}),!1}),n("#"+o+"_2").find("[data-index]").each(function(){var i=parseInt(n(this).attr("data-index"),10);i>=0&&r.buttons[i].hasOwnProperty("click")&&n(this).on("click",function(u){r.buttons[i].click.call(f,n("#"+b)[0],t[f.p.id],u)})}),s=n(f).triggerHandler("jqGridDelRowBeforeInitData",[n("#"+o)]),void 0===s&&(s=!0),s&&n.isFunction(t[f.p.id].beforeInitData)&&(s=t[f.p.id].beforeInitData.call(f,n("#"+o))),!1===s)return;n(f).triggerHandler("jqGridDelRowBeforeShowForm",[n("#"+o)]);n.isFunction(t[f.p.id].beforeShowForm)&&t[f.p.id].beforeShowForm.call(f,n("#"+o));n.jgrid.viewModal("#"+n.jgrid.jqID(l.themodal),{gbox:"#gbox_"+n.jgrid.jqID(h),jqm:t[f.p.id].jqModal,overlay:t[f.p.id].overlay,modal:t[f.p.id].modal});n(f).triggerHandler("jqGridDelRowAfterShowForm",[n("#"+o)]);n.isFunction(t[f.p.id].afterShowForm)&&t[f.p.id].afterShowForm.call(f,n("#"+o))}!0===t[f.p.id].closeOnEscape&&setTimeout(function(){n(".ui-jqdialog-titlebar-close","#"+n.jgrid.jqID(l.modalhead)).attr("tabindex","-1").focus()},0)}})},navGrid:function(t,i,r,u,f,e,o){var l=n.jgrid.getRegional(this[0],"nav"),c=this[0].p.styleUI,h=n.jgrid.styleUI[c].navigator,s=n.jgrid.styleUI[c].common;return i=n.extend({edit:!0,editicon:h.icon_edit_nav,add:!0,addicon:h.icon_add_nav,del:!0,delicon:h.icon_del_nav,search:!0,searchicon:h.icon_search_nav,refresh:!0,refreshicon:h.icon_refresh_nav,refreshstate:"firstpage",view:!1,viewicon:h.icon_view_nav,position:"left",closeOnEscape:!0,beforeRefresh:null,afterRefresh:null,cloneToTop:!1,alertwidth:200,alertheight:"auto",alerttop:null,alertleft:null,alertzIndex:null,dropmenu:!1,navButtonText:""},l,i||{}),this.each(function(){var g,it,h,b,a,rt,v,w,p,y,ut;if(!this.p.navGrid&&(b={themodal:"alertmod_"+this.p.id,modalhead:"alerthd_"+this.p.id,modalcontent:"alertcnt_"+this.p.id},a=this,a.grid&&"string"==typeof t)){(n(a).data("navGrid")||n(a).data("navGrid",i),h=n(a).data("navGrid"),a.p.force_regional&&(h=n.extend(h,l)),void 0===n("#"+b.themodal)[0])&&(h.alerttop||h.alertleft||(void 0!==window.innerWidth?(h.alertleft=window.innerWidth,h.alerttop=window.innerHeight):void 0!==document.documentElement&&void 0!==document.documentElement.clientWidth&&0!==document.documentElement.clientWidth?(h.alertleft=document.documentElement.clientWidth,h.alerttop=document.documentElement.clientHeight):(h.alertleft=1024,h.alerttop=768),h.alertleft=h.alertleft/2-parseInt(h.alertwidth,10)/2,h.alerttop=h.alerttop/2-25),rt=n(".ui-jqgrid").css("font-size")||"11px",n.jgrid.createModal(b,"<div>"+h.alerttext+"<\/div><span tabindex='0'><span tabindex='-1' id='jqg_alrt'><\/span><\/span>",{gbox:"#gbox_"+n.jgrid.jqID(a.p.id),jqModal:!0,drag:!0,resize:!0,caption:h.alertcap,top:h.alerttop,left:h.alertleft,width:h.alertwidth,height:h.alertheight,closeOnEscape:h.closeOnEscape,zIndex:h.alertzIndex,styleUI:a.p.styleUI},"#gview_"+n.jgrid.jqID(a.p.id),n("#gbox_"+n.jgrid.jqID(a.p.id))[0],!0,{"font-size":rt}));var nt,tt=1,k=function(){n(this).hasClass(s.disabled)||n(this).addClass(s.hover)},d=function(){n(this).removeClass(s.hover)};for(h.cloneToTop&&a.p.toppager&&(tt=2),nt=0;nt<tt;nt++)y=n("<table class='ui-pg-table navtable ui-common-table'><tbody><tr><\/tr><\/tbody><\/table>"),ut="<td class='ui-pg-button "+s.disabled+"' style='width:4px;'><span class='ui-separator'><\/span><\/td>",0===nt?(w=t,p=a.p.id,w===a.p.toppager&&(p+="_top",tt=1)):(w=a.p.toppager,p=a.p.id+"_top"),"rtl"===a.p.direction&&n(y).attr("dir","rtl").css("float","right"),u=u||{},h.add&&(v=n("<td class='ui-pg-button "+s.cornerall+"'><\/td>"),n(v).append("<div class='ui-pg-div'><span class='"+s.icon_base+" "+h.addicon+"'><\/span>"+h.addtext+"<\/div>"),n("tr",y).append(v),n(v,y).attr({title:h.addtitle||"",id:u.id||"add_"+p}).click(function(){return n(this).hasClass(s.disabled)||(n.isFunction(h.addfunc)?h.addfunc.call(a):n(a).jqGrid("editGridRow","new",u)),!1}).hover(k,d),v=null),r=r||{},h.edit&&(v=n("<td class='ui-pg-button "+s.cornerall+"'><\/td>"),n(v).append("<div class='ui-pg-div'><span class='"+s.icon_base+" "+h.editicon+"'><\/span>"+h.edittext+"<\/div>"),n("tr",y).append(v),n(v,y).attr({title:h.edittitle||"",id:r.id||"edit_"+p}).click(function(){if(!n(this).hasClass(s.disabled)){var t=a.p.selrow;t?n.isFunction(h.editfunc)?h.editfunc.call(a,t):n(a).jqGrid("editGridRow",t,r):(n.jgrid.viewModal("#"+b.themodal,{gbox:"#gbox_"+n.jgrid.jqID(a.p.id),jqm:!0}),n("#jqg_alrt").focus())}return!1}).hover(k,d),v=null),o=o||{},h.view&&(v=n("<td class='ui-pg-button "+s.cornerall+"'><\/td>"),n(v).append("<div class='ui-pg-div'><span class='"+s.icon_base+" "+h.viewicon+"'><\/span>"+h.viewtext+"<\/div>"),n("tr",y).append(v),n(v,y).attr({title:h.viewtitle||"",id:o.id||"view_"+p}).click(function(){if(!n(this).hasClass(s.disabled)){var t=a.p.selrow;t?n.isFunction(h.viewfunc)?h.viewfunc.call(a,t):n(a).jqGrid("viewGridRow",t,o):(n.jgrid.viewModal("#"+b.themodal,{gbox:"#gbox_"+n.jgrid.jqID(a.p.id),jqm:!0}),n("#jqg_alrt").focus())}return!1}).hover(k,d),v=null),f=f||{},h.del&&(v=n("<td class='ui-pg-button "+s.cornerall+"'><\/td>"),n(v).append("<div class='ui-pg-div'><span class='"+s.icon_base+" "+h.delicon+"'><\/span>"+h.deltext+"<\/div>"),n("tr",y).append(v),n(v,y).attr({title:h.deltitle||"",id:f.id||"del_"+p}).click(function(){if(!n(this).hasClass(s.disabled)){var t;a.p.multiselect?(t=a.p.selarrrow,0===t.length&&(t=null)):t=a.p.selrow;t?n.isFunction(h.delfunc)?h.delfunc.call(a,t):n(a).jqGrid("delGridRow",t,f):(n.jgrid.viewModal("#"+b.themodal,{gbox:"#gbox_"+n.jgrid.jqID(a.p.id),jqm:!0}),n("#jqg_alrt").focus())}return!1}).hover(k,d),v=null),(h.add||h.edit||h.del||h.view)&&n("tr",y).append(ut),e=e||{},h.search&&(v=n("<td class='ui-pg-button "+s.cornerall+"'><\/td>"),n(v).append("<div class='ui-pg-div'><span class='"+s.icon_base+" "+h.searchicon+"'><\/span>"+h.searchtext+"<\/div>"),n("tr",y).append(v),n(v,y).attr({title:h.searchtitle||"",id:e.id||"search_"+p}).click(function(){return n(this).hasClass(s.disabled)||(n.isFunction(h.searchfunc)?h.searchfunc.call(a,e):n(a).jqGrid("searchGrid",e)),!1}).hover(k,d),e.showOnLoad&&!0===e.showOnLoad&&n(v,y).click(),v=null),h.refresh&&(v=n("<td class='ui-pg-button "+s.cornerall+"'><\/td>"),n(v).append("<div class='ui-pg-div'><span class='"+s.icon_base+" "+h.refreshicon+"'><\/span>"+h.refreshtext+"<\/div>"),n("tr",y).append(v),n(v,y).attr({title:h.refreshtitle||"",id:"refresh_"+p}).click(function(){if(!n(this).hasClass(s.disabled)){n.isFunction(h.beforeRefresh)&&h.beforeRefresh.call(a);a.p.search=!1;a.p.resetsearch=!0;try{if("currentfilter"!==h.refreshstate){var t=a.p.id;a.p.postData.filters="";try{n("#fbox_"+n.jgrid.jqID(t)).jqFilter("resetFilter")}catch(n){}n.isFunction(a.clearToolbar)&&a.clearToolbar.call(a,!1)}}catch(n){}switch(h.refreshstate){case"firstpage":n(a).trigger("reloadGrid",[{page:1}]);break;case"current":case"currentfilter":n(a).trigger("reloadGrid",[{current:!0}])}n.isFunction(h.afterRefresh)&&h.afterRefresh.call(a)}return!1}).hover(k,d),v=null),it=n(".ui-jqgrid").css("font-size")||"11px",n("body").append("<div id='testpg2' class='ui-jqgrid "+n.jgrid.styleUI[c].base.entrieBox+"' style='font-size:"+it+";visibility:hidden;' ><\/div>"),g=n(y).clone().appendTo("#testpg2").width(),n("#testpg2").remove(),a.p._nvtd&&(h.dropmenu?(y=null,n(a).jqGrid("_buildNavMenu",w,p,i,r,u,f,e,o)):g>a.p._nvtd[0]?(a.p.responsive?(y=null,n(a).jqGrid("_buildNavMenu",w,p,i,r,u,f,e,o)):n(w+"_"+h.position,w).append(y).width(g),a.p._nvtd[0]=g):n(w+"_"+h.position,w).append(y),a.p._nvtd[1]=g),a.p.navGrid=!0;a.p.storeNavOptions&&(a.p.navOptions=h,a.p.editOptions=r,a.p.addOptions=u,a.p.delOptions=f,a.p.searchOptions=e,a.p.viewOptions=o,a.p.navButtons=[])}})},navButtonAdd:function(t,i){var r=this[0].p.styleUI,u=n.jgrid.styleUI[r].navigator;return i=n.extend({caption:"newButton",title:"",buttonicon:u.icon_newbutton_nav,onClickButton:null,position:"last",cursor:"pointer",internal:!1},i||{}),this.each(function(){var f;if(this.grid){"string"==typeof t&&0!==t.indexOf("#")&&(t="#"+n.jgrid.jqID(t));var u=n(".navtable",t)[0],e=this,o=n.jgrid.styleUI[r].common.disabled,s=n.jgrid.styleUI[r].common.hover,c=n.jgrid.styleUI[r].common.cornerall,a=n.jgrid.styleUI[r].common.icon_base;if(e.p.storeNavOptions&&!i.internal&&e.p.navButtons.push([t,i]),u){if(i.id&&void 0!==n("#"+n.jgrid.jqID(i.id),u)[0])return;f=n("<td><\/td>");"NONE"===i.buttonicon.toString().toUpperCase()?n(f).addClass("ui-pg-button "+c).append("<div class='ui-pg-div'>"+i.caption+"<\/div>"):n(f).addClass("ui-pg-button "+c).append("<div class='ui-pg-div'><span class='"+a+" "+i.buttonicon+"'><\/span>"+i.caption+"<\/div>");i.id&&n(f).attr("id",i.id);"first"===i.position?0===u.rows[0].cells.length?n("tr",u).append(f):n("tr td:eq(0)",u).before(f):n("tr",u).append(f);n(f,u).attr("title",i.title||"").click(function(t){return n(this).hasClass(o)||n.isFunction(i.onClickButton)&&i.onClickButton.call(e,t),!1}).hover(function(){n(this).hasClass(o)||n(this).addClass(s)},function(){n(this).removeClass(s)})}else if(u=n(".dropdownmenu",t)[0]){var h=n(u).val(),v=i.id||n.jgrid.randId(),l=n('<li class="ui-menu-item" role="presentation"><a class="'+c+' g-menu-item" tabindex="0" role="menuitem" id="'+v+'">'+(i.caption||i.title)+"<\/a><\/li>");h&&("first"===i.position?n("#"+h).prepend(l):n("#"+h).append(l),n(l).on("click",function(t){return n(this).hasClass(o)||(n("#"+h).hide(),n.isFunction(i.onClickButton)&&i.onClickButton.call(e,t)),!1}).find("a").hover(function(){n(this).hasClass(o)||n(this).addClass(s)},function(){n(this).removeClass(s)}))}}})},navSeparatorAdd:function(t,i){var u=this[0].p.styleUI,r=n.jgrid.styleUI[u].common;return i=n.extend({sepclass:"ui-separator",sepcontent:"",position:"last"},i||{}),this.each(function(){if(this.grid){"string"==typeof t&&0!==t.indexOf("#")&&(t="#"+n.jgrid.jqID(t));var f,e,u=n(".navtable",t)[0];this.p.storeNavOptions&&this.p.navButtons.push([t,i]);u?(f="<td class='ui-pg-button "+r.disabled+"' style='width:4px;'><span class='"+i.sepclass+"'><\/span>"+i.sepcontent+"<\/td>","first"===i.position?0===u.rows[0].cells.length?n("tr",u).append(f):n("tr td:eq(0)",u).before(f):n("tr",u).append(f)):(u=n(".dropdownmenu",t)[0],f="<li class='ui-menu-item "+r.disabled+"' style='width:100%' role='presentation'><hr class='ui-separator-li'><\/li>",u&&(e=n(u).val())&&("first"===i.position?n("#"+e).prepend(f):n("#"+e).append(f)))}})},_buildNavMenu:function(t,i,r,u,f,e,o,s){return this.each(function(){var h=this,y=n.jgrid.getRegional(h,"nav"),v=h.p.styleUI,p=(n.jgrid.styleUI[v].navigator,n.jgrid.styleUI[v].filter),c=n.jgrid.styleUI[v].common,l="form_menu_"+n.jgrid.randId(),w=r.navButtonText?r.navButtonText:y.selectcaption||"Actions",b="<button class='dropdownmenu "+c.button+"' value='"+l+"'>"+w+"<\/button>",a;n(t+"_"+r.position,t).append(b);a={themodal:"alertmod_"+this.p.id,modalhead:"alerthd_"+this.p.id,modalcontent:"alertcnt_"+this.p.id},function(){var y,v,w=n(".ui-jqgrid").css("font-size")||"11px",t=n('<ul id="'+l+'" class="ui-nav-menu modal-content" role="menu" tabindex="0" style="display:none;font-size:'+w+'"><\/ul>');r.add&&(f=f||{},y=f.id||"add_"+i,v=n('<li class="ui-menu-item" role="presentation"><a class="'+c.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+y+'">'+(r.addtext||r.addtitle)+"<\/a><\/li>").click(function(){return n(this).hasClass(c.disabled)||(n.isFunction(r.addfunc)?r.addfunc.call(h):n(h).jqGrid("editGridRow","new",f),n(t).hide()),!1}),n(t).append(v));r.edit&&(u=u||{},y=u.id||"edit_"+i,v=n('<li class="ui-menu-item" role="presentation"><a class="'+c.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+y+'">'+(r.edittext||r.edittitle)+"<\/a><\/li>").click(function(){if(!n(this).hasClass(c.disabled)){var i=h.p.selrow;i?n.isFunction(r.editfunc)?r.editfunc.call(h,i):n(h).jqGrid("editGridRow",i,u):(n.jgrid.viewModal("#"+a.themodal,{gbox:"#gbox_"+n.jgrid.jqID(h.p.id),jqm:!0}),n("#jqg_alrt").focus());n(t).hide()}return!1}),n(t).append(v));r.view&&(s=s||{},y=s.id||"view_"+i,v=n('<li class="ui-menu-item" role="presentation"><a class="'+c.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+y+'">'+(r.viewtext||r.viewtitle)+"<\/a><\/li>").click(function(){if(!n(this).hasClass(c.disabled)){var i=h.p.selrow;i?n.isFunction(r.editfunc)?r.viewfunc.call(h,i):n(h).jqGrid("viewGridRow",i,s):(n.jgrid.viewModal("#"+a.themodal,{gbox:"#gbox_"+n.jgrid.jqID(h.p.id),jqm:!0}),n("#jqg_alrt").focus());n(t).hide()}return!1}),n(t).append(v));r.del&&(e=e||{},y=e.id||"del_"+i,v=n('<li class="ui-menu-item" role="presentation"><a class="'+c.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+y+'">'+(r.deltext||r.deltitle)+"<\/a><\/li>").click(function(){if(!n(this).hasClass(c.disabled)){var i;h.p.multiselect?(i=h.p.selarrrow,0===i.length&&(i=null)):i=h.p.selrow;i?n.isFunction(r.delfunc)?r.delfunc.call(h,i):n(h).jqGrid("delGridRow",i,e):(n.jgrid.viewModal("#"+a.themodal,{gbox:"#gbox_"+n.jgrid.jqID(h.p.id),jqm:!0}),n("#jqg_alrt").focus());n(t).hide()}return!1}),n(t).append(v));(r.add||r.edit||r.del||r.view)&&n(t).append("<li class='ui-menu-item "+c.disabled+"' style='width:100%' role='presentation'><hr class='ui-separator-li'><\/li>");r.search&&(o=o||{},y=o.id||"search_"+i,v=n('<li class="ui-menu-item" role="presentation"><a class="'+c.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+y+'">'+(r.searchtext||r.searchtitle)+"<\/a><\/li>").click(function(){return n(this).hasClass(c.disabled)||(n.isFunction(r.searchfunc)?r.searchfunc.call(h,o):n(h).jqGrid("searchGrid",o),n(t).hide()),!1}),n(t).append(v),o.showOnLoad&&!0===o.showOnLoad&&n(v).click());r.refresh&&(y=o.id||"search_"+i,v=n('<li class="ui-menu-item" role="presentation"><a class="'+c.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+y+'">'+(r.refreshtext||r.refreshtitle)+"<\/a><\/li>").click(function(){if(!n(this).hasClass(c.disabled)){n.isFunction(r.beforeRefresh)&&r.beforeRefresh.call(h);h.p.search=!1;h.p.resetsearch=!0;try{if("currentfilter"!==r.refreshstate){var i=h.p.id;h.p.postData.filters="";try{n("#fbox_"+n.jgrid.jqID(i)).jqFilter("resetFilter")}catch(n){}n.isFunction(h.clearToolbar)&&h.clearToolbar.call(h,!1)}}catch(n){}switch(r.refreshstate){case"firstpage":n(h).trigger("reloadGrid",[{page:1}]);break;case"current":case"currentfilter":n(h).trigger("reloadGrid",[{current:!0}])}n.isFunction(r.afterRefresh)&&r.afterRefresh.call(h);n(t).hide()}return!1}),n(t).append(v));n(t).hide();n("body").append(t);n("#"+l).addClass("ui-menu "+p.menu_widget);n("#"+l+" > li > a").hover(function(){n(this).addClass(c.hover)},function(){n(this).removeClass(c.hover)})}();n(".dropdownmenu",t+"_"+r.position).on("click",function(t){var i=n(this).offset(),u=i.left,f=parseInt(i.top),r=n(this).val();n("#"+r).show().css({top:f-(n("#"+r).height()+10)+"px",left:u+"px"});t.stopPropagation()});n("body").on("click",function(t){n(t.target).hasClass("dropdownmenu")||n("#"+l).hide()})})},GridToForm:function(t,i){return this.each(function(){var r,f=this,u;if(f.grid&&(u=n(f).jqGrid("getRowData",t),u))for(r in u)u.hasOwnProperty(r)&&(n("[name="+n.jgrid.jqID(r)+"]",i).is("input:radio")||n("[name="+n.jgrid.jqID(r)+"]",i).is("input:checkbox")?n("[name="+n.jgrid.jqID(r)+"]",i).each(function(){n(this).val()==u[r]?n(this)[f.p.useProp?"prop":"attr"]("checked",!0):n(this)[f.p.useProp?"prop":"attr"]("checked",!1)}):n("[name="+n.jgrid.jqID(r)+"]",i).val(u[r]))})},FormToGrid:function(t,i,r,u){return this.each(function(){var e=this,o,f;e.grid&&(r||(r="set"),u||(u="first"),o=n(i).serializeArray(),f={},n.each(o,function(n,t){f[t.name]=t.value}),"add"===r?n(e).jqGrid("addRowData",t,f,u):"set"===r&&n(e).jqGrid("setRowData",t,f))})}})});!function(n){"use strict";"function"==typeof define&&define.amd?define(["jquery","./grid.base","./grid.common"],n):n(jQuery)}(function(n){"use strict";n.fn.jqFilter=function(t){var r,u,i;if("string"==typeof t){if(r=n.fn.jqFilter[t],!r)throw"jqFilter - No such method: "+t;return u=n.makeArray(arguments).slice(1),r.apply(this,u)}return i=n.extend(!0,{filter:null,columns:[],sortStrategy:null,onChange:null,afterRedraw:null,checkValues:null,error:!1,errmsg:"",errorcheck:!0,showQuery:!0,sopt:null,ops:[],operands:null,numopts:["eq","ne","lt","le","gt","ge","nu","nn","in","ni"],stropts:["eq","ne","bw","bn","ew","en","cn","nc","nu","nn","in","ni"],strarr:["text","string","blob"],groupOps:[{op:"AND",text:"AND"},{op:"OR",text:"OR"}],groupButton:!0,ruleButtons:!0,uniqueSearchFields:!1,direction:"ltr",addsubgrup:"Add subgroup",addrule:"Add rule",delgroup:"Delete group",delrule:"Delete rule",autoencode:!1},n.jgrid.filter,t||{}),this.each(function(){var f,t,e,o,h;if(!this.filter&&(this.p=i,null!==this.p.filter&&void 0!==this.p.filter||(this.p.filter={groupOp:this.p.groupOps[0].op,rules:[],groups:[]}),null!=this.p.sortStrategy&&n.isFunction(this.p.sortStrategy)&&this.p.columns.sort(this.p.sortStrategy),e=this.p.columns.length,o=/msie/i.test(navigator.userAgent)&&!window.opera,this.p.initFilter=n.extend(!0,{},this.p.filter),e)){for(f=0;f<e;f++)t=this.p.columns[f],t.stype?t.inputtype=t.stype:t.inputtype||(t.inputtype="text"),t.sorttype?t.searchtype=t.sorttype:t.searchtype||(t.searchtype="string"),void 0===t.hidden&&(t.hidden=!1),t.label||(t.label=t.name),t.index&&(t.name=t.index),t.hasOwnProperty("searchoptions")||(t.searchoptions={}),t.hasOwnProperty("searchrules")||(t.searchrules={}),t.inlist=void 0===t.search?!0:t.search;var s=function(){return n("#"+n.jgrid.jqID(i.id))[0]||null},c=s(),r=n.jgrid.styleUI[c.p.styleUI||"jQueryUI"].filter,u=n.jgrid.styleUI[c.p.styleUI||"jQueryUI"].common;this.p.showQuery&&n(this).append("<table class='queryresult "+r.table_widget+"' style='display:block;max-width:440px;border:0px none;' dir='"+this.p.direction+"'><tbody><tr><td class='query'><\/td><\/tr><\/tbody><\/table>");h=function(t,r){var u=[!0,""],f=s();if(n.isFunction(r.searchrules))u=r.searchrules.call(f,t,r);else if(n.jgrid&&n.jgrid.checkValues)try{u=n.jgrid.checkValues.call(f,t,-1,r.searchrules,r.label)}catch(n){}u&&u.length&&!1===u[0]&&(i.error=!u[0],i.errmsg=u[1])};this.onchange=function(){return this.p.error=!1,this.p.errmsg="",!!n.isFunction(this.p.onChange)&&this.p.onChange.call(this,this.p)};this.reDraw=function(){n("table.group:first",this).remove();var t=this.createTableForGroup(i.filter,null);n(this).append(t);n.isFunction(this.p.afterRedraw)&&this.p.afterRedraw.call(this,this.p)};this.createTableForGroup=function(t,f){var o,e=this,h=n("<table class='group "+r.table_widget+" ui-search-table' style='border:0px none;'><tbody><\/tbody><\/table>"),p="left",w,c,a,tt,b,v,l,k,d,y,it,g,s,nt,rt;if("rtl"===this.p.direction&&(p="right",h.attr("dir","rtl")),null===f&&h.append("<tr class='error' style='display:none;'><th colspan='5' class='"+u.error+"' align='"+p+"'><\/th><\/tr>"),w=n("<tr><\/tr>"),h.append(w),c=n("<th colspan='5' align='"+p+"'><\/th>"),w.append(c),!0===this.p.ruleButtons){for(a=n("<select size='1' class='opsel "+r.srSelect+"'><\/select>"),c.append(a),b="",o=0;o<i.groupOps.length;o++)tt=t.groupOp===e.p.groupOps[o].op?" selected='selected'":"",b+="<option value='"+e.p.groupOps[o].op+"'"+tt+">"+e.p.groupOps[o].text+"<\/option>";a.append(b).on("change",function(){t.groupOp=n(a).val();e.onchange()})}if(v="<span><\/span>",(this.p.groupButton&&(v=n("<input type='button' value='+ {}' title='"+e.p.subgroup+"' class='add-group "+u.button+"'/>"),v.on("click",function(){return void 0===t.groups&&(t.groups=[]),t.groups.push({groupOp:i.groupOps[0].op,rules:[],groups:[]}),e.reDraw(),e.onchange(),!1})),c.append(v),!0===this.p.ruleButtons)&&(k=n("<input type='button' value='+' title='"+e.p.addrule+"' class='add-rule ui-add "+u.button+"'/>"),k.on("click",function(){var i,r,u;for(void 0===t.rules&&(t.rules=[]),o=0;o<e.p.columns.length;o++)if(i=void 0===e.p.columns[o].search||e.p.columns[o].search,r=!0===e.p.columns[o].hidden,!0===e.p.columns[o].searchoptions.searchhidden&&i||i&&!r){l=e.p.columns[o];break}return l?(u=l.searchoptions.sopt?l.searchoptions.sopt:e.p.sopt?e.p.sopt:-1!==n.inArray(l.searchtype,e.p.strarr)?e.p.stropts:e.p.numopts,t.rules.push({field:l.name,op:u[0],data:""}),e.reDraw(),!1):!1}),c.append(k)),null!==f&&(d=n("<input type='button' value='-' title='"+e.p.delgroup+"' class='delete-group "+u.button+"'/>"),c.append(d),d.on("click",function(){for(o=0;o<f.groups.length;o++)if(f.groups[o]===t){f.groups.splice(o,1);break}return e.reDraw(),e.onchange(),!1})),void 0!==t.groups)for(o=0;o<t.groups.length;o++)y=n("<tr><\/tr>"),h.append(y),it=n("<td class='first'><\/td>"),y.append(it),g=n("<td colspan='4'><\/td>"),g.append(this.createTableForGroup(t.groups[o],t)),y.append(g);if(void 0===t.groupOp&&(t.groupOp=e.p.groupOps[0].op),nt=e.p.ruleButtons&&e.p.uniqueSearchFields,nt)for(s=0;s<e.p.columns.length;s++)e.p.columns[s].inlist&&(e.p.columns[s].search=!0);if(void 0!==t.rules)for(o=0;o<t.rules.length;o++)if(h.append(this.createTableRowForRule(t.rules[o],t)),nt)for(rt=t.rules[o].field,s=0;s<e.p.columns.length;s++)if(rt===e.p.columns[s].name){e.p.columns[s].search=!1;break}return h};this.createTableRowForRule=function(t,f){var c,v,l,h,d,e=this,y=s(),p=n("<tr><\/tr>"),g="",it,a,w,b,tt,rt,st,ut,k,nt,ft,et,ot;for(p.append("<td class='first'><\/td>"),it=n("<td class='columns'><\/td>"),p.append(it),w=n("<select size='1' class='"+r.srSelect+"'><\/select>"),b=[],it.append(w),w.on("change",function(){var u,f,i,s,p,k;for(e.p.ruleButtons&&e.p.uniqueSearchFields&&(u=parseInt(n(this).data("curr"),10),f=this.selectedIndex,u>=0&&(e.p.columns[u].search=!0,n(this).data("curr",f),e.p.columns[f].search=!1)),t.field=n(w).val(),l=n(this).parents("tr:first"),n(".data",l).empty(),c=0;c<e.p.columns.length;c++)if(e.p.columns[c].name===t.field){h=e.p.columns[c];break}if(h){for(h.searchoptions.id=n.jgrid.randId(),h.searchoptions.name=t.field,h.searchoptions.oper="filter",o&&"text"===h.inputtype&&(h.searchoptions.size||(h.searchoptions.size=10)),i=n.jgrid.createEl.call(y,h.inputtype,h.searchoptions,"",!0,e.p.ajaxSelectOptions||{},!0),n(i).addClass("input-elm "+r.srInput),v=h.searchoptions.sopt?h.searchoptions.sopt:e.p.sopt?e.p.sopt:-1!==n.inArray(h.searchtype,e.p.strarr)?e.p.stropts:e.p.numopts,s="",p=0,b=[],n.each(e.p.ops,function(){b.push(this.oper)}),c=0;c<v.length;c++)-1!==(a=n.inArray(v[c],b))&&(0===p&&(t.op=e.p.ops[a].oper),s+="<option value='"+e.p.ops[a].oper+"'>"+e.p.ops[a].text+"<\/option>",p++);(n(".selectopts",l).empty().append(s),n(".selectopts",l)[0].selectedIndex=0,n.jgrid.msie()&&n.jgrid.msiever()<9)&&(k=parseInt(n("select.selectopts",l)[0].offsetWidth,10)+1,n(".selectopts",l).width(k),n(".selectopts",l).css("width","auto"));n(".data",l).append(i);n.jgrid.bindEv.call(y,i,h.searchoptions);n(".input-elm",l).on("change",function(i){var r=i.target;t.data="custom"===h.inputtype&&n.isFunction(h.searchoptions.custom_value)?h.searchoptions.custom_value.call(y,n(".customelement",this),"get"):n(r).val();"select"===h.inputtype&&h.searchoptions.multiple&&(t.data=t.data.join(","));e.onchange()});setTimeout(function(){t.data=n(i).val();e.onchange()},0)}}),tt=0,c=0;c<e.p.columns.length;c++)rt=void 0===e.p.columns[c].search||e.p.columns[c].search,st=!0===e.p.columns[c].hidden,(!0===e.p.columns[c].searchoptions.searchhidden&&rt||rt&&!st)&&(d="",t.field===e.p.columns[c].name&&(d=" selected='selected'",tt=c),g+="<option value='"+e.p.columns[c].name+"'"+d+">"+e.p.columns[c].label+"<\/option>");for(w.append(g),w.data("curr",tt),ut=n("<td class='operators'><\/td>"),p.append(ut),h=i.columns[tt],h.searchoptions.id=n.jgrid.randId(),o&&"text"===h.inputtype&&(h.searchoptions.size||(h.searchoptions.size=10)),h.searchoptions.name=t.field,h.searchoptions.oper="filter",k=n.jgrid.createEl.call(y,h.inputtype,h.searchoptions,t.data,!0,e.p.ajaxSelectOptions||{},!0),"nu"!==t.op&&"nn"!==t.op||(n(k).attr("readonly","true"),n(k).attr("disabled","true")),nt=n("<select size='1' class='selectopts "+r.srSelect+"'><\/select>"),ut.append(nt),nt.on("change",function(){t.op=n(nt).val();l=n(this).parents("tr:first");var i=n(".input-elm",l)[0];"nu"===t.op||"nn"===t.op?(t.data="","SELECT"!==i.tagName.toUpperCase()&&(i.value=""),i.setAttribute("readonly","true"),i.setAttribute("disabled","true")):("SELECT"===i.tagName.toUpperCase()&&(t.data=i.value),i.removeAttribute("readonly"),i.removeAttribute("disabled"));e.onchange()}),v=h.searchoptions.sopt?h.searchoptions.sopt:e.p.sopt?e.p.sopt:-1!==n.inArray(h.searchtype,e.p.strarr)?e.p.stropts:e.p.numopts,g="",n.each(e.p.ops,function(){b.push(this.oper)}),c=0;c<v.length;c++)-1!==(a=n.inArray(v[c],b))&&(d=t.op===e.p.ops[a].oper?" selected='selected'":"",g+="<option value='"+e.p.ops[a].oper+"'"+d+">"+e.p.ops[a].text+"<\/option>");return nt.append(g),ft=n("<td class='data'><\/td>"),p.append(ft),ft.append(k),n.jgrid.bindEv.call(y,k,h.searchoptions),n(k).addClass("input-elm "+r.srInput).on("change",function(){t.data="custom"===h.inputtype?h.searchoptions.custom_value.call(y,n(".customelement",this),"get"):n(this).val();e.onchange()}),et=n("<td><\/td>"),(p.append(et),!0===this.p.ruleButtons)&&(ot=n("<input type='button' value='-' title='"+e.p.delrule+"' class='delete-rule ui-del "+u.button+"'/>"),et.append(ot),ot.on("click",function(){for(c=0;c<f.rules.length;c++)if(f.rules[c]===t){f.rules.splice(c,1);break}return e.reDraw(),e.onchange(),!1})),p};this.getStringForGroup=function(n){var i,t="(";if(void 0!==n.groups)for(i=0;i<n.groups.length;i++){t.length>1&&(t+=" "+n.groupOp+" ");try{t+=this.getStringForGroup(n.groups[i])}catch(n){alert(n)}}if(void 0!==n.rules)try{for(i=0;i<n.rules.length;i++)t.length>1&&(t+=" "+n.groupOp+" "),t+=this.getStringForRule(n.rules[i])}catch(n){alert(n)}return t+=")","()"===t?"":t};this.getStringForRule=function(t){for(var e,f,o="",r="",u=0;u<this.p.ops.length;u++)if(this.p.ops[u].oper===t.op){o=this.p.operands.hasOwnProperty(t.op)?this.p.operands[t.op]:"";r=this.p.ops[u].oper;break}for(u=0;u<this.p.columns.length;u++)if(this.p.columns[u].name===t.field){e=this.p.columns[u];break}return void 0===e?"":(f=this.p.autoencode?n.jgrid.htmlEncode(t.data):t.data,"bw"!==r&&"bn"!==r||(f+="%"),"ew"!==r&&"en"!==r||(f="%"+f),"cn"!==r&&"nc"!==r||(f="%"+f+"%"),"in"!==r&&"ni"!==r||(f=" ("+f+")"),i.errorcheck&&h(t.data,e),-1!==n.inArray(e.searchtype,["int","integer","float","number","currency"])||"nn"===r||"nu"===r?t.field+" "+o+" "+f:t.field+" "+o+' "'+f+'"')};this.resetFilter=function(){this.p.filter=n.extend(!0,{},this.p.initFilter);this.reDraw();this.onchange()};this.hideError=function(){n("th."+u.error,this).html("");n("tr.error",this).hide()};this.showError=function(){n("th."+u.error,this).html(this.p.errmsg);n("tr.error",this).show()};this.toUserFriendlyString=function(){return this.getStringForGroup(i.filter)};this.toString=function(){function i(t){if(n.p.errorcheck){for(var r,i=0;i<n.p.columns.length;i++)if(n.p.columns[i].name===t.field){r=n.p.columns[i];break}r&&h(t.data,r)}return t.op+"(item."+t.field+",'"+t.data+"')"}function t(n){var u,r="(";if(void 0!==n.groups)for(u=0;u<n.groups.length;u++)r.length>1&&(r+="OR"===n.groupOp?" || ":" && "),r+=t(n.groups[u]);if(void 0!==n.rules)for(u=0;u<n.rules.length;u++)r.length>1&&(r+="OR"===n.groupOp?" || ":" && "),r+=i(n.rules[u]);return r+=")","()"===r?"":r}var n=this;return t(this.p.filter)};this.reDraw();this.p.showQuery&&this.onchange();this.filter=!0}})};n.extend(n.fn.jqFilter,{toSQLString:function(){var n="";return this.each(function(){n=this.toUserFriendlyString()}),n},filterData:function(){var n;return this.each(function(){n=this.p.filter}),n},getParameter:function(n){var t=null;return void 0!==n&&this.each(function(i,r){r.p.hasOwnProperty(n)&&(t=r.p[n])}),t||this[0].p},resetFilter:function(){return this.each(function(){this.resetFilter()})},addFilter:function(t){"string"==typeof t&&(t=n.jgrid.parse(t));this.each(function(){this.p.filter=t;this.reDraw();this.onchange()})}});n.extend(n.jgrid,{filterRefactor:function(t){var e,r,u,f,o,i={};try{if(i="string"==typeof t.ruleGroudp?n.jgrid.parse(t.ruleGroup):t.ruleGroup,i.rules&&i.rules.length)for(e=i.rules,r=0;r<e.length;r++)u=e[r],n.inArray(u.filed,t.ssfield)&&(f=u.data.split(t.splitSelect),f.length>1&&(void 0===i.groups&&(i.groups=[]),o={groupOp:t.groupOpSelect,groups:[],rules:[]},i.groups.push(o),n.each(f,function(n){f[n]&&o.rules.push({data:f[n],op:u.op,field:u.field})}),e.splice(r,1),r--))}catch(n){}return i}});n.jgrid.extend({filterToolbar:function(t){var i=n.jgrid.getRegional(this[0],"search");return t=n.extend({autosearch:!0,autosearchDelay:500,searchOnEnter:!0,beforeSearch:null,afterSearch:null,beforeClear:null,afterClear:null,onClearSearchValue:null,url:"",stringResult:!1,groupOp:"AND",defaultSearch:"bw",searchOperators:!1,resetIcon:"x",splitSelect:",",groupOpSelect:"OR",errorcheck:!0,operands:{eq:"==",ne:"!",lt:"<",le:"<=",gt:">",ge:">=",bw:"^",bn:"!^","in":"=",ni:"!=",ew:"|",en:"!@",cn:"~",nc:"!~",nu:"#",nn:"!#",bt:"..."}},i,t||{}),this.each(function(){var r=this;if(!r.p.filterToolbar){n(r).data("filterToolbar")||n(r).data("filterToolbar",t);r.p.force_regional&&(t=n.extend(t,i));var h,u,f,c=n.jgrid.styleUI[r.p.styleUI||"jQueryUI"].filter,o=n.jgrid.styleUI[r.p.styleUI||"jQueryUI"].common,l=n.jgrid.styleUI[r.p.styleUI||"jQueryUI"].base,e=function(){var i,h,c,o,p={},tt=0,it={},w=!1,rt=[],b=!1,e=[!0,"",""],k=!1,ut,u,d,f,a,s,et,v,l,g,nt,y,ft;if(n.each(r.p.colModel,function(){var u=n("#gs_"+r.p.idPrefix+n.jgrid.jqID(this.name),!0===this.frozen&&!0===r.p.frozenColumns?r.grid.fhDiv:r.grid.hDiv);if(h=this.index||this.name,o=this.searchoptions||{},c=t.searchOperators&&o.searchOperMenu?u.parent().prev().children("a").attr("soper")||t.defaultSearch:o.sopt?o.sopt[0]:"select"===this.stype?"eq":t.defaultSearch,i="custom"===this.stype&&n.isFunction(o.custom_value)&&u.length>0?o.custom_value.call(r,u,"get"):u.val(),"select"===this.stype&&o.multiple&&n.isArray(i)&&i.length&&(w=!0,rt.push(h),i=1===i.length?i[0]:i),this.searchrules&&t.errorcheck&&(n.isFunction(this.searchrules)?e=this.searchrules.call(r,i,this):n.jgrid&&n.jgrid.checkValues&&(e=n.jgrid.checkValues.call(r,i,-1,this.searchrules,this.label||this.name)),e&&e.length&&!1===e[0]))return this.searchrules.hasOwnProperty("validationError")&&(k=this.searchrules.validationError),!1;if("bt"===c&&(b=!0),i||"nu"===c||"nn"===c)p[h]=i,it[h]=c,tt++;else try{delete r.p.postData[h]}catch(n){}}),!1!==e[0]){if(ut=tt>0,!0===t.stringResult||"local"===r.p.datatype||!0===t.searchOperators){if(u='{"groupOp":"'+t.groupOp+'","rules":[',d=0,n.each(p,function(n,t){d>0&&(u+=",");u+='{"field":"'+n+'",';u+='"op":"'+it[n]+'",';t+="";u+='"data":"'+t.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}';d++}),u+="]}",w&&n.jgrid.filterRefactor({ruleGroup:u,ssfield:rt,splitSelect:t.splitSelect,groupOpSelect:t.groupOpSelect}),b&&(n.isPlainObject(f)||(f=n.jgrid.parse(u)),f.rules&&f.rules.length))for(a=f.rules,s=0;s<a.length;s++)v=a[s],"bt"===v.op&&(l=v.data.split("..."),l.length>1&&(void 0===f.groups&&(f.groups=[]),g={groupOp:"AND",groups:[],rules:[]},f.groups.push(g),n.each(l,function(n){var t=0===n?"ge":"le";(et=l[n])&&g.rules.push({data:l[n],op:t,field:v.field})}),a.splice(s,1),s--));(b||w)&&(u=JSON.stringify(f));n.extend(r.p.postData,{filters:u});n.each(["searchField","searchString","searchOper"],function(n,t){r.p.postData.hasOwnProperty(t)&&delete r.p.postData[t]})}else n.extend(r.p.postData,p);t.url&&(nt=r.p.url,n(r).jqGrid("setGridParam",{url:t.url}));y="stop"===n(r).triggerHandler("jqGridToolbarBeforeSearch");!y&&n.isFunction(t.beforeSearch)&&(y=t.beforeSearch.call(r));y||n(r).jqGrid("setGridParam",{search:ut}).trigger("reloadGrid",[{page:1}]);nt&&n(r).jqGrid("setGridParam",{url:nt});n(r).triggerHandler("jqGridToolbarAfterSearch");n.isFunction(t.afterSearch)&&t.afterSearch.call(r)}else n.isFunction(k)?k.call(r,e[1]):(ft=n.jgrid.getRegional(r,"errors"),n.jgrid.info_dialog(ft.errcap,e[1],"",{styleUI:r.p.styleUI}))},a=function(i){var f,e={},s=0,l,u,h,c,o;i="boolean"!=typeof i||i;n.each(r.p.colModel,function(){var t,i=n("#gs_"+r.p.idPrefix+n.jgrid.jqID(this.name),!0===this.frozen&&!0===r.p.frozenColumns?r.grid.fhDiv:r.grid.hDiv);switch(this.searchoptions&&void 0!==this.searchoptions.defaultValue&&(t=this.searchoptions.defaultValue),f=this.index||this.name,this.stype){case"select":if(i.find("option").each(function(i){if(0===i&&(this.selected=!0),n(this).val()===t)return this.selected=!0,!1}),void 0!==t)e[f]=t,s++;else try{delete r.p.postData[f]}catch(n){}break;case"text":if(i.val(t||""),void 0!==t)e[f]=t,s++;else try{delete r.p.postData[f]}catch(n){}break;case"custom":n.isFunction(this.searchoptions.custom_value)&&i.length>0&&this.searchoptions.custom_value.call(r,i,"set",t||"")}});l=s>0;(r.p.resetsearch=!0,!0===t.stringResult||"local"===r.p.datatype)?(u='{"groupOp":"'+t.groupOp+'","rules":[',h=0,n.each(e,function(n,t){h>0&&(u+=",");u+='{"field":"'+n+'",';u+='"op":"eq",';t+="";u+='"data":"'+t.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}';h++}),u+="]}",n.extend(r.p.postData,{filters:u}),n.each(["searchField","searchString","searchOper"],function(n,t){r.p.postData.hasOwnProperty(t)&&delete r.p.postData[t]})):n.extend(r.p.postData,e);t.url&&(c=r.p.url,n(r).jqGrid("setGridParam",{url:t.url}));o="stop"===n(r).triggerHandler("jqGridToolbarBeforeClear");!o&&n.isFunction(t.beforeClear)&&(o=t.beforeClear.call(r));o||i&&n(r).jqGrid("setGridParam",{search:l}).trigger("reloadGrid",[{page:1}]);c&&n(r).jqGrid("setGridParam",{url:c});n(r).triggerHandler("jqGridToolbarAfterClear");n.isFunction(t.afterClear)&&t.afterClear()},v=function(){var t=n("tr.ui-search-toolbar",r.grid.hDiv);!0===r.p.frozenColumns&&n(r).jqGrid("destroyFrozenColumns");"none"===t.css("display")?t.show():t.hide();!0===r.p.frozenColumns&&n(r).jqGrid("setFrozenColumns")},y=function(i,u,f){var v,l;n("#sopt_menu").remove();u=parseInt(u,10);f=parseInt(f,10)+18;for(var y,h,w=n(".ui-jqgrid").css("font-size")||"11px",a='<ul id="sopt_menu" class="ui-search-menu modal-content" role="menu" tabindex="0" style="font-size:'+w+";left:"+u+"px;top:"+f+'px;">',b=n(i).attr("soper"),p=[],s=0,k=n(i).attr("colname"),d=r.p.colModel.length;s<d&&r.p.colModel[s].name!==k;)s++;for(v=r.p.colModel[s],l=n.extend({},v.searchoptions),l.sopt||(l.sopt=[],l.sopt[0]="select"===v.stype?"eq":t.defaultSearch),n.each(t.odata,function(){p.push(this.oper)}),s=0;s<l.sopt.length;s++)-1!==(h=n.inArray(l.sopt[s],p))&&(y=b===t.odata[h].oper?o.highlight:"",a+='<li class="ui-menu-item '+y+'" role="presentation"><a class="'+o.cornerall+' g-menu-item" tabindex="0" role="menuitem" value="'+t.odata[h].oper+'" oper="'+t.operands[t.odata[h].oper]+'"><table class="ui-common-table"><tr><td width="25px">'+t.operands[t.odata[h].oper]+"<\/td><td>"+t.odata[h].text+"<\/td><\/tr><\/table><\/a><\/li>");a+="<\/ul>";n("body").append(a);n("#sopt_menu").addClass("ui-menu "+c.menu_widget);n("#sopt_menu > li > a").hover(function(){n(this).addClass(o.hover)},function(){n(this).removeClass(o.hover)}).click(function(){var u=n(this).attr("value"),f=n(this).attr("oper"),o;(n(r).triggerHandler("jqGridToolbarSelectOper",[u,f,i]),n("#sopt_menu").hide(),n(i).text(f).attr("soper",u),!0===t.autosearch)&&(o=n(i).parent().next().children()[0],(n(o).val()||"nu"===u||"nn"===u)&&e())})},s=n("<tr class='ui-search-toolbar' role='row'><\/tr>");t.restoreFromFilters&&(f=r.p.postData.filters)&&("string"==typeof f&&(f=n.jgrid.parse(f)),u=!!f.rules.length&&f.rules);n.each(r.p.colModel,function(i){var f,p,w,nt,tt,b,k,a,o=this,d="",it="=",g=n("<th role='columnheader' class='"+l.headerBox+" ui-th-"+r.p.direction+"' id='gsh_"+r.p.id+"_"+o.name+"' ><\/th>"),rt=n("<div><\/div>"),v=n("<table class='ui-search-table' cellspacing='0'><tr><td class='ui-search-oper' headers=''><\/td><td class='ui-search-input' headers=''><\/td><td class='ui-search-clear' headers=''><\/td><\/tr><\/table>"),y,ut;if(!0===this.hidden&&n(g).css("display","none"),this.search=!1!==this.search,void 0===this.stype&&(this.stype="text"),this.searchoptions=this.searchoptions||{},void 0===this.searchoptions.searchOperMenu&&(this.searchoptions.searchOperMenu=!0),f=n.extend({},this.searchoptions,{name:o.index||o.name,id:"gs_"+r.p.idPrefix+o.name,oper:"search"}),this.search){if(t.restoreFromFilters&&u)for(a=!1,y=0;y<u.length;y++)if(u[y].field&&(ut=o.index||o.name,ut===u[y].field)){a=u[y];break}if(t.searchOperators){for(p=f.sopt?f.sopt[0]:"select"===o.stype?"eq":t.defaultSearch,t.restoreFromFilters&&a&&(p=a.op),w=0;w<t.odata.length;w++)if(t.odata[w].oper===p){it=t.operands[p]||"";break}nt=null!=f.searchtitle?f.searchtitle:t.operandTitle;d=this.searchoptions.searchOperMenu?"<a title='"+nt+"' style='padding-right: 0.5em;' soper='"+p+"' class='soptclass' colname='"+this.name+"'>"+it+"<\/a>":""}switch(n("td:eq(0)",v).attr("colindex",i).append(d),void 0===f.clearSearch&&(f.clearSearch=!0),f.clearSearch?(tt=t.resetTitle||"Clear Search Value",n("td:eq(2)",v).append("<a title='"+tt+"' style='padding-right: 0.3em;padding-left: 0.3em;' class='clearsearchclass'>"+t.resetIcon+"<\/a>")):n("td:eq(2)",v).hide(),this.surl&&(f.dataUrl=this.surl),b="",f.defaultValue&&(b=n.isFunction(f.defaultValue)?f.defaultValue.call(r):f.defaultValue),t.restoreFromFilters&&a&&(b=a.data),k=n.jgrid.createEl.call(r,this.stype,f,b,!1,n.extend({},n.jgrid.ajaxOptions,r.p.ajaxSelectOptions||{})),n(k).addClass(c.srInput),n("td:eq(1)",v).append(k),n(rt).append(v),null==f.dataEvents&&(f.dataEvents=[]),this.stype){case"select":!0===t.autosearch&&f.dataEvents.push({type:"change",fn:function(){return e(),!1}});break;case"text":!0===t.autosearch&&(t.searchOnEnter?f.dataEvents.push({type:"keypress",fn:function(n){return 13===(n.charCode||n.keyCode||0)?(e(),!1):this}}):f.dataEvents.push({type:"keydown",fn:function(n){switch(n.which){case 13:return!1;case 9:case 16:case 37:case 38:case 39:case 40:case 27:break;default:h&&clearTimeout(h);h=setTimeout(function(){e()},t.autosearchDelay)}}}))}n.jgrid.bindEv.call(r,k,f)}n(g).append(rt);n(s).append(g);t.searchOperators&&""!==d||n("td:eq(0)",v).hide()});n("table thead",r.grid.hDiv).append(s);t.searchOperators&&(n(".soptclass",s).click(function(t){var i=n(this).offset(),r=i.left,u=i.top;y(this,r,u);t.stopPropagation()}),n("body").on("click",function(t){"soptclass"!==t.target.className&&n("#sopt_menu").remove()}));n(".clearsearchclass",s).click(function(){var i,s=n(this).parents("tr:first"),f=parseInt(n("td.ui-search-oper",s).attr("colindex"),10),o=n.extend({},r.p.colModel[f].searchoptions||{}),u=o.defaultValue?o.defaultValue:"";"select"===r.p.colModel[f].stype?(i=n("td.ui-search-input select",s),u?i.val(u):i[0].selectedIndex=0):(i=n("td.ui-search-input input",s),i.val(u));n(r).triggerHandler("jqGridToolbarClearVal",[i[0],f,o,u]);n.isFunction(t.onClearSearchValue)&&t.onClearSearchValue.call(r,i[0],f,o,u);!0===t.autosearch&&e()});this.p.filterToolbar=!0;this.triggerToolbar=e;this.clearToolbar=a;this.toggleToolbar=v}})},destroyFilterToolbar:function(){return this.each(function(){this.p.filterToolbar&&(this.triggerToolbar=null,this.clearToolbar=null,this.toggleToolbar=null,this.p.filterToolbar=!1,n(this.grid.hDiv).find("table thead tr.ui-search-toolbar").remove())})},refreshFilterToolbar:function(t){return t=n.extend(!0,{filters:"",onClearVal:null,onSetVal:null},t||{}),this.each(function(){function l(s){if(s&&s.rules){for(h=s.rules,c=h.length,i=0;i<c;i++)o=h[i],-1!==(e=n.inArray(o.field,a))&&(r=n("#gs_"+f.p.idPrefix+n.jgrid.jqID(u[e].name)),r.length>0&&("select"===u[e].stype?r.find("option[value='"+n.jgrid.jqID(o.data)+"']").prop("selected",!0):"text"===u[e].stype&&r.val(o.data),n.isFunction(t.onSetVal)&&t.onSetVal.call(f,r,u[e].name)));if(s.groups)for(var v=0;v<s.groups.length;v++)l(s.groups[v])}}var i,r,s,h,o,e,f=this,u=f.p.colModel,c=f.p.colModel.length,a=[];if(f.p.filterToolbar){for(i=0;i<c;i++){switch(a.push(u[i].name),r=n("#gs_"+f.p.idPrefix+n.jgrid.jqID(u[i].name)),u[i].stype){case"select":case"text":r.val("")}n.isFunction(t.onClearVal)&&t.onClearVal.call(f,r,u[i].name)}"string"==typeof t.filters&&t.filters.length&&(s=n.jgrid.parse(t.filters));n.isPlainObject(s)&&l(s)}})},searchGrid:function(t){var i=n.jgrid.getRegional(this[0],"search");return t=n.extend(!0,{recreateFilter:!1,drag:!0,sField:"searchField",sValue:"searchString",sOper:"searchOper",sFilter:"filters",loadDefaults:!0,beforeShowSearch:null,afterShowSearch:null,onInitializeSearch:null,afterRedraw:null,afterChange:null,sortStrategy:null,closeAfterSearch:!1,closeAfterReset:!1,closeOnEscape:!1,searchOnEnter:!1,multipleSearch:!1,multipleGroup:!1,top:0,left:0,jqModal:!0,modal:!1,resize:!0,width:450,height:"auto",dataheight:"auto",showQuery:!1,errorcheck:!0,sopt:null,stringResult:void 0,onClose:null,onSearch:null,onReset:null,toTop:!0,overlay:30,columns:[],tmplNames:null,tmplFilters:null,tmplLabel:" Template: ",showOnLoad:!1,layer:null,splitSelect:",",groupOpSelect:"OR",operands:{eq:"=",ne:"<>",lt:"<",le:"<=",gt:">",ge:">=",bw:"LIKE",bn:"NOT LIKE","in":"IN",ni:"NOT IN",ew:"LIKE",en:"NOT LIKE",cn:"LIKE",nc:"NOT LIKE",nu:"IS NULL",nn:"ISNOT NULL"},buttons:[]},i,t||{}),this.each(function(){function g(r){l=n(i).triggerHandler("jqGridFilterBeforeShow",[r]);void 0===l&&(l=!0);l&&n.isFunction(t.beforeShowSearch)&&(l=t.beforeShowSearch.call(i,r));l&&(n.jgrid.viewModal("#"+n.jgrid.jqID(o.themodal),{gbox:"#gbox_"+n.jgrid.jqID(i.p.id),jqm:t.jqModal,modal:t.modal,overlay:t.overlay,toTop:t.toTop}),n(i).triggerHandler("jqGridFilterAfterShow",[r]),n.isFunction(t.afterShowSearch)&&t.afterShowSearch.call(i,r))}var i=this,ft,b,k;if(i.grid){var e,r="fbox_"+i.p.id,l=!0,u=!0,o={themodal:"searchmod"+r,modalhead:"searchhd"+r,modalcontent:"searchcnt"+r,scrollelm:r},c=n.isPlainObject(i.p_savedFilter)&&!n.isEmptyObject(i.p_savedFilter)?i.p_savedFilter:i.p.postData[t.sFilter],p=n.jgrid.styleUI[i.p.styleUI||"jQueryUI"].filter,f=n.jgrid.styleUI[i.p.styleUI||"jQueryUI"].common;if(t.styleUI=i.p.styleUI,"string"==typeof c&&(c=n.jgrid.parse(c)),!0===t.recreateFilter&&n("#"+n.jgrid.jqID(o.themodal)).remove(),void 0!==n("#"+n.jgrid.jqID(o.themodal))[0])g(n("#fbox_"+n.jgrid.jqID(i.p.id)));else{var s=n("<div><div id='"+r+"' class='searchFilter' style='overflow:auto'><\/div><\/div>").insertBefore("#gview_"+n.jgrid.jqID(i.p.id)),nt="left",tt="";"rtl"===i.p.direction&&(nt="right",tt=" style='text-align:left'",s.attr("dir","rtl"));var w,it,h=n.extend([],i.p.colModel),et="<a id='"+r+"_search' class='fm-button "+f.button+" fm-button-icon-right ui-search'><span class='"+f.icon_base+" "+p.icon_search+"'><\/span>"+t.Find+"<\/a>",ot="<a id='"+r+"_reset' class='fm-button "+f.button+" fm-button-icon-left ui-reset'><span class='"+f.icon_base+" "+p.icon_reset+"'><\/span>"+t.Reset+"<\/a>",d="",a="",v=!1,y=-1,rt=!1,ut=[];t.showQuery&&(d="<a id='"+r+"_query' class='fm-button "+f.button+" fm-button-icon-left'><span class='"+f.icon_base+" "+p.icon_query+"'><\/span>Query<\/a>");ft=n.jgrid.buildButtons(t.buttons,d+et,f);(t.columns.length?(h=t.columns,y=0,w=h[0].index||h[0].name):n.each(h,function(n,t){if(t.label||(t.label=i.p.colNames[n]),!v){var r=void 0===t.search||t.search,u=!0===t.hidden;(t.searchoptions&&!0===t.searchoptions.searchhidden&&r||r&&!u)&&(v=!0,w=t.index||t.name,y=n)}"select"===t.stype&&t.searchoptions&&t.searchoptions.multiple&&(rt=!0,ut.push(t.index||t.name))}),!c&&w||!1===t.multipleSearch)&&(b="eq",y>=0&&h[y].searchoptions&&h[y].searchoptions.sopt?b=h[y].searchoptions.sopt[0]:t.sopt&&t.sopt.length&&(b=t.sopt[0]),c={groupOp:"AND",rules:[{field:w,op:b,data:""}]});v=!1;t.tmplNames&&t.tmplNames.length&&(v=!0,a="<tr><td class='ui-search-label'>"+t.tmplLabel+"<\/td>",a+="<td><select size='1' class='ui-template "+p.srSelect+"'>",a+="<option value='default'>Default<\/option>",n.each(t.tmplNames,function(n,t){a+="<option value='"+n+"'>"+t+"<\/option>"}),a+="<\/select><\/td><\/tr>");it="<table class='EditTable' style='border:0px none;margin-top:5px' id='"+r+"_2'><tbody><tr><td colspan='2'><hr class='"+f.content+"' style='margin:1px'/><\/td><\/tr>"+a+"<tr><td class='EditButton' style='text-align:"+nt+"'>"+ot+"<\/td><td class='EditButton' "+tt+">"+ft+"<\/td><\/tr><\/tbody><\/table>";r=n.jgrid.jqID(r);n("#"+r).jqFilter({columns:h,sortStrategy:t.sortStrategy,filter:t.loadDefaults?c:null,showQuery:t.showQuery,errorcheck:t.errorcheck,sopt:t.sopt,groupButton:t.multipleGroup,ruleButtons:t.multipleSearch,uniqueSearchFields:t.uniqueSearchFields,afterRedraw:t.afterRedraw,ops:t.odata,operands:t.operands,ajaxSelectOptions:i.p.ajaxSelectOptions,groupOps:t.groupOps,addsubgrup:t.addsubgrup,addrule:t.addrule,delgroup:t.delgroup,delrule:t.delrule,autoencode:i.p.autoencode,onChange:function(){this.p.showQuery&&n(".query",this).html(this.toUserFriendlyString());n.isFunction(t.afterChange)&&t.afterChange.call(i,n("#"+r),t)},direction:i.p.direction,id:i.p.id});s.append(it);n("#"+r+"_2").find("[data-index]").each(function(){var u=parseInt(n(this).attr("data-index"),10);u>=0&&n(this).on("click",function(f){t.buttons[u].click.call(i,n("#"+r),t,f)})});v&&t.tmplFilters&&t.tmplFilters.length&&n(".ui-template",s).on("change",function(){var i=n(this).val();return"default"===i?n("#"+r).jqFilter("addFilter",c):n("#"+r).jqFilter("addFilter",t.tmplFilters[parseInt(i,10)]),!1});!0===t.multipleGroup&&(t.multipleSearch=!0);n(i).triggerHandler("jqGridFilterInitialize",[n("#"+r)]);n.isFunction(t.onInitializeSearch)&&t.onInitializeSearch.call(i,n("#"+r));t.gbox="#gbox_"+r;k=n(".ui-jqgrid").css("font-size")||"11px";t.layer?n.jgrid.createModal(o,s,t,"#gview_"+n.jgrid.jqID(i.p.id),n("#gbox_"+n.jgrid.jqID(i.p.id))[0],"string"==typeof t.layer?"#"+n.jgrid.jqID(t.layer):t.layer,"string"==typeof t.layer?{position:"relative","font-size":k}:{"font-size":k}):n.jgrid.createModal(o,s,t,"#gview_"+n.jgrid.jqID(i.p.id),n("#gbox_"+n.jgrid.jqID(i.p.id))[0],null,{"font-size":k});(t.searchOnEnter||t.closeOnEscape)&&n("#"+n.jgrid.jqID(o.themodal)).keydown(function(i){var u=n(i.target);return!t.searchOnEnter||13!==i.which||u.hasClass("add-group")||u.hasClass("add-rule")||u.hasClass("delete-group")||u.hasClass("delete-rule")||u.hasClass("fm-button")&&u.is("[id$=_query]")?t.closeOnEscape&&27===i.which?(n("#"+n.jgrid.jqID(o.modalhead)).find(".ui-jqdialog-titlebar-close").click(),!1):void 0:(n("#"+r+"_search").click(),!1)});d&&n("#"+r+"_query").on("click",function(){return n(".queryresult",s).toggle(),!1});void 0===t.stringResult&&(t.stringResult=t.multipleSearch);n("#"+r+"_search").on("click",function(){var h,s,f={};if(e=n("#"+r),e.find(".input-elm:focus").change(),rt&&t.multipleSearch?(i.p_savedFilter={},s=n.jgrid.filterRefactor({ruleGroup:n.extend(!0,{},e.jqFilter("filterData")),ssfield:ut,splitSelect:t.splitSelect,groupOpSelect:t.groupOpSelect}),i.p_savedFilter=n.extend(!0,{},e.jqFilter("filterData"))):s=e.jqFilter("filterData"),t.errorcheck&&(e[0].hideError(),t.showQuery||e.jqFilter("toSQLString"),e[0].p.error))return e[0].showError(),!1;if(t.stringResult){try{h=JSON.stringify(s)}catch(n){}"string"==typeof h&&(f[t.sFilter]=h,n.each([t.sField,t.sValue,t.sOper],function(){f[this]=""}))}else t.multipleSearch?(f[t.sFilter]=s,n.each([t.sField,t.sValue,t.sOper],function(){f[this]=""})):(f[t.sField]=s.rules[0].field,f[t.sValue]=s.rules[0].data,f[t.sOper]=s.rules[0].op,f[t.sFilter]="");return i.p.search=!0,n.extend(i.p.postData,f),u=n(i).triggerHandler("jqGridFilterSearch"),void 0===u&&(u=!0),u&&n.isFunction(t.onSearch)&&(u=t.onSearch.call(i,i.p.filters)),!1!==u&&n(i).trigger("reloadGrid",[{page:1}]),t.closeAfterSearch&&n.jgrid.hideModal("#"+n.jgrid.jqID(o.themodal),{gb:"#gbox_"+n.jgrid.jqID(i.p.id),jqm:t.jqModal,onClose:t.onClose}),!1});n("#"+r+"_reset").on("click",function(){var f={},e=n("#"+r);return i.p.search=!1,i.p.resetsearch=!0,!1===t.multipleSearch?f[t.sField]=f[t.sValue]=f[t.sOper]="":f[t.sFilter]="",e[0].resetFilter(),v&&n(".ui-template",s).val("default"),n.extend(i.p.postData,f),u=n(i).triggerHandler("jqGridFilterReset"),void 0===u&&(u=!0),u&&n.isFunction(t.onReset)&&(u=t.onReset.call(i)),!1!==u&&n(i).trigger("reloadGrid",[{page:1}]),t.closeAfterReset&&n.jgrid.hideModal("#"+n.jgrid.jqID(o.themodal),{gb:"#gbox_"+n.jgrid.jqID(i.p.id),jqm:t.jqModal,onClose:t.onClose}),!1});g(n("#"+r));n(".fm-button:not(."+f.disabled+")",s).hover(function(){n(this).addClass(f.hover)},function(){n(this).removeClass(f.hover)})}}})},filterInput:function(t,i){return i=n.extend(!0,{defaultSearch:"cn",groupOp:"OR",searchAll:!1,beforeSearch:null,afterSearch:null},i||{}),this.each(function(){var r=this,s,e,h,u,o,f;r.grid&&(u='{"groupOp":"'+i.groupOp+'","rules":[',o=0,(t+="","local"===r.p.datatype)&&(n.each(r.p.colModel,function(){s=this.index||this.name;e=this.searchoptions||{};h=i.defaultSearch?i.defaultSearch:e.sopt?e.sopt[0]:i.defaultSearch;this.search=!1!==this.search;(this.search||i.searchAll)&&(o>0&&(u+=","),u+='{"field":"'+s+'",',u+='"op":"'+h+'",',u+='"data":"'+t.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}',o++)}),u+="]}",n.extend(r.p.postData,{filters:u}),n.each(["searchField","searchString","searchOper"],function(n,t){r.p.postData.hasOwnProperty(t)&&delete r.p.postData[t]}),f="stop"===n(r).triggerHandler("jqGridFilterInputBeforeSearch"),!f&&n.isFunction(i.beforeSearch)&&(f=i.beforeSearch.call(r)),f||n(r).jqGrid("setGridParam",{search:!0}).trigger("reloadGrid",[{page:1}]),n(r).triggerHandler("jqGridFilterInputAfterSearch"),n.isFunction(i.afterSearch)&&i.afterSearch.call(r)))})}})});!function(n){"use strict";"function"==typeof define&&define.amd?define(["jquery","./grid.base","./grid.common"],n):n(jQuery)}(function(n){"use strict";n.jgrid.inlineEdit=n.jgrid.inlineEdit||{};n.jgrid.extend({editRow:function(t,i,r,u,f,e,o,s,h){var c={},a=n.makeArray(arguments).slice(1),l=this[0];return"object"===n.type(a[0])?c=a[0]:(void 0!==i&&(c.keys=i),n.isFunction(r)&&(c.oneditfunc=r),n.isFunction(u)&&(c.successfunc=u),void 0!==f&&(c.url=f),void 0!==e&&(c.extraparam=e),n.isFunction(o)&&(c.aftersavefunc=o),n.isFunction(s)&&(c.errorfunc=s),n.isFunction(h)&&(c.afterrestorefunc=h)),c=n.extend(!0,{keys:!1,keyevent:"keydown",onEnter:null,onEscape:null,oneditfunc:null,successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,mtype:"POST",focusField:!0,saveui:"enable",savetext:n.jgrid.getRegional(l,"defaults.savetext")},n.jgrid.inlineEdit,c),this.each(function(){var u,r,h,f,i,e,a=0,o=null,s={},v=n(this).jqGrid("getStyleUI",l.p.styleUI+".inlinedit","inputClass",!0);if(l.grid&&!1!==(f=n(l).jqGrid("getInd",t,!0))){if(l.p.beforeAction=!0,e=n.isFunction(c.beforeEditRow)?c.beforeEditRow.call(l,c,t):void 0,void 0===e&&(e=!0),!e)return void(l.p.beforeAction=!1);h=n(f).attr("editable")||"0";"0"!==h||n(f).hasClass("not-editable-row")||(i=l.p.colModel,n('td[role="gridcell"]',f).each(function(f){var h,c,e;if(u=i[f].name,h=!0===l.p.treeGrid&&u===l.p.ExpandColumn,h)r=n("span:first",this).html();else try{r=n.unformat.call(l,this,{rowId:t,colModel:i[f]},f)}catch(t){r=i[f].edittype&&"textarea"===i[f].edittype?n(this).text():n(this).html()}"cb"!==u&&"subgrid"!==u&&"rn"!==u&&(l.p.autoencode&&(r=n.jgrid.htmlDecode(r)),s[u]=r,!0===i[f].editable)&&(null===o&&(o=f),h?n("span:first",this).html(""):n(this).html(""),c=n.extend({},i[f].editoptions||{},{id:t+"_"+u,name:u,rowId:t,oper:"edit"}),i[f].edittype||(i[f].edittype="text"),("&nbsp;"===r||"&#160;"===r||1===r.length&&160===r.charCodeAt(0))&&(r=""),e=n.jgrid.createEl.call(l,i[f].edittype,c,r,!0,n.extend({},n.jgrid.ajaxOptions,l.p.ajaxSelectOptions||{})),n(e).addClass("editable inline-edit-cell"),n.inArray(i[f].edittype,["text","textarea","password","select"])>-1&&n(e).addClass(v),h?n("span:first",this).append(e):n(this).append(e),n.jgrid.bindEv.call(l,e,c),"select"===i[f].edittype&&void 0!==i[f].editoptions&&!0===i[f].editoptions.multiple&&void 0===i[f].editoptions.dataUrl&&n.jgrid.msie()&&n(e).width(n(e).width()),a++)}),a>0&&(s.id=t,l.p.savedRow.push(s),n(f).attr("editable","1"),c.focusField&&("number"==typeof c.focusField&&parseInt(c.focusField,10)<=i.length&&(o=c.focusField),setTimeout(function(){var t=n("td:eq("+o+") :input:visible",f).not(":disabled");t.length>0&&t.focus()},0)),!0===c.keys&&n(f).on(c.keyevent,function(i){if(27===i.keyCode){if(n.isFunction(c.onEscape))return c.onEscape.call(l,t,c,i),!0;if(n(l).jqGrid("restoreRow",t,c),l.p.inlineNav)try{n(l).jqGrid("showAddEditButtons")}catch(n){}return!1}if(13===i.keyCode){if("TEXTAREA"===i.target.tagName)return!0;if(n.isFunction(c.onEnter))return c.onEnter.call(l,t,c,i),!0;if(n(l).jqGrid("saveRow",t,c)&&l.p.inlineNav)try{n(l).jqGrid("showAddEditButtons")}catch(n){}return!1}}),n(l).triggerHandler("jqGridInlineEditRow",[t,c]),n.isFunction(c.oneditfunc)&&c.oneditfunc.call(l,t)))}})},saveRow:function(t,i,r,u,f,e,o){var vt=n.makeArray(arguments).slice(1),h={},s=this[0],a,rt,nt,st,ht,y,ut,ft,et,ct,lt,tt,at;"object"===n.type(vt[0])?h=vt[0]:(n.isFunction(i)&&(h.successfunc=i),void 0!==r&&(h.url=r),void 0!==u&&(h.extraparam=u),n.isFunction(f)&&(h.aftersavefunc=f),n.isFunction(e)&&(h.errorfunc=e),n.isFunction(o)&&(h.afterrestorefunc=o));h=n.extend(!0,{successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,mtype:"POST",saveui:"enable",savetext:n.jgrid.getRegional(s,"defaults.savetext")},n.jgrid.inlineEdit,h);var l,yt,w,b,v,k=!1,c={},d={},p={},pt=!1,wt=n.trim(n(s).jqGrid("getStyleUI",s.p.styleUI+".common","error",!0));if(!s.grid||!1===(v=n(s).jqGrid("getInd",t,!0)))return k;var it=n.jgrid.getRegional(s,"errors"),g=n.jgrid.getRegional(s,"edit"),ot=n.isFunction(h.beforeSaveRow)?h.beforeSaveRow.call(s,h,t):void 0;if(void 0===ot&&(ot=!0),ot){if(yt=n(v).attr("editable"),h.url=h.url||s.p.editurl,"1"===yt){if(n('td[role="gridcell"]',v).each(function(t){var i,u,r;if(a=s.p.colModel[t],l=a.name,nt="","cb"!==l&&"subgrid"!==l&&!0===a.editable&&"rn"!==l&&!n(this).hasClass("not-editable-cell")){switch(a.edittype){case"checkbox":i=["Yes","No"];a.editoptions&&a.editoptions.value&&(i=a.editoptions.value.split(":"));c[l]=n("input",this).is(":checked")?i[0]:i[1];nt=n("input",this);break;case"text":case"password":case"textarea":case"button":c[l]=n("input, textarea",this).val();nt=n("input, textarea",this);break;case"select":a.editoptions.multiple?(u=n("select",this),r=[],c[l]=n(u).val(),c[l]=c[l]?c[l].join(","):"",n("select option:selected",this).each(function(t,i){r[t]=n(i).text()}),d[l]=r.join(",")):(c[l]=n("select option:selected",this).val(),d[l]=n("select option:selected",this).text());a.formatter&&"select"===a.formatter&&(d={});nt=n("select",this);break;case"custom":try{if(!a.editoptions||!n.isFunction(a.editoptions.custom_value))throw"e1";if(c[l]=a.editoptions.custom_value.call(s,n(".customelement",this),"get"),void 0===c[l])throw"e2";}catch(t){"e1"===t?n.jgrid.info_dialog(it.errcap,"function 'custom_value' "+g.msg.nodefined,g.bClose,{styleUI:s.p.styleUI}):n.jgrid.info_dialog(it.errcap,t.message,g.bClose,{styleUI:s.p.styleUI})}}if(b=n.jgrid.checkValues.call(s,c[l],t),!1===b[0])return rt=t,!1;s.p.autoencode&&(c[l]=n.jgrid.htmlEncode(c[l]));"clientArray"!==h.url&&a.editoptions&&!0===a.editoptions.NullIfEmpty&&""===c[l]&&(p[l]="null",pt=!0)}}),!1===b[0]){try{n.isFunction(s.p.validationCell)?s.p.validationCell.call(s,nt,b[1],v.rowIndex,rt):(st=n(s).jqGrid("getGridRowById",t),ht=n.jgrid.findPos(st),n.jgrid.info_dialog(it.errcap,b[1],g.bClose,{left:ht[0],top:ht[1]+n(st).outerHeight(),styleUI:s.p.styleUI,onClose:function(){rt>=0&&n("#"+t+"_"+s.p.colModel[rt].name).focus()}}))}catch(n){alert(b[1])}return k}if(ut=s.p.prmNames,ft=t,(y=!1===s.p.keyName?ut.id:s.p.keyName,c)&&((c[ut.oper]=ut.editoper,void 0===c[y]||""===c[y])?c[y]=t:v.id!==s.p.idPrefix+c[y]&&(et=n.jgrid.stripPref(s.p.idPrefix,t),(void 0!==s.p._index[et]&&(s.p._index[c[y]]=s.p._index[et],delete s.p._index[et]),t=s.p.idPrefix+c[y],n(v).attr("id",t),s.p.selrow===ft&&(s.p.selrow=t),n.isArray(s.p.selarrrow))&&(ct=n.inArray(ft,s.p.selarrrow),ct>=0&&(s.p.selarrrow[ct]=t)),s.p.multiselect&&(lt="jqg_"+s.p.id+"_"+t,n("input.cbox",v).attr("id",lt).attr("name",lt))),void 0===s.p.inlineData&&(s.p.inlineData={}),c=n.extend({},c,s.p.inlineData,h.extraparam)),"clientArray"===h.url){for(c=n.extend({},c,d),s.p.autoencode&&n.each(c,function(t,i){c[t]=n.jgrid.htmlDecode(i)}),at=n(s).jqGrid("setRowData",t,c),n(v).attr("editable","0"),tt=0;tt<s.p.savedRow.length;tt++)if(String(s.p.savedRow[tt].id)===String(ft)){w=tt;break}n(s).triggerHandler("jqGridInlineAfterSaveRow",[t,at,c,h]);n.isFunction(h.aftersavefunc)&&h.aftersavefunc.call(s,t,at,c,h);w>=0&&s.p.savedRow.splice(w,1);k=!0;n(v).removeClass("jqgrid-new-row").off("keydown")}else n(s).jqGrid("progressBar",{method:"show",loadtype:h.saveui,htmlcontent:h.savetext}),p=n.extend({},c,p),p[y]=n.jgrid.stripPref(s.p.idPrefix,p[y]),n.ajax(n.extend({url:h.url,data:n.isFunction(s.p.serializeRowData)?s.p.serializeRowData.call(s,p):p,type:h.mtype,async:!1,complete:function(i,r){if(n(s).jqGrid("progressBar",{method:"hide",loadtype:h.saveui,htmlcontent:h.savetext}),"success"===r){var u,f,e=!0;if(u=n(s).triggerHandler("jqGridInlineSuccessSaveRow",[i,t,h]),n.isArray(u)||(u=[!0,p]),u[0]&&n.isFunction(h.successfunc)&&(u=h.successfunc.call(s,i)),n.isArray(u)?(e=u[0],c=u[1]||c):e=u,!0===e){for(s.p.autoencode&&n.each(c,function(t,i){c[t]=n.jgrid.htmlDecode(i)}),pt&&n.each(c,function(n){"null"===c[n]&&(c[n]="")}),c=n.extend({},c,d),n(s).jqGrid("setRowData",t,c),n(v).attr("editable","0"),f=0;f<s.p.savedRow.length;f++)if(String(s.p.savedRow[f].id)===String(t)){w=f;break}n(s).triggerHandler("jqGridInlineAfterSaveRow",[t,i,c,h]);n.isFunction(h.aftersavefunc)&&h.aftersavefunc.call(s,t,i,c,h);w>=0&&s.p.savedRow.splice(w,1);k=!0;n(v).removeClass("jqgrid-new-row").off("keydown")}else n(s).triggerHandler("jqGridInlineErrorSaveRow",[t,i,r,null,h]),n.isFunction(h.errorfunc)&&h.errorfunc.call(s,t,i,r,null),!0===h.restoreAfterError&&n(s).jqGrid("restoreRow",t,h)}},error:function(i,r,u){if(n("#lui_"+n.jgrid.jqID(s.p.id)).hide(),n(s).triggerHandler("jqGridInlineErrorSaveRow",[t,i,r,u,h]),n.isFunction(h.errorfunc))h.errorfunc.call(s,t,i,r,u);else{var f=i.responseText||i.statusText;try{n.jgrid.info_dialog(it.errcap,'<div class="'+wt+'">'+f+"<\/div>",g.bClose,{buttonalign:"right",styleUI:s.p.styleUI})}catch(n){alert(f)}}!0===h.restoreAfterError&&n(s).jqGrid("restoreRow",t,h)}},n.jgrid.ajaxOptions,s.p.ajaxRowOptions||{}))}return k}},restoreRow:function(t,i){var u=n.makeArray(arguments).slice(1),r={};return"object"===n.type(u[0])?r=u[0]:n.isFunction(i)&&(r.afterrestorefunc=i),r=n.extend(!0,{},n.jgrid.inlineEdit,r),this.each(function(){var o,u,i=this,f=-1,s={},e;if(i.grid&&!1!==(o=n(i).jqGrid("getInd",t,!0))&&(e=n.isFunction(r.beforeCancelRow)?r.beforeCancelRow.call(i,r,t):void 0,void 0===e&&(e=!0),e)){for(u=0;u<i.p.savedRow.length;u++)if(String(i.p.savedRow[u].id)===String(t)){f=u;break}if(f>=0){if(n.isFunction(n.fn.datepicker))try{n("input.hasDatepicker","#"+n.jgrid.jqID(o.id)).datepicker("hide")}catch(n){}n.each(i.p.colModel,function(){i.p.savedRow[f].hasOwnProperty(this.name)&&(s[this.name]=i.p.savedRow[f][this.name])});n(i).jqGrid("setRowData",t,s);n(o).attr("editable","0").off("keydown");i.p.savedRow.splice(f,1);n("#"+n.jgrid.jqID(t),"#"+n.jgrid.jqID(i.p.id)).hasClass("jqgrid-new-row")&&setTimeout(function(){n(i).jqGrid("delRowData",t);n(i).jqGrid("showAddEditButtons")},0)}n(i).triggerHandler("jqGridInlineAfterRestoreRow",[t]);n.isFunction(r.afterrestorefunc)&&r.afterrestorefunc.call(i,t)}})},addRow:function(t){return t=n.extend(!0,{rowID:null,initdata:{},position:"first",useDefValues:!0,useFormatter:!1,addRowParams:{extraparam:{}}},t||{}),this.each(function(){var i,r,u,f;if(this.grid){if(i=this,i.p.beforeAction=!0,r=n.isFunction(t.beforeAddRow)?t.beforeAddRow.call(i,t.addRowParams):void 0,void 0===r&&(r=!0),!r)return void(i.p.beforeAction=!1);(t.rowID=n.isFunction(t.rowID)?t.rowID.call(i,t):null!=t.rowID?t.rowID:n.jgrid.randId(),!0===t.useDefValues&&n(i.p.colModel).each(function(){if(this.editoptions&&this.editoptions.defaultValue){var r=this.editoptions.defaultValue,u=n.isFunction(r)?r.call(i):r;t.initdata[this.name]=u}}),n(i).jqGrid("addRowData",t.rowID,t.initdata,t.position),t.rowID=i.p.idPrefix+t.rowID,n("#"+n.jgrid.jqID(t.rowID),"#"+n.jgrid.jqID(i.p.id)).addClass("jqgrid-new-row"),t.useFormatter)?n("#"+n.jgrid.jqID(t.rowID)+" .ui-inline-edit","#"+n.jgrid.jqID(i.p.id)).click():(u=i.p.prmNames,f=u.oper,t.addRowParams.extraparam[f]=u.addoper,n(i).jqGrid("editRow",t.rowID,t.addRowParams),n(i).jqGrid("setSelection",t.rowID))}})},inlineNav:function(t,i){var r=this[0],f=n.jgrid.getRegional(r,"nav"),u=n.jgrid.styleUI[r.p.styleUI].inlinedit;return i=n.extend(!0,{edit:!0,editicon:u.icon_edit_nav,add:!0,addicon:u.icon_add_nav,save:!0,saveicon:u.icon_save_nav,cancel:!0,cancelicon:u.icon_cancel_nav,addParams:{addRowParams:{extraparam:{}}},editParams:{},restoreAfterSelect:!0,saveAfterSelect:!1},f,i||{}),this.each(function(){var u,e,s,h,c,o;if(this.grid&&!this.p.inlineNav){if(u=n.jgrid.jqID(r.p.id),e=n.trim(n(r).jqGrid("getStyleUI",r.p.styleUI+".common","disabled",!0)),r.p.navGrid||n(r).jqGrid("navGrid",t,{refresh:!1,edit:!1,add:!1,del:!1,search:!1,view:!1}),n(r).data("inlineNav")||n(r).data("inlineNav",i),r.p.force_regional&&(i=n.extend(i,f)),r.p.inlineNav=!0,!0===i.addParams.useFormatter)for(h=r.p.colModel,s=0;s<h.length;s++)if(h[s].formatter&&"actions"===h[s].formatter){h[s].formatoptions&&(c={keys:!1,onEdit:null,onSuccess:null,afterSave:null,onError:null,afterRestore:null,extraparam:{},url:null},o=n.extend(c,h[s].formatoptions),i.addParams.addRowParams={keys:o.keys,oneditfunc:o.onEdit,successfunc:o.onSuccess,url:o.url,extraparam:o.extraparam,aftersavefunc:o.afterSave,errorfunc:o.onError,afterrestorefunc:o.afterRestore});break}i.add&&n(r).jqGrid("navButtonAdd",t,{caption:i.addtext,title:i.addtitle,buttonicon:i.addicon,id:r.p.id+"_iladd",internal:!0,onClickButton:function(){void 0===r.p.beforeAction&&(r.p.beforeAction=!0);n(r).jqGrid("addRow",i.addParams);!i.addParams.useFormatter&&r.p.beforeAction&&(n("#"+u+"_ilsave").removeClass(e),n("#"+u+"_ilcancel").removeClass(e),n("#"+u+"_iladd").addClass(e),n("#"+u+"_iledit").addClass(e))}});i.edit&&n(r).jqGrid("navButtonAdd",t,{caption:i.edittext,title:i.edittitle,buttonicon:i.editicon,id:r.p.id+"_iledit",internal:!0,onClickButton:function(){var t=n(r).jqGrid("getGridParam","selrow");t?(void 0===r.p.beforeAction&&(r.p.beforeAction=!0),n(r).jqGrid("editRow",t,i.editParams),r.p.beforeAction&&(n("#"+u+"_ilsave").removeClass(e),n("#"+u+"_ilcancel").removeClass(e),n("#"+u+"_iladd").addClass(e),n("#"+u+"_iledit").addClass(e))):(n.jgrid.viewModal("#alertmod_"+u,{gbox:"#gbox_"+u,jqm:!0}),n("#jqg_alrt").focus())}});i.save&&(n(r).jqGrid("navButtonAdd",t,{caption:i.savetext||"",title:i.savetitle||"Save row",buttonicon:i.saveicon,id:r.p.id+"_ilsave",internal:!0,onClickButton:function(){var t=r.p.savedRow[0].id;if(t){var f=r.p.prmNames,e=f.oper,o=i.editParams;n("#"+n.jgrid.jqID(t),"#"+u).hasClass("jqgrid-new-row")?(i.addParams.addRowParams.extraparam[e]=f.addoper,o=i.addParams.addRowParams):(i.editParams.extraparam||(i.editParams.extraparam={}),i.editParams.extraparam[e]=f.editoper);n(r).jqGrid("saveRow",t,o)&&n(r).jqGrid("showAddEditButtons")}else n.jgrid.viewModal("#alertmod_"+u,{gbox:"#gbox_"+u,jqm:!0}),n("#jqg_alrt").focus()}}),n("#"+u+"_ilsave").addClass(e));i.cancel&&(n(r).jqGrid("navButtonAdd",t,{caption:i.canceltext||"",title:i.canceltitle||"Cancel row editing",buttonicon:i.cancelicon,id:r.p.id+"_ilcancel",internal:!0,onClickButton:function(){var t=r.p.savedRow[0].id,f=i.editParams;t?(n("#"+n.jgrid.jqID(t),"#"+u).hasClass("jqgrid-new-row")&&(f=i.addParams.addRowParams),n(r).jqGrid("restoreRow",t,f),n(r).jqGrid("showAddEditButtons")):(n.jgrid.viewModal("#alertmod",{gbox:"#gbox_"+u,jqm:!0}),n("#jqg_alrt").focus())}}),n("#"+u+"_ilcancel").addClass(e));!0!==i.restoreAfterSelect&&!0!==i.saveAfterSelect||n(r).on("jqGridBeforeSelectRow.inlineNav",function(t,u){if(r.p.savedRow.length>0&&!0===r.p.inlineNav&&u!==r.p.selrow&&null!==r.p.selrow){var f=!0;r.p.selrow===i.addParams.rowID?n(r).jqGrid("delRowData",r.p.selrow):!0===i.restoreAfterSelect?n(r).jqGrid("restoreRow",r.p.selrow,i.editParams):f=n(r).jqGrid("saveRow",r.p.selrow,i.editParams);f&&n(r).jqGrid("showAddEditButtons")}})}})},showAddEditButtons:function(){return this.each(function(){if(this.grid){var t=n.jgrid.jqID(this.p.id),i=n.trim(n(this).jqGrid("getStyleUI",this.p.styleUI+".common","disabled",!0));n("#"+t+"_ilsave").addClass(i);n("#"+t+"_ilcancel").addClass(i);n("#"+t+"_iladd").removeClass(i);n("#"+t+"_iledit").removeClass(i)}})},showSaveCancelButtons:function(){return this.each(function(){if(this.grid){var t=n.jgrid.jqID(this.p.id),i=n.trim(n(this).jqGrid("getStyleUI",this.p.styleUI+".common","disabled",!0));n("#"+t+"_ilsave").removeClass(i);n("#"+t+"_ilcancel").removeClass(i);n("#"+t+"_iladd").addClass(i);n("#"+t+"_iledit").addClass(i)}})}})});!function(n){"use strict";"function"==typeof define&&define.amd?define(["jquery","./grid.base"],n):n(jQuery)}(function(n){"use strict";n.jgrid.extend({editCell:function(t,i,r,u){return this.each(function(){var o,e,s,h,f=this,v=n(this).jqGrid("getStyleUI",f.p.styleUI+".common","highlight",!0),y=n(this).jqGrid("getStyleUI",f.p.styleUI+".common","hover",!0),w=n(this).jqGrid("getStyleUI",f.p.styleUI+".celledit","inputClass",!0),p,l,a,c;if(f.grid&&!0===f.p.cellEdit){if(i=parseInt(i,10),f.p.selrow=f.rows[t].id,f.p.knv||n(f).jqGrid("GridNav"),f.p.savedRow.length>0){if(!0===r&&t==f.p.iRow&&i==f.p.iCol)return;n(f).jqGrid("saveCell",f.p.savedRow[0].id,f.p.savedRow[0].ic)}else window.setTimeout(function(){n("#"+n.jgrid.jqID(f.p.knv)).attr("tabindex","-1").focus()},1);if(h=f.p.colModel[i],"subgrid"!==(o=h.name)&&"cb"!==o&&"rn"!==o){try{s=n(f.rows[t].cells[i])}catch(r){s=n("td:eq("+i+")",f.rows[t])}if(parseInt(f.p.iCol,10)>=0&&parseInt(f.p.iRow,10)>=0&&void 0!==f.p.iRowId&&(p=n(f).jqGrid("getGridRowById",f.p.iRowId),n(p).removeClass("selected-row "+y).find("td:eq("+f.p.iCol+")").removeClass("edit-cell "+v)),s.addClass("edit-cell "+v),n(f.rows[t]).addClass("selected-row "+y),!0!==h.editable||!0!==r||s.hasClass("not-editable-cell")||n.isFunction(f.p.isCellEditable)&&!f.p.isCellEditable.call(f,o,t,i))e=s.html().replace(/\&#160\;/gi,""),n(f).triggerHandler("jqGridCellSelect",[f.rows[t].id,i,e,u]),n.isFunction(f.p.onCellSelect)&&f.p.onCellSelect.call(f,f.rows[t].id,i,e,u);else{try{e=n.unformat.call(f,s,{rowId:f.rows[t].id,colModel:h},i)}catch(n){e=h.edittype&&"textarea"===h.edittype?s.text():s.html()}(f.p.autoencode&&(e=n.jgrid.htmlDecode(e)),h.edittype||(h.edittype="text"),f.p.savedRow.push({id:t,ic:i,name:o,v:e,rowId:f.rows[t].id}),("&nbsp;"===e||"&#160;"===e||1===e.length&&160===e.charCodeAt(0))&&(e=""),n.isFunction(f.p.formatCell))&&(l=f.p.formatCell.call(f,f.rows[t].id,o,e,t,i),void 0!==l&&(e=l));n(f).triggerHandler("jqGridBeforeEditCell",[f.rows[t].id,o,e,t,i]);n.isFunction(f.p.beforeEditCell)&&f.p.beforeEditCell.call(f,f.rows[t].id,o,e,t,i);a=n.extend({},h.editoptions||{},{id:t+"_"+o,name:o,rowId:f.rows[t].id,oper:"edit"});c=n.jgrid.createEl.call(f,h.edittype,a,e,!0,n.extend({},n.jgrid.ajaxOptions,f.p.ajaxSelectOptions||{}));n.inArray(h.edittype,["text","textarea","password","select"])>-1&&n(c).addClass(w);s.html("").append(c).attr("tabindex","0");n.jgrid.bindEv.call(f,c,a);window.setTimeout(function(){n(c).focus()},1);n("input, select, textarea",s).on("keydown",function(r){if(27===r.keyCode&&(n("input.hasDatepicker",s).length>0?n(".ui-datepicker").is(":hidden")?n(f).jqGrid("restoreCell",t,i):n("input.hasDatepicker",s).datepicker("hide"):n(f).jqGrid("restoreCell",t,i)),13===r.keyCode&&!r.shiftKey)return n(f).jqGrid("saveCell",t,i),!1;if(9===r.keyCode){if(f.grid.hDiv.loading)return!1;r.shiftKey?n(f).jqGrid("prevCell",t,i,r):n(f).jqGrid("nextCell",t,i,r)}r.stopPropagation()});n(f).triggerHandler("jqGridAfterEditCell",[f.rows[t].id,o,e,t,i]);n.isFunction(f.p.afterEditCell)&&f.p.afterEditCell.call(f,f.rows[t].id,o,e,t,i)}f.p.iCol=i;f.p.iRow=t;f.p.iRowId=f.rows[t].id}}})},saveCell:function(t,i){return this.each(function(){var r=this,f=r.p.savedRow.length>=1?0:null,v=n.jgrid.getRegional(this,"errors"),l=n.jgrid.getRegional(this,"edit"),tt,it,k,d,g,b,rt,nt,w,c;if(r.grid&&!0===r.p.cellEdit){if(null!==f){var u,h,o=n(r).jqGrid("getGridRowById",r.p.savedRow[0].rowId),y=n("td:eq("+i+")",o),s=r.p.colModel[i],e=s.name,a=n.jgrid.jqID(e),p=n(y).offset();switch(s.edittype){case"select":s.editoptions.multiple?(tt=n("#"+t+"_"+a,o),it=[],u=n(tt).val(),u?u.join(","):u="",n("option:selected",tt).each(function(t,i){it[t]=n(i).text()}),h=it.join(",")):(u=n("#"+t+"_"+a+" option:selected",o).val(),h=n("#"+t+"_"+a+" option:selected",o).text());s.formatter&&(h=u);break;case"checkbox":k=["Yes","No"];s.editoptions&&s.editoptions.value&&(k=s.editoptions.value.split(":"));u=n("#"+t+"_"+a,o).is(":checked")?k[0]:k[1];h=u;break;case"password":case"text":case"textarea":case"button":u=n("#"+t+"_"+a,o).val();h=u;break;case"custom":try{if(!s.editoptions||!n.isFunction(s.editoptions.custom_value))throw"e1";if(void 0===(u=s.editoptions.custom_value.call(r,n(".customelement",y),"get")))throw"e2";h=u}catch(t){"e1"===t?n.jgrid.info_dialog(v.errcap,"function 'custom_value' "+l.msg.nodefined,l.bClose,{styleUI:r.p.styleUI}):"e2"===t?n.jgrid.info_dialog(v.errcap,"function 'custom_value' "+l.msg.novalue,l.bClose,{styleUI:r.p.styleUI}):n.jgrid.info_dialog(v.errcap,t.message,l.bClose,{styleUI:r.p.styleUI})}}if(h!==r.p.savedRow[f].v)if(d=n(r).triggerHandler("jqGridBeforeSaveCell",[r.p.savedRow[f].rowId,e,u,t,i]),(d&&(u=d,h=d),n.isFunction(r.p.beforeSaveCell))&&(g=r.p.beforeSaveCell.call(r,r.p.savedRow[f].rowId,e,u,t,i),g&&(u=g,h=g)),b=n.jgrid.checkValues.call(r,u,i),rt=!1,!0===b[0]){if(nt=n(r).triggerHandler("jqGridBeforeSubmitCell",[r.p.savedRow[f].rowId,e,u,t,i])||{},n.isFunction(r.p.beforeSubmitCell)&&((nt=r.p.beforeSubmitCell.call(r,r.p.savedRow[f].rowId,e,u,t,i))||(nt={})),w=n(r).triggerHandler("jqGridOnSubmitCell",[r.p.savedRow[f].rowId,e,u,t,i]),void 0===w&&(w=!0),n.isFunction(r.p.onSubmitCell)&&void 0===(w=r.p.onSubmitCell(r.p.savedRow[f].rowId,e,u,t,i))&&(w=!0),!1===w)return;if(n("input.hasDatepicker",y).length>0&&n("input.hasDatepicker",y).datepicker("hide"),"remote"===r.p.cellsubmit)if(r.p.cellurl){c={};r.p.autoencode&&(u=n.jgrid.htmlEncode(u));s.editoptions&&s.editoptions.NullIfEmpty&&""===u&&(u="null",rt=!0);c[e]=u;var ut=r.p.prmNames,ft=ut.id,et=ut.oper;c[ft]=n.jgrid.stripPref(r.p.idPrefix,r.p.savedRow[f].rowId);c[et]=ut.editoper;c=n.extend(nt,c);n(r).jqGrid("progressBar",{method:"show",loadtype:r.p.loadui,htmlcontent:n.jgrid.getRegional(r,"defaults.savetext")});r.grid.hDiv.loading=!0;n.ajax(n.extend({url:r.p.cellurl,data:n.isFunction(r.p.serializeCellData)?r.p.serializeCellData.call(r,c,e):c,type:"POST",complete:function(s,w){if(n(r).jqGrid("progressBar",{method:"hide",loadtype:r.p.loadui}),r.grid.hDiv.loading=!1,"success"===w){var b=n(r).triggerHandler("jqGridAfterSubmitCell",[r,s,c[ft],e,u,t,i])||[!0,""];!0===b[0]&&n.isFunction(r.p.afterSubmitCell)&&(b=r.p.afterSubmitCell.call(r,s,c[ft],e,u,t,i));!0===b[0]?(rt&&(u=""),n(y).empty(),n(r).jqGrid("setCell",r.p.savedRow[f].rowId,i,h,!1,!1,!0),n(y).addClass("dirty-cell"),n(o).addClass("edited"),n(r).triggerHandler("jqGridAfterSaveCell",[r.p.savedRow[f].rowId,e,u,t,i]),n.isFunction(r.p.afterSaveCell)&&r.p.afterSaveCell.call(r,r.p.savedRow[f].rowId,e,u,t,i),r.p.savedRow.splice(0,1)):(n(r).triggerHandler("jqGridErrorCell",[s,w]),n.isFunction(r.p.errorCell)?r.p.errorCell.call(r,s,w):n.jgrid.info_dialog(v.errcap,b[1],l.bClose,{styleUI:r.p.styleUI,top:p.top+30,left:p.left,onClose:function(){r.p.restoreCellonFail||n("#"+t+"_"+a,o).focus()}}),r.p.restoreCellonFail&&n(r).jqGrid("restoreCell",t,i))}},error:function(u,f,e){n("#lui_"+n.jgrid.jqID(r.p.id)).hide();r.grid.hDiv.loading=!1;n(r).triggerHandler("jqGridErrorCell",[u,f,e]);n.isFunction(r.p.errorCell)?r.p.errorCell.call(r,u,f,e):n.jgrid.info_dialog(v.errcap,u.status+" : "+u.statusText+"<br/>"+f,l.bClose,{styleUI:r.p.styleUI,top:p.top+30,left:p.left,onClose:function(){r.p.restoreCellonFail||n("#"+t+"_"+a,o).focus()}});r.p.restoreCellonFail&&n(r).jqGrid("restoreCell",t,i)}},n.jgrid.ajaxOptions,r.p.ajaxCellOptions||{}))}else try{n.jgrid.info_dialog(v.errcap,v.nourl,l.bClose,{styleUI:r.p.styleUI});r.p.restoreCellonFail&&n(r).jqGrid("restoreCell",t,i)}catch(n){}"clientArray"===r.p.cellsubmit&&(n(y).empty(),n(r).jqGrid("setCell",r.p.savedRow[f].rowId,i,h,!1,!1,!0),n(y).addClass("dirty-cell"),n(o).addClass("edited"),n(r).triggerHandler("jqGridAfterSaveCell",[r.p.savedRow[f].rowId,e,u,t,i]),n.isFunction(r.p.afterSaveCell)&&r.p.afterSaveCell.call(r,r.p.savedRow[f].rowId,e,u,t,i),r.p.savedRow.splice(0,1))}else try{n.isFunction(r.p.validationCell)?r.p.validationCell.call(r,n("#"+t+"_"+a,o),b[1],t,i):(window.setTimeout(function(){n.jgrid.info_dialog(v.errcap,u+" "+b[1],l.bClose,{styleUI:r.p.styleUI,top:p.top+30,left:p.left,onClose:function(){r.p.restoreCellonFail||n("#"+t+"_"+a,o).focus()}})},50),r.p.restoreCellonFail&&n(r).jqGrid("restoreCell",t,i))}catch(n){alert(b[1])}else n(r).jqGrid("restoreCell",t,i)}window.setTimeout(function(){n("#"+n.jgrid.jqID(r.p.knv)).attr("tabindex","-1").focus()},0)}})},restoreCell:function(t,i){return this.each(function(){var r=this,u=r.p.savedRow.length>=1?0:null,e,f;if(r.grid&&!0===r.p.cellEdit){if(null!==u){if(e=n(r).jqGrid("getGridRowById",r.p.savedRow[u].rowId),f=n("td:eq("+i+")",e),n.isFunction(n.fn.datepicker))try{n("input.hasDatepicker",f).datepicker("hide")}catch(n){}n(f).empty().attr("tabindex","-1");n(r).jqGrid("setCell",r.p.savedRow[0].rowId,i,r.p.savedRow[u].v,!1,!1,!0);n(r).triggerHandler("jqGridAfterRestoreCell",[r.p.savedRow[u].rowId,r.p.savedRow[u].v,t,i]);n.isFunction(r.p.afterRestoreCell)&&r.p.afterRestoreCell.call(r,r.p.savedRow[u].rowId,r.p.savedRow[u].v,t,i);r.p.savedRow.splice(0,1)}window.setTimeout(function(){n("#"+r.p.knv).attr("tabindex","-1").focus()},0)}})},nextCell:function(t,i,r){return this.each(function(){var f,u=this,e=!1;if(u.grid&&!0===u.p.cellEdit){for(f=i+1;f<u.p.colModel.length;f++)if(!0===u.p.colModel[f].editable&&(!n.isFunction(u.p.isCellEditable)||u.p.isCellEditable.call(u,u.p.colModel[f].name,t,f))){e=f;break}!1!==e?n(u).jqGrid("editCell",t,e,!0,r):u.p.savedRow.length>0&&n(u).jqGrid("saveCell",t,i)}})},prevCell:function(t,i,r){return this.each(function(){var f,u=this,e=!1;if(u.grid&&!0===u.p.cellEdit){for(f=i-1;f>=0;f--)if(!0===u.p.colModel[f].editable&&(!n.isFunction(u.p.isCellEditable)||u.p.isCellEditable.call(u,u.p.colModel[f].name,t,f))){e=f;break}!1!==e?n(u).jqGrid("editCell",t,e,!0,r):u.p.savedRow.length>0&&n(u).jqGrid("saveCell",t,i)}})},GridNav:function(){return this.each(function(){function u(i,r,u){if("v"===u.substr(0,1)){var e=n(t.grid.bDiv)[0].clientHeight,o=n(t.grid.bDiv)[0].scrollTop,s=t.rows[i].offsetTop+t.rows[i].clientHeight,h=t.rows[i].offsetTop;"vd"===u&&s>=e&&(n(t.grid.bDiv)[0].scrollTop=n(t.grid.bDiv)[0].scrollTop+t.rows[i].clientHeight);"vu"===u&&h<o&&(n(t.grid.bDiv)[0].scrollTop=n(t.grid.bDiv)[0].scrollTop-t.rows[i].clientHeight)}if("h"===u){var c=n(t.grid.bDiv)[0].clientWidth,f=n(t.grid.bDiv)[0].scrollLeft,l=t.rows[i].cells[r].offsetLeft+t.rows[i].cells[r].clientWidth,a=t.rows[i].cells[r].offsetLeft;l>=c+parseInt(f,10)?n(t.grid.bDiv)[0].scrollLeft=n(t.grid.bDiv)[0].scrollLeft+t.rows[i].cells[r].clientWidth:a<f&&(n(t.grid.bDiv)[0].scrollLeft=n(t.grid.bDiv)[0].scrollLeft-t.rows[i].cells[r].clientWidth)}}function f(n,i){var u,r;if("lft"===i)for(u=n+1,r=n;r>=0;r--)if(!0!==t.p.colModel[r].hidden){u=r;break}if("rgt"===i)for(u=n-1,r=n;r<t.p.colModel.length;r++)if(!0!==t.p.colModel[r].hidden){u=r;break}return u}var t=this,i,r,e;t.grid&&!0===t.p.cellEdit&&(t.p.knv=t.p.id+"_kn",e=n("<div style='position:fixed;top:0px;width:1px;height:1px;' tabindex='0'><div tabindex='-1' style='width:1px;height:1px;' id='"+t.p.knv+"'><\/div><\/div>"),n(e).insertBefore(t.grid.cDiv),n("#"+t.p.knv).focus().keydown(function(e){switch(r=e.keyCode,"rtl"===t.p.direction&&(37===r?r=39:39===r&&(r=37)),r){case 38:t.p.iRow-1>0&&(u(t.p.iRow-1,t.p.iCol,"vu"),n(t).jqGrid("editCell",t.p.iRow-1,t.p.iCol,!1,e));break;case 40:t.p.iRow+1<=t.rows.length-1&&(u(t.p.iRow+1,t.p.iCol,"vd"),n(t).jqGrid("editCell",t.p.iRow+1,t.p.iCol,!1,e));break;case 37:t.p.iCol-1>=0&&(i=f(t.p.iCol-1,"lft"),u(t.p.iRow,i,"h"),n(t).jqGrid("editCell",t.p.iRow,i,!1,e));break;case 39:t.p.iCol+1<=t.p.colModel.length-1&&(i=f(t.p.iCol+1,"rgt"),u(t.p.iRow,i,"h"),n(t).jqGrid("editCell",t.p.iRow,i,!1,e));break;case 13:parseInt(t.p.iCol,10)>=0&&parseInt(t.p.iRow,10)>=0&&n(t).jqGrid("editCell",t.p.iRow,t.p.iCol,!0,e);break;default:return!0}return!1}))})},getChangedCells:function(t){var i=[];return t||(t="all"),this.each(function(){var u,r=this;r.grid&&!0===r.p.cellEdit&&n(r.rows).each(function(f){var e={};n(this).hasClass("edited")&&(n("td",this).each(function(i){if("cb"!==(u=r.p.colModel[i].name)&&"subgrid"!==u)if("dirty"===t){if(n(this).hasClass("dirty-cell"))try{e[u]=n.unformat.call(r,this,{rowId:r.rows[f].id,colModel:r.p.colModel[i]},i)}catch(t){e[u]=n.jgrid.htmlDecode(n(this).html())}}else try{e[u]=n.unformat.call(r,this,{rowId:r.rows[f].id,colModel:r.p.colModel[i]},i)}catch(t){e[u]=n.jgrid.htmlDecode(n(this).html())}}),e.id=this.id,i.push(e))})}),i}})});!function(n){"use strict";"function"==typeof define&&define.amd?define(["jquery"],n):n(jQuery)}(function(n){"use strict";n.fn.jqm=function(r){var f={overlay:50,closeoverlay:!0,overlayClass:"jqmOverlay",closeClass:"jqmClose",trigger:".jqModal",ajax:t,ajaxText:"",target:t,modal:t,toTop:t,onShow:t,onHide:t,onLoad:t};return this.each(function(){if(this._jqm)return i[this._jqm].c=n.extend({},i[this._jqm].c,r);u++;this._jqm=u;i[u]={c:n.extend(f,n.jqm.params,r),a:t,w:n(this).addClass("jqmID"+u),s:u};f.trigger&&n(this).jqmAddTrigger(f.trigger)})};n.fn.jqmAddClose=function(n){return s(this,n,"jqmHide")};n.fn.jqmAddTrigger=function(n){return s(this,n,"jqmShow")};n.fn.jqmShow=function(t){return this.each(function(){n.jqm.open(this._jqm,t)})};n.fn.jqmHide=function(t){return this.each(function(){n.jqm.close(this._jqm,t)})};n.jqm={hash:{},open:function(u,f){var s=i[u],h=s.c,y="."+h.closeClass,a=parseInt(s.w.css("z-index")),v,c,l;return(a=a>0?a:3e3,v=n("<div><\/div>").css({height:"100%",width:"100%",position:"fixed",left:0,top:0,"z-index":a-1,opacity:h.overlay/100}),s.a)?t:((s.t=f,s.a=!0,s.w.css("z-index",a),h.modal?(r[0]||setTimeout(function(){new o("bind")},1),r.push(u)):h.overlay>0?h.closeoverlay&&s.w.jqmAddClose(v):v=t,s.o=v?v.addClass(h.overlayClass).prependTo("body"):t,h.ajax)?(c=h.target||s.w,l=h.ajax,c="string"==typeof c?n(c,s.w):n(c),l="@"===l.substr(0,1)?n(f).attr(l.substring(1)):l,c.html(h.ajaxText).load(l,function(){h.onLoad&&h.onLoad.call(this,s);y&&s.w.jqmAddClose(n(y,s.w));e(s)})):y&&s.w.jqmAddClose(n(y,s.w)),h.toTop&&s.o&&s.w.before('<span id="jqmP'+s.w[0]._jqm+'"><\/span>').insertAfter(s.o),h.onShow?h.onShow(s):s.w.show(),e(s),t)},close:function(u){var f=i[u];return f.a?(f.a=t,r[0]&&(r.pop(),r[0]||new o("unbind")),f.c.toTop&&f.o&&n("#jqmP"+f.w[0]._jqm).after(f.w).remove(),f.c.onHide?f.c.onHide(f):(f.w.hide(),f.o&&f.o.remove()),t):t},params:{}};var u=0,i=n.jqm.hash,r=[],t=!1,e=function(n){void 0===n.c.focusField&&(n.c.focusField=0);n.c.focusField>=0&&h(n)},h=function(t){try{n(":input:visible",t.w)[parseInt(t.c.focusField,10)].focus()}catch(n){}},o=function(t){n(document)[t]("keypress",f)[t]("keydown",f)[t]("mousedown",f)},f=function(t){var f=i[r[r.length-1]],u=!n(t.target).parents(".jqmID"+f.s)[0];return u&&n(".jqmID"+f.s).each(function(){var r=n(this),i=r.offset();if(i.top<=t.pageY&&t.pageY<=i.top+r.height()&&i.left<=t.pageX&&t.pageX<=i.left+r.width())return u=!1,!1}),!u},s=function(r,u,f){return r.each(function(){var r=this._jqm;n(u).each(function(){this[f]||(this[f]=[],n(this).click(function(){var n,r;for(n in{jqmShow:1,jqmHide:1})for(r in this[n])i[this[n][r]]&&i[this[n][r]].w[n](this);return t}));this[f].push(r)})})}});!function(n){"use strict";"function"==typeof define&&define.amd?define(["jquery"],n):n(jQuery)}(function(n){"use strict";n.fn.jqDrag=function(n){return s(this,n,"d")};n.fn.jqResize=function(n,t){return s(this,n,"r",t)};n.jqDnR={dnr:{},e:0,drag:function(n){return"d"==t.k?i.css({left:t.X+n.pageX-t.pX,top:t.Y+n.pageY-t.pY}):(i.css({width:Math.max(n.pageX-t.pX+t.W,0),height:Math.max(n.pageY-t.pY+t.H,0)}),u&&r.css({width:Math.max(n.pageX-u.pX+u.W,0),height:Math.max(n.pageY-u.pY+u.H,0)})),!1},stop:function(){n(document).off("mousemove",f.drag).off("mouseup",f.stop)}};var r,u,f=n.jqDnR,t=f.dnr,i=f.e,s=function(f,s,h,c){return f.each(function(){s=s?n(s,f):f;s.on("mousedown",{e:f,k:h},function(f){var h=f.data,s={};if(i=h.e,r=!!c&&n(c),"relative"!=i.css("position"))try{i.position(s)}catch(n){}if(t={X:s.left||e("left")||0,Y:s.top||e("top")||0,W:e("width")||i[0].scrollWidth||0,H:e("height")||i[0].scrollHeight||0,pX:f.pageX,pY:f.pageY,k:h.k},u=!(!r||"d"==h.k)&&{X:s.left||o("left")||0,Y:s.top||o("top")||0,W:r[0].offsetWidth||o("width")||0,H:r[0].offsetHeight||o("height")||0,pX:f.pageX,pY:f.pageY,k:h.k},n("input.hasDatepicker",i[0])[0])try{n("input.hasDatepicker",i[0]).datepicker("hide")}catch(n){}return n(document).mousemove(n.jqDnR.drag).mouseup(n.jqDnR.stop),!1})})},e=function(n){return parseInt(i.css(n),10)||!1},o=function(n){return parseInt(r.css(n),10)||!1};n.fn.tinyDraggable=function(t){var i=n.extend({handle:0,exclude:0},t);return this.each(function(){var r,u,t=n(this);(i.handle?n(i.handle,t):t).on({mousedown:function(f){if(!i.exclude||!~n.inArray(f.target,n(i.exclude,t))){f.preventDefault();var e=t.offset();r=f.pageX-e.left;u=f.pageY-e.top;n(document).on("mousemove.drag",function(n){t.offset({top:n.pageY-u,left:n.pageX-r})})}},mouseup:function(){n(document).off("mousemove.drag")}})})}});!function(n){"use strict";"function"==typeof define&&define.amd?define(["jquery","./grid.base"],n):n(jQuery)}(function(n){"use strict";n.jgrid.extend({setSubGrid:function(){return this.each(function(){var i,r,t=this,u=n.jgrid.styleUI[t.p.styleUI||"jQueryUI"].subgrid,f={plusicon:u.icon_plus,minusicon:u.icon_minus,openicon:u.icon_open,expandOnLoad:!1,selectOnExpand:!1,selectOnCollapse:!1,reloadOnExpand:!0};if(t.p.subGridOptions=n.extend(f,t.p.subGridOptions||{}),t.p.colNames.unshift(""),t.p.colModel.unshift({name:"subgrid",width:n.jgrid.cell_width?t.p.subGridWidth+t.p.cellLayout:t.p.subGridWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,fixed:!0}),i=t.p.subGridModel,i[0])for(i[0].align=n.extend([],i[0].align||[]),r=0;r<i[0].name.length;r++)i[0].align[r]=i[0].align[r]||"left"})},addSubGridCell:function(t,i){var r,u,f,e="";return this.each(function(){e=this.formatCol(t,i);u=this.p.id;r=this.p.subGridOptions.plusicon;f=n.jgrid.styleUI[this.p.styleUI||"jQueryUI"].common}),'<td role="gridcell" aria-describedby="'+u+'_subgrid" class="ui-sgcollapsed sgcollapsed" '+e+"><a style='cursor:pointer;' class='ui-sghref'><span class='"+f.icon_base+" "+r+"'><\/span><\/a><\/td>"},addSubGrid:function(t,i){return this.each(function(){var r=this;if(r.grid){var u,e,v,f,h,c=n.jgrid.styleUI[r.p.styleUI||"jQueryUI"].base,s=n.jgrid.styleUI[r.p.styleUI||"jQueryUI"].common,l=function(t,i,u){var f=n("<td align='"+r.p.subGridModel[0].align[u]+"'><\/td>").html(i);n(t).append(f)},y=function(t,i){for(var o,e,h=n("<table class='"+c.rowTable+" ui-common-table'><tbody><\/tbody><\/table>"),f=n("<tr><\/tr>"),a,u=0;u<r.p.subGridModel[0].name.length;u++)o=n("<th class='"+c.headerBox+" ui-th-subgrid ui-th-column ui-th-"+r.p.direction+"'><\/th>"),n(o).html(r.p.subGridModel[0].name[u]),n(o).width(r.p.subGridModel[0].width[u]),n(f).append(o);return n(h).append(f),t&&(e=r.p.xmlReader.subgrid,n(e.root+" "+e.row,t).each(function(){if(f=n("<tr class='"+s.content+" ui-subtblcell'><\/tr>"),!0===e.repeatitems)n(e.cell,this).each(function(t){l(f,n(this).text()||"&#160;",t)});else{var t=r.p.subGridModel[0].mapping||r.p.subGridModel[0].name;if(t)for(u=0;u<t.length;u++)l(f,n(t[u],this).text()||"&#160;",u)}n(h).append(f)})),a=n("table:first",r.grid.bDiv).attr("id")+"_",n("#"+n.jgrid.jqID(a+i)).append(h),r.grid.hDiv.loading=!1,n("#load_"+n.jgrid.jqID(r.p.id)).hide(),!1},p=function(t,i){for(var a,y,e,h,u,p=n("<table class='"+c.rowTable+" ui-common-table'><tbody><\/tbody><\/table>"),o=n("<tr><\/tr>"),v,w,f=0;f<r.p.subGridModel[0].name.length;f++)a=n("<th class='"+c.headerBox+" ui-th-subgrid ui-th-column ui-th-"+r.p.direction+"'><\/th>"),n(a).html(r.p.subGridModel[0].name[f]),n(a).width(r.p.subGridModel[0].width[f]),n(o).append(a);if(n(p).append(o),t&&(h=r.p.jsonReader.subgrid,void 0!==(y=n.jgrid.getAccessor(t,h.root))))for(f=0;f<y.length;f++){if(e=y[f],o=n("<tr class='"+s.content+" ui-subtblcell'><\/tr>"),!0===h.repeatitems)for(h.cell&&(e=e[h.cell]),u=0;u<e.length;u++)l(o,e[u]||"&#160;",u);else if(v=r.p.subGridModel[0].mapping||r.p.subGridModel[0].name,v.length)for(u=0;u<v.length;u++)l(o,e[v[u]]||"&#160;",u);n(p).append(o)}return w=n("table:first",r.grid.bDiv).attr("id")+"_",n("#"+n.jgrid.jqID(w+i)).append(p),r.grid.hDiv.loading=!1,n("#load_"+n.jgrid.jqID(r.p.id)).hide(),!1},k=function(t){var f,i,u,e;if(f=n(t).attr("id"),i={nd_:(new Date).getTime()},i[r.p.prmNames.subgridid]=f,!r.p.subGridModel[0])return!1;if(r.p.subGridModel[0].params)for(e=0;e<r.p.subGridModel[0].params.length;e++)for(u=0;u<r.p.colModel.length;u++)r.p.colModel[u].name===r.p.subGridModel[0].params[e]&&(i[r.p.colModel[u].name]=n("td:eq("+u+")",t).text().replace(/\&#160\;/gi,""));if(!r.grid.hDiv.loading)switch(r.grid.hDiv.loading=!0,n("#load_"+n.jgrid.jqID(r.p.id)).show(),r.p.subgridtype||(r.p.subgridtype=r.p.datatype),n.isFunction(r.p.subgridtype)?r.p.subgridtype.call(r,i):r.p.subgridtype=r.p.subgridtype.toLowerCase(),r.p.subgridtype){case"xml":case"json":n.ajax(n.extend({type:r.p.mtype,url:n.isFunction(r.p.subGridUrl)?r.p.subGridUrl.call(r,i):r.p.subGridUrl,dataType:r.p.subgridtype,data:n.isFunction(r.p.serializeSubGridData)?r.p.serializeSubGridData.call(r,i):i,complete:function(t){"xml"===r.p.subgridtype?y(t.responseXML,f):p(n.jgrid.parse(t.responseText),f);t=null}},n.jgrid.ajaxOptions,r.p.ajaxSubgridOptions||{}))}return!1},w=0;n.each(r.p.colModel,function(){!0!==this.hidden&&"rn"!==this.name&&"cb"!==this.name||w++});var a,b=r.rows.length,o=1,d=n.isFunction(r.p.isHasSubGrid);for(void 0!==i&&i>0&&(o=i,b=i+1);o<b;)n(r.rows[o]).hasClass("jqgrow")&&(r.p.scroll&&n(r.rows[o].cells[t]).off("click"),a=null,d&&(a=r.p.isHasSubGrid.call(r,r.rows[o].id)),!1===a?r.rows[o].cells[t].innerHTML="":n(r.rows[o].cells[t]).on("click",function(){var i=n(this).parent("tr")[0];if(e=r.p.id,u=i.id,h=n("#"+e+"_"+u+"_expandedContent"),n(this).hasClass("sgcollapsed")){if(f=n(r).triggerHandler("jqGridSubGridBeforeExpand",[e+"_"+u,u]),f=!1!==f&&"stop"!==f,f&&n.isFunction(r.p.subGridBeforeExpand)&&(f=r.p.subGridBeforeExpand.call(r,e+"_"+u,u)),!1===f)return!1;!0===r.p.subGridOptions.reloadOnExpand||!1===r.p.subGridOptions.reloadOnExpand&&!h.hasClass("ui-subgrid")?(v=t>=1?"<td colspan='"+t+"'>&#160;<\/td>":"",n(i).after("<tr role='row' id='"+e+"_"+u+"_expandedContent' class='ui-subgrid ui-sg-expanded'>"+v+"<td class='"+s.content+" subgrid-cell'><span class='"+s.icon_base+" "+r.p.subGridOptions.openicon+"'><\/span><\/td><td colspan='"+parseInt(r.p.colNames.length-1-w,10)+"' class='"+s.content+" subgrid-data'><div id="+e+"_"+u+" class='tablediv'><\/div><\/td><\/tr>"),n(r).triggerHandler("jqGridSubGridRowExpanded",[e+"_"+u,u]),n.isFunction(r.p.subGridRowExpanded)?r.p.subGridRowExpanded.call(r,e+"_"+u,u):k(i)):h.show().removeClass("ui-sg-collapsed").addClass("ui-sg-expanded");n(this).html("<a style='cursor:pointer;' class='ui-sghref'><span class='"+s.icon_base+" "+r.p.subGridOptions.minusicon+"'><\/span><\/a>").removeClass("sgcollapsed").addClass("sgexpanded");r.p.subGridOptions.selectOnExpand&&n(r).jqGrid("setSelection",u)}else if(n(this).hasClass("sgexpanded")){if(f=n(r).triggerHandler("jqGridSubGridRowColapsed",[e+"_"+u,u]),f=!1!==f&&"stop"!==f,f&&n.isFunction(r.p.subGridRowColapsed)&&(f=r.p.subGridRowColapsed.call(r,e+"_"+u,u)),!1===f)return!1;!0===r.p.subGridOptions.reloadOnExpand?h.remove(".ui-subgrid"):h.hasClass("ui-subgrid")&&h.hide().addClass("ui-sg-collapsed").removeClass("ui-sg-expanded");n(this).html("<a style='cursor:pointer;' class='ui-sghref'><span class='"+s.icon_base+" "+r.p.subGridOptions.plusicon+"'><\/span><\/a>").removeClass("sgexpanded").addClass("sgcollapsed");r.p.subGridOptions.selectOnCollapse&&n(r).jqGrid("setSelection",u)}return!1})),o++;!0===r.p.subGridOptions.expandOnLoad&&n(r.rows).filter(".jqgrow").each(function(t,i){n(i.cells[0]).click()});r.subGridXml=function(n,t){y(n,t)};r.subGridJson=function(n,t){p(n,t)}}})},expandSubGridRow:function(t){return this.each(function(){var u=this,i,r;(u.grid||t)&&!0===u.p.subGrid&&(i=n(this).jqGrid("getInd",t,!0),i&&(r=n("td.sgcollapsed",i)[0],r&&n(r).trigger("click")))})},collapseSubGridRow:function(t){return this.each(function(){var u=this,i,r;(u.grid||t)&&!0===u.p.subGrid&&(i=n(this).jqGrid("getInd",t,!0),i&&(r=n("td.sgexpanded",i)[0],r&&n(r).trigger("click")))})},toggleSubGridRow:function(t){return this.each(function(){var u=this,r,i;(u.grid||t)&&!0===u.p.subGrid&&(r=n(this).jqGrid("getInd",t,!0),r&&(i=n("td.sgcollapsed",r)[0],i?n(i).trigger("click"):(i=n("td.sgexpanded",r)[0])&&n(i).trigger("click")))})}})});!function(n){"use strict";"function"==typeof define&&define.amd?define(["jquery","./grid.base"],n):n(jQuery)}(function(n){"use strict";n.jgrid.extend({groupingSetup:function(){return this.each(function(){var i,r,e,f=this,u=f.p.colModel,t=f.p.groupingView,o=n.jgrid.styleUI[f.p.styleUI||"jQueryUI"].grouping;if(null!==t&&("object"==typeof t||n.isFunction(t)))if(t.plusicon||(t.plusicon=o.icon_plus),t.minusicon||(t.minusicon=o.icon_minus),t.groupField.length){for(void 0===t.visibiltyOnNextGrouping&&(t.visibiltyOnNextGrouping=[]),t.lastvalues=[],t._locgr||(t.groups=[]),t.counters=[],i=0;i<t.groupField.length;i++)t.groupOrder[i]||(t.groupOrder[i]="asc"),t.groupText[i]||(t.groupText[i]="{0}"),"boolean"!=typeof t.groupColumnShow[i]&&(t.groupColumnShow[i]=!0),"boolean"!=typeof t.groupSummary[i]&&(t.groupSummary[i]=!1),t.groupSummaryPos[i]||(t.groupSummaryPos[i]="footer"),!0===t.groupColumnShow[i]?(t.visibiltyOnNextGrouping[i]=!0,n(f).jqGrid("showCol",t.groupField[i])):(t.visibiltyOnNextGrouping[i]=n("#"+n.jgrid.jqID(f.p.id+"_"+t.groupField[i])).is(":visible"),n(f).jqGrid("hideCol",t.groupField[i]));for(t.summary=[],t.hideFirstGroupCol&&n.isArray(t.formatDisplayField)&&!n.isFunction(t.formatDisplayField[0])&&(t.formatDisplayField[0]=function(n){return n}),r=0,e=u.length;r<e;r++)t.hideFirstGroupCol&&(u[r].hidden||t.groupField[0]!==u[r].name||(u[r].formatter=function(){return""})),u[r].summaryType&&(u[r].summaryDivider?t.summary.push({nm:u[r].name,st:u[r].summaryType,v:"",sd:u[r].summaryDivider,vd:"",sr:u[r].summaryRound,srt:u[r].summaryRoundType||"round"}):t.summary.push({nm:u[r].name,st:u[r].summaryType,v:"",sr:u[r].summaryRound,srt:u[r].summaryRoundType||"round"}))}else f.p.grouping=!1;else f.p.grouping=!1})},groupingPrepare:function(t,i){return this.each(function(){for(var o,f,c,e,r=this.p.groupingView,s=this,h=function(){n.isFunction(this.st)?this.v=this.st.call(s,this.v,this.nm,t):(this.v=n(s).jqGrid("groupingCalculations.handler",this.st,this.v,this.nm,this.sr,this.srt,t),"avg"===this.st.toLowerCase()&&this.sd&&(this.vd=n(s).jqGrid("groupingCalculations.handler",this.st,this.vd,this.sd,this.sr,this.srt,t)))},a=r.groupField.length,l=0,u=0;u<a;u++)o=r.groupField[u],c=r.displayField[u],f=t[o],e=null==c?null:t[c],null==e&&(e=f),void 0!==f&&(0===i?(r.groups.push({idx:u,dataIndex:o,value:f,displayValue:e,startRow:i,cnt:1,summary:[]}),r.lastvalues[u]=f,r.counters[u]={cnt:1,pos:r.groups.length-1,summary:n.extend(!0,[],r.summary)},n.each(r.counters[u].summary,h),r.groups[r.counters[u].pos].summary=r.counters[u].summary):"object"==typeof f||(n.isArray(r.isInTheSameGroup)&&n.isFunction(r.isInTheSameGroup[u])?r.isInTheSameGroup[u].call(s,r.lastvalues[u],f,u,r):r.lastvalues[u]===f)?1===l?(r.groups.push({idx:u,dataIndex:o,value:f,displayValue:e,startRow:i,cnt:1,summary:[]}),r.lastvalues[u]=f,r.counters[u]={cnt:1,pos:r.groups.length-1,summary:n.extend(!0,[],r.summary)},n.each(r.counters[u].summary,h),r.groups[r.counters[u].pos].summary=r.counters[u].summary):(r.counters[u].cnt+=1,r.groups[r.counters[u].pos].cnt=r.counters[u].cnt,n.each(r.counters[u].summary,h),r.groups[r.counters[u].pos].summary=r.counters[u].summary):(r.groups.push({idx:u,dataIndex:o,value:f,displayValue:e,startRow:i,cnt:1,summary:[]}),r.lastvalues[u]=f,l=1,r.counters[u]={cnt:1,pos:r.groups.length-1,summary:n.extend(!0,[],r.summary)},n.each(r.counters[u].summary,h),r.groups[r.counters[u].pos].summary=r.counters[u].summary))}),this},groupingToggle:function(t){return this.each(function(){var r=this,v=r.p.groupingView,s=t.split("_"),c=parseInt(s[s.length-2],10);s.splice(s.length-2,2);var u,l,y,p=s.join("_"),h=v.minusicon,a=v.plusicon,d=n("#"+n.jgrid.jqID(t)),i=d.length?d[0].nextSibling:null,w=n("#"+n.jgrid.jqID(t)+" span.tree-wrap-"+r.p.direction),g=function(t){var i=n.map(t.split(" "),function(n){if(n.substring(0,p.length+1)===p+"_")return parseInt(n.substring(p.length+1),10)});if(i.length>0)return i[0]},b=!1,e=!1,o=!!r.p.frozenColumns&&r.p.id+"_frozen",k=!!o&&n("#"+n.jgrid.jqID(t),"#"+n.jgrid.jqID(o)),f=k&&k.length?k[0].nextSibling:null;if(w.hasClass(h)){if(i)for(;i&&!(void 0!==(u=g(i.className))&&u<=c);)y=parseInt(n(i).attr("jqfootlevel"),10),e=!isNaN(y)&&v.showSummaryOnHide&&y<=c,e||n(i).hide(),i=i.nextSibling,o&&(e||n(f).hide(),f=f.nextSibling);w.removeClass(h).addClass(a);b=!0}else{if(i)for(l=void 0;i;){if(u=g(i.className),void 0===l&&(l=void 0===u),e=n(i).hasClass("ui-subgrid")&&n(i).hasClass("ui-sg-collapsed"),void 0!==u){if(u<=c)break;u===c+1&&(e||(n(i).show().find(">td>span.tree-wrap-"+r.p.direction).removeClass(h).addClass(a),o&&n(f).show().find(">td>span.tree-wrap-"+r.p.direction).removeClass(h).addClass(a)))}else l&&(e||(n(i).show(),o&&n(f).show()));i=i.nextSibling;o&&(f=f.nextSibling)}w.removeClass(a).addClass(h)}n(r).triggerHandler("jqGridGroupingClickGroup",[t,b]);n.isFunction(r.p.onClickGroup)&&r.p.onClickGroup.call(r,t,b)}),!1},groupingRender:function(t,i,r,u){return this.each(function(){function g(n,t,i){var r,u=!1,f;if(0===t)u=i[n];else if(f=i[n].idx,0===f)u=i[n];else for(r=n;r>=0;r--)if(i[r].idx===f-t){u=i[r];break}return u}function k(t,r,u,f,o){for(var a,c,v,h=g(t,r,u),l=e.p.colModel,y=h.cnt,p="",w=!1,s=f;s<i;s++)l[s].hidden?c="<td "+e.formatCol(s,1,"")+">&#160;<\/td>":!w&&o?(c=o,w=!0):c="<td "+e.formatCol(s,1,"")+">&#160;<\/td>",n.each(h.summary,function(){if(this.nm===l[s].name){v=l[s].summaryTpl?l[s].summaryTpl:"{0}";"string"==typeof this.st&&"avg"===this.st.toLowerCase()&&(this.sd&&this.vd?this.v=this.v/this.vd:this.v&&y>0&&(this.v=this.v/y));try{this.groupCount=h.cnt;this.groupIndex=h.dataIndex;this.groupValue=h.value;a=e.formatter("",this.v,s,this)}catch(n){a=this.v}return c="<td "+e.formatCol(s,1,"")+">"+n.jgrid.template(v,a,h.cnt,h.dataIndex,h.displayValue)+"<\/td>",!1}}),p+=c;return p}var s,l,h,e=this,f=e.p.groupingView,o="",v="",y=f.groupCollapse?f.plusicon:f.minusicon,p=[],d=f.groupField.length,a=n.jgrid.styleUI[e.p.styleUI||"jQueryUI"].common,w,c,b;y=y+" tree-wrap-"+e.p.direction;n.each(e.p.colModel,function(n,t){for(var i=0;i<d;i++)if(f.groupField[i]===t.name){p[i]=n;break}});c=0;b=n.makeArray(f.groupSummary);b.reverse();w=e.p.multiselect?' colspan="2"':"";n.each(f.groups,function(g,nt){var tt,rt,ot;if(f._locgr&&!(nt.startRow+nt.cnt>(r-1)*u&&nt.startRow<r*u))return!0;c++;l=e.p.id+"ghead_"+nt.idx;s=l+"_"+g;v="<span style='cursor:pointer;margin-right:8px;margin-left:5px;' class='"+a.icon_base+" "+y+"' onclick=\"jQuery('#"+n.jgrid.jqID(e.p.id)+"').jqGrid('groupingToggle','"+s+"');return false;\"><\/span>";try{h=n.isArray(f.formatDisplayField)&&n.isFunction(f.formatDisplayField[nt.idx])?f.formatDisplayField[nt.idx].call(e,nt.displayValue,nt.value,e.p.colModel[p[nt.idx]],nt.idx,f):e.formatter(s,nt.displayValue,p[nt.idx],nt.value)}catch(n){h=nt.displayValue}if(tt="",tt=n.isFunction(f.groupText[nt.idx])?f.groupText[nt.idx].call(e,h,nt.cnt,nt.summary):n.jgrid.template(f.groupText[nt.idx],h,nt.cnt,nt.summary),"string"!=typeof tt&&"number"!=typeof tt&&(tt=h),"header"===f.groupSummaryPos[nt.idx]?(o+='<tr id="'+s+'"'+(f.groupCollapse&&nt.idx>0?' style="display:none;" ':" ")+'role="row" class= "'+a.content+" jqgroup ui-row-"+e.p.direction+" "+l+'">',o+=k(g,0,f.groups,""===w?0:1,'<td style="padding-left:'+12*nt.idx+'px;"'+w+">"+v+tt+"<\/td>"),o+="<\/tr>"):o+='<tr id="'+s+'"'+(f.groupCollapse&&nt.idx>0?' style="display:none;" ':" ")+'role="row" class= "'+a.content+" jqgroup ui-row-"+e.p.direction+" "+l+'"><td style="padding-left:'+12*nt.idx+'px;" colspan="'+(!1===f.groupColumnShow[nt.idx]?i-1:i)+'">'+v+tt+"<\/td><\/tr>",d-1===nt.idx){var ut,it,ft=f.groups[g+1],et=0,st=nt.startRow,ht=void 0!==ft?ft.startRow:f.groups[g].startRow+f.groups[g].cnt;for(f._locgr&&(et=(r-1)*u)>nt.startRow&&(st=et),ut=st;ut<ht&&t[ut-et];ut++)o+=t[ut-et].join("");if("header"!==f.groupSummaryPos[nt.idx]){if(void 0!==ft){for(rt=0;rt<f.groupField.length&&ft.dataIndex!==f.groupField[rt];rt++);c=f.groupField.length-rt}for(it=0;it<c;it++)b[it]&&(ot="",f.groupCollapse&&!f.showSummaryOnHide&&(ot=' style="display:none;"'),o+="<tr"+ot+' jqfootlevel="'+(nt.idx-it)+'" role="row" class="'+a.content+" jqfoot ui-row-"+e.p.direction+'">',o+=k(g,it,f.groups,0,!1),o+="<\/tr>");c=rt}}});n("#"+n.jgrid.jqID(e.p.id)+" tbody:first").append(o);o=null})},groupingGroupBy:function(t,i){return this.each(function(){var f=this,u,r;for("string"==typeof t&&(t=[t]),u=f.p.groupingView,f.p.grouping=!0,u._locgr=!1,void 0===u.visibiltyOnNextGrouping&&(u.visibiltyOnNextGrouping=[]),r=0;r<u.groupField.length;r++)!u.groupColumnShow[r]&&u.visibiltyOnNextGrouping[r]&&n(f).jqGrid("showCol",u.groupField[r]);for(r=0;r<t.length;r++)u.visibiltyOnNextGrouping[r]=n("#"+n.jgrid.jqID(f.p.id)+"_"+n.jgrid.jqID(t[r])).is(":visible");f.p.groupingView=n.extend(f.p.groupingView,i||{});u.groupField=t;n(f).trigger("reloadGrid")})},groupingRemove:function(t){return this.each(function(){var i=this,r,u;if(void 0===t&&(t=!0),i.p.grouping=!1,!0===t){for(u=i.p.groupingView,r=0;r<u.groupField.length;r++)!u.groupColumnShow[r]&&u.visibiltyOnNextGrouping[r]&&n(i).jqGrid("showCol",u.groupField);n("tr.jqgroup, tr.jqfoot","#"+n.jgrid.jqID(i.p.id)+" tbody:first").remove();n("tr.jqgrow:hidden","#"+n.jgrid.jqID(i.p.id)+" tbody:first").show()}else n(i).trigger("reloadGrid")})},groupingCalculations:{handler:function(n,t,i,r,u,f){var o={sum:function(){return parseFloat(t||0)+parseFloat(f[i]||0)},min:function(){return""===t?parseFloat(f[i]||0):Math.min(parseFloat(t),parseFloat(f[i]||0))},max:function(){return""===t?parseFloat(f[i]||0):Math.max(parseFloat(t),parseFloat(f[i]||0))},count:function(){return""===t&&(t=0),f.hasOwnProperty(i)?t+1:0},avg:function(){return o.sum()}},e,s;if(!o[n])throw"jqGrid Grouping No such method: "+n;return e=o[n](),null!=r&&("fixed"===u?e=e.toFixed(r):(s=Math.pow(10,r),e=Math.round(e*s)/s)),e}},setGroupHeaders:function(t){return t=n.extend({useColSpanStyle:!1,groupHeaders:[]},t||{}),this.each(function(){var r,a,h,f,e,o,k,u,v,p,d,c,g,y,i=this,w=0,b=i.p.colModel,nt=b.length,tt=i.grid.headers,s=n("table.ui-jqgrid-htable",i.grid.hDiv),et=s.children("thead").children("tr.ui-jqgrid-labels:last").addClass("jqg-second-row-header"),ot=s.children("thead"),l=s.find(".jqg-first-row-header"),it=n.jgrid.styleUI[i.p.styleUI||"jQueryUI"].base,rt,ut,ft;for(i.p.groupHeader||(i.p.groupHeader=[]),i.p.groupHeader.push(t),void 0===l[0]?l=n("<tr>",{role:"row","aria-hidden":"true"}).addClass("jqg-first-row-header").css("height","auto"):l.empty(),ut=function(n,t){for(var r=t.length,i=0;i<r;i++)if(t[i].startColumnName===n)return i;return-1},n(i).prepend(ot),h=n("<tr>",{role:"row"}).addClass("ui-jqgrid-labels jqg-third-row-header"),r=0;r<nt;r++)if(e=tt[r].el,o=n(e),a=b[r],k={height:"0px",width:tt[r].width+"px",display:a.hidden?"none":""},n("<th>",{role:"gridcell"}).css(k).addClass("ui-first-th-"+i.p.direction).appendTo(l),e.style.width="",(u=ut(a.name,t.groupHeaders))>=0){for(v=t.groupHeaders[u],p=v.numberOfColumns,d=v.titleText,g=v.className||"",c=0,u=0;u<p&&r+u<nt;u++)b[r+u].hidden||c++;f=n("<th>").attr({role:"columnheader"}).addClass(it.headerBox+" ui-th-column-header ui-th-"+i.p.direction+" "+g).html(d);c>0&&f.attr("colspan",String(c));i.p.headertitles&&f.attr("title",f.text());0===c&&f.hide();o.before(f);h.append(e);w=p-1}else 0===w?t.useColSpanStyle?(ft=o.attr("rowspan")?parseInt(o.attr("rowspan"),10)+1:2,o.attr("rowspan",ft)):(n("<th>",{role:"columnheader"}).addClass(it.headerBox+" ui-th-column-header ui-th-"+i.p.direction).css({display:a.hidden?"none":""}).insertBefore(o),h.append(e)):(h.append(e),w--);y=n(i).children("thead");y.prepend(l);h.insertAfter(et);s.append(y);t.useColSpanStyle&&(s.find("span.ui-jqgrid-resize").each(function(){var t=n(this).parent();t.is(":visible")&&(this.style.cssText="height: "+t.height()+"px !important; cursor: col-resize;")}),s.find("div.ui-jqgrid-sortable").each(function(){var t=n(this),i=t.parent();i.is(":visible")&&i.is(":has(span.ui-jqgrid-resize)")&&t.css("top",(i.height()-t.outerHeight())/2-4+"px")}));rt=y.find("tr.jqg-first-row-header");n(i).on("jqGridResizeStop.setGroupHeaders",function(n,t,i){rt.find("th").eq(i)[0].style.width=t+"px"})})},destroyGroupHeader:function(t){return void 0===t&&(t=!0),this.each(function(){var f,i,h,u,r,e,c,o=this,s=o.grid,l=n("table.ui-jqgrid-htable thead",s.hDiv),a=o.p.colModel;if(s){for(n(this).off(".setGroupHeaders"),f=n("<tr>",{role:"row"}).addClass("ui-jqgrid-labels"),u=s.headers,i=0,h=u.length;i<h;i++){c=a[i].hidden?"none":"";r=n(u[i].el).width(u[i].width).css("display",c);try{r.removeAttr("rowSpan")}catch(n){r.attr("rowSpan",1)}f.append(r);e=r.children("span.ui-jqgrid-resize");e.length>0&&(e[0].style.height="");r.children("div")[0].style.top=""}n(l).children("tr.ui-jqgrid-labels").remove();n(l).prepend(f);!0===t&&n(o).jqGrid("setGridParam",{groupHeader:null})}})}})});!function(n){"use strict";"function"==typeof define&&define.amd?define(["jquery","./grid.base"],n):n(jQuery)}(function(n){"use strict";n.jgrid.extend({setTreeNode:function(t,i){return this.each(function(){var r=this,k,d;if(r.grid&&r.p.treeGrid){var w,b,e,l,a,o,u,v,y=r.p.expColInd,s=r.p.treeReader.expanded_field,f=r.p.treeReader.leaf_field,g=r.p.treeReader.level_field,p=r.p.treeReader.icon_field,h=r.p.treeReader.loaded,nt=n.jgrid.styleUI[r.p.styleUI||"jQueryUI"].common,c=t;for(n(r).triggerHandler("jqGridBeforeSetTreeNode",[c,i]),n.isFunction(r.p.beforeSetTreeNode)&&r.p.beforeSetTreeNode.call(r,c,i);t<i;)k=n.jgrid.stripPref(r.p.idPrefix,r.rows[t].id),d=r.p._index[k],u=r.p.data[d],"nested"===r.p.treeGridModel&&(u[f]||(w=parseInt(u[r.p.treeReader.left_field],10),b=parseInt(u[r.p.treeReader.right_field],10),u[f]=b===w+1?"true":"false",r.rows[t].cells[r.p._treeleafpos].innerHTML=u[f])),e=parseInt(u[g],10),0===r.p.tree_root_level?(l=e+1,a=e):(l=e,a=e-1),o="<div class='tree-wrap tree-wrap-"+r.p.direction+"' style='width:"+18*l+"px;'>",o+="<div style='"+("rtl"===r.p.direction?"right:":"left:")+18*a+"px;' class='"+nt.icon_base+" ",void 0!==u[h]&&(u[h]="true"===u[h]||!0===u[h]?!0:!1),"true"===u[f]||!0===u[f]?(o+=(void 0!==u[p]&&""!==u[p]?u[p]:r.p.treeIcons.leaf)+" tree-leaf treeclick",u[f]=!0,v="leaf"):(u[f]=!1,v=""),u[s]=("true"===u[s]||!0===u[s])&&(u[h]||void 0===u[h]),o+=!1===u[s]?!0===u[f]?"'":r.p.treeIcons.plus+" tree-plus treeclick'":!0===u[f]?"'":r.p.treeIcons.minus+" tree-minus treeclick'",o+="><\/div><\/div>",n(r.rows[t].cells[y]).wrapInner("<span class='cell-wrapper"+v+"'><\/span>").prepend(o),e!==parseInt(r.p.tree_root_level,10)&&(n(r).jqGrid("isVisibleNode",u)||n(r.rows[t]).css("display","none")),n(r.rows[t].cells[y]).find("div.treeclick").on("click",function(t){var u=t.target||t.srcElement,e=n.jgrid.stripPref(r.p.idPrefix,n(u,r.rows).closest("tr.jqgrow")[0].id),i=r.p._index[e];return r.p.data[i][f]||(r.p.data[i][s]?(n(r).jqGrid("collapseRow",r.p.data[i]),n(r).jqGrid("collapseNode",r.p.data[i])):(n(r).jqGrid("expandRow",r.p.data[i]),n(r).jqGrid("expandNode",r.p.data[i]))),!1}),!0===r.p.ExpandColClick&&n(r.rows[t].cells[y]).find("span.cell-wrapper").css("cursor","pointer").on("click",function(t){var e=t.target||t.srcElement,u=n.jgrid.stripPref(r.p.idPrefix,n(e,r.rows).closest("tr.jqgrow")[0].id),i=r.p._index[u];return r.p.data[i][f]||(r.p.data[i][s]?(n(r).jqGrid("collapseRow",r.p.data[i]),n(r).jqGrid("collapseNode",r.p.data[i])):(n(r).jqGrid("expandRow",r.p.data[i]),n(r).jqGrid("expandNode",r.p.data[i]))),n(r).jqGrid("setSelection",u),!1}),t++;n(r).triggerHandler("jqGridAfterSetTreeNode",[c,i]);n.isFunction(r.p.afterSetTreeNode)&&r.p.afterSetTreeNode.call(r,c,i)}})},setTreeGrid:function(){return this.each(function(){var u,i,f,e,t=this,r=0,s=!1,h=[],o=n.jgrid.styleUI[t.p.styleUI||"jQueryUI"].treegrid;if(t.p.treeGrid){t.p.treedatatype||n.extend(t.p,{treedatatype:t.p.datatype});t.p.loadonce&&(t.p.treedatatype="local");t.p.subGrid=!1;t.p.altRows=!1;t.p.treeGrid_bigData||(t.p.pgbuttons=!1,t.p.pginput=!1,t.p.rowList=[]);t.p.gridview=!0;null!==t.p.rowTotal||t.p.treeGrid_bigData||(t.p.rowNum=1e4);t.p.multiselect=!1;t.p.expColInd=0;u=o.icon_plus;"jQueryUI"===t.p.styleUI&&(u+="rtl"===t.p.direction?"w":"e");t.p.treeIcons=n.extend({plus:u,minus:o.icon_minus,leaf:o.icon_leaf},t.p.treeIcons||{});"nested"===t.p.treeGridModel?t.p.treeReader=n.extend({level_field:"level",left_field:"lft",right_field:"rgt",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},t.p.treeReader):"adjacency"===t.p.treeGridModel&&(t.p.treeReader=n.extend({level_field:"level",parent_id_field:"parent",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},t.p.treeReader));for(f in t.p.colModel)if(t.p.colModel.hasOwnProperty(f)){i=t.p.colModel[f].name;i!==t.p.ExpandColumn||s||(s=!0,t.p.expColInd=r);r++;for(e in t.p.treeReader)t.p.treeReader.hasOwnProperty(e)&&t.p.treeReader[e]===i&&h.push(i)}n.each(t.p.treeReader,function(i,u){u&&-1===n.inArray(u,h)&&("leaf_field"===i&&(t.p._treeleafpos=r),r++,t.p.colNames.push(u),t.p.colModel.push({name:u,width:1,hidden:!0,sortable:!1,resizable:!1,hidedlg:!0,editable:!0,search:!1}))})}})},expandRow:function(t){this.each(function(){var i=this,e;if(i.p.treeGrid_bigData||(e=i.p.lastpage),i.grid&&i.p.treeGrid){var r=n(i).jqGrid("getNodeChildren",t),o=i.p.treeReader.expanded_field,f=t[i.p.localReader.id],u=n(i).triggerHandler("jqGridBeforeExpandTreeGridRow",[f,t,r]);void 0===u&&(u=!0);u&&n.isFunction(i.p.beforeExpandTreeGridRow)&&(u=i.p.beforeExpandTreeGridRow.call(i,f,t,r));!1!==u&&(n(r).each(function(){var t=i.p.idPrefix+n.jgrid.getAccessor(this,i.p.localReader.id);n(n(i).jqGrid("getGridRowById",t)).css("display","");this[o]&&n(i).jqGrid("expandRow",this)}),n(i).triggerHandler("jqGridAfterExpandTreeGridRow",[f,t,r]),n.isFunction(i.p.afterExpandTreeGridRow)&&i.p.afterExpandTreeGridRow.call(i,f,t,r),i.p.treeGrid_bigData||(i.p.lastpage=e))}})},collapseRow:function(t){this.each(function(){var i=this;if(i.grid&&i.p.treeGrid){var r=n(i).jqGrid("getNodeChildren",t),e=i.p.treeReader.expanded_field,f=t[i.p.localReader.id],u=n(i).triggerHandler("jqGridBeforeCollapseTreeGridRow",[f,t,r]);void 0===u&&(u=!0);u&&n.isFunction(i.p.beforeCollapseTreeGridRow)&&(u=i.p.beforeCollapseTreeGridRow.call(i,f,t,r));!1!==u&&(n(r).each(function(){var t=i.p.idPrefix+n.jgrid.getAccessor(this,i.p.localReader.id);n(n(i).jqGrid("getGridRowById",t)).css("display","none");this[e]&&n(i).jqGrid("collapseRow",this)}),n(i).triggerHandler("jqGridAfterCollapseTreeGridRow",[f,t,r]),n.isFunction(i.p.afterCollapseTreeGridRow)&&i.p.afterCollapseTreeGridRow.call(i,f,t,r))}})},getRootNodes:function(t){var i=[];return this.each(function(){var e,u,f,r=this;if(r.grid&&r.p.treeGrid)switch("boolean"!=typeof t&&(t=!1),f=t?n(r).jqGrid("getRowData",null,!0):r.p.data,r.p.treeGridModel){case"nested":e=r.p.treeReader.level_field;n(f).each(function(){parseInt(this[e],10)===parseInt(r.p.tree_root_level,10)&&(t?i.push(r.p.data[r.p._index[this[r.p.keyName]]]):i.push(this))});break;case"adjacency":u=r.p.treeReader.parent_id_field;n(f).each(function(){null!==this[u]&&"null"!==String(this[u]).toLowerCase()||(t?i.push(r.p.data[r.p._index[this[r.p.keyName]]]):i.push(this))})}}),i},getNodeDepth:function(t){var i=null;return this.each(function(){var r,u;if(this.grid&&this.p.treeGrid){r=this;switch(r.p.treeGridModel){case"nested":u=r.p.treeReader.level_field;i=parseInt(t[u],10)-parseInt(r.p.tree_root_level,10);break;case"adjacency":i=n(r).jqGrid("getNodeAncestors",t).length}}}),i},getNodeParent:function(t){var i=null;return this.each(function(){var r=this;if(r.grid&&r.p.treeGrid)switch(r.p.treeGridModel){case"nested":var f=r.p.treeReader.left_field,e=r.p.treeReader.right_field,o=r.p.treeReader.level_field,h=parseInt(t[f],10),c=parseInt(t[e],10),l=parseInt(t[o],10);n(this.p.data).each(function(){if(parseInt(this[o],10)===l-1&&parseInt(this[f],10)<h&&parseInt(this[e],10)>c)return i=this,!1});break;case"adjacency":for(var a=r.p.treeReader.parent_id_field,s=r.p.localReader.id,v=t[s],u=r.p._index[v];u--;)if(String(r.p.data[u][s])===String(n.jgrid.stripPref(r.p.idPrefix,t[a]))){i=r.p.data[u];break}}}),i},getNodeChildren:function(t,i){var r=[];return this.each(function(){var u=this,f,e,o,l,a;if(u.grid&&u.p.treeGrid){o=i?this.rows.length:this.p.data.length;switch(u.p.treeGridModel){case"nested":var s=u.p.treeReader.left_field,h=u.p.treeReader.right_field,c=u.p.treeReader.level_field,v=parseInt(t[s],10),y=parseInt(t[h],10),p=parseInt(t[c],10);for(f=0;f<o;f++)(e=i?u.p.data[u.p._index[this.rows[f].id]]:u.p.data[f])&&parseInt(e[c],10)===p+1&&parseInt(e[s],10)>v&&parseInt(e[h],10)<y&&r.push(e);break;case"adjacency":for(l=u.p.treeReader.parent_id_field,a=u.p.localReader.id,f=0;f<o;f++)(e=i?u.p.data[u.p._index[this.rows[f].id]]:u.p.data[f])&&String(e[l])===String(n.jgrid.stripPref(u.p.idPrefix,t[a]))&&r.push(e)}}}),r},getFullTreeNode:function(t,i){var r=[];return this.each(function(){var e,u=this,o=u.p.treeReader.expanded_field,h,c;if(u.grid&&u.p.treeGrid)switch(null!=i&&"boolean"==typeof i||(i=!1),u.p.treeGridModel){case"nested":var f=u.p.treeReader.left_field,l=u.p.treeReader.right_field,s=u.p.treeReader.level_field,a=parseInt(t[f],10),v=parseInt(t[l],10),y=parseInt(t[s],10);n(this.p.data).each(function(){parseInt(this[s],10)>=y&&parseInt(this[f],10)>=a&&parseInt(this[f],10)<=v&&(i&&(this[o]=!0),r.push(this))});break;case"adjacency":t&&(r.push(t),h=u.p.treeReader.parent_id_field,c=u.p.localReader.id,n(this.p.data).each(function(t){for(e=r.length,t=0;t<e;t++)if(String(n.jgrid.stripPref(u.p.idPrefix,r[t][c]))===String(this[h])){i&&(this[o]=!0);r.push(this);break}}))}}),r},getNodeAncestors:function(t,i,r){var u=[];return void 0===i&&(i=!1),this.each(function(){if(this.grid&&this.p.treeGrid){r=void 0!==r&&this.p.treeReader.expanded_field;for(var f=n(this).jqGrid("getNodeParent",t);f;){if(r)try{f[r]=!0}catch(n){}i?u.unshift(f):u.push(f);f=n(this).jqGrid("getNodeParent",f)}}}),u},isVisibleNode:function(t){var i=!0;return this.each(function(){var r=this,u,f;r.grid&&r.p.treeGrid&&(u=n(r).jqGrid("getNodeAncestors",t),f=r.p.treeReader.expanded_field,n(u).each(function(){if(!(i=i&&this[f]))return!1}))}),i},isNodeLoaded:function(t){var i;return this.each(function(){var r=this,f,u;r.grid&&r.p.treeGrid&&(f=r.p.treeReader.leaf_field,u=r.p.treeReader.loaded,i=void 0!==t&&(void 0!==t[u]?t[u]:!!(t[f]||n(r).jqGrid("getNodeChildren",t).length>0)))}),i},setLeaf:function(t,i,r){return this.each(function(){var e=n.jgrid.getAccessor(t,this.p.localReader.id),o=n("#"+e,this.grid.bDiv)[0],s=this.p.treeReader.leaf_field,u,f;try{u=this.p._index[e];null!=u&&(this.p.data[u][s]=i)}catch(n){}!0===i?n("div.treeclick",o).removeClass(this.p.treeIcons.minus+" tree-minus "+this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.leaf+" tree-leaf"):!1===i&&(f=this.p.treeIcons.minus+" tree-minus",r&&(f=this.p.treeIcons.plus+" tree-plus"),n("div.treeclick",o).removeClass(this.p.treeIcons.leaf+" tree-leaf").addClass(f))})},reloadNode:function(t,i){return this.each(function(){var e,f;if(this.grid&&this.p.treeGrid){e=this.p.localReader.id;f=this.p.selrow;n(this).jqGrid("delChildren",t[e]);void 0===i&&(i=!1);i||jQuery._data(this,"events").jqGridAfterSetTreeNode||n(this).on("jqGridAfterSetTreeNode.reloadNode",function(){var r=this.p.treeReader.leaf_field,t,i;this.p.reloadnode&&(t=this.p.reloadnode,i=n(this).jqGrid("getNodeChildren",t),t[r]&&i.length?n(this).jqGrid("setLeaf",t,!1):t[r]||0!==i.length||n(this).jqGrid("setLeaf",t,!0));this.p.reloadnode=!1});var s=this.p.treeReader.expanded_field,h=this.p.treeReader.parent_id_field,c=this.p.treeReader.loaded,o=this.p.treeReader.level_field,l=this.p.treeReader.leaf_field,a=this.p.treeReader.left_field,v=this.p.treeReader.right_field,r=n.jgrid.getAccessor(t,this.p.localReader.id),u=n("#"+r,this.grid.bDiv)[0];t[s]=!0;t[l]||n("div.treeclick",u).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus");this.p.treeANode=u.rowIndex;this.p.datatype=this.p.treedatatype;this.p.reloadnode=t;i&&(this.p.treeANode=u.rowIndex>0?u.rowIndex-1:1,n(this).jqGrid("delRowData",r));"nested"===this.p.treeGridModel?n(this).jqGrid("setGridParam",{postData:{nodeid:r,n_left:t[a],n_right:t[v],n_level:t[o]}}):n(this).jqGrid("setGridParam",{postData:{nodeid:r,parentid:t[h],n_level:t[o]}});n(this).trigger("reloadGrid");t[c]=!0;"nested"===this.p.treeGridModel?n(this).jqGrid("setGridParam",{selrow:f,postData:{nodeid:"",n_left:"",n_right:"",n_level:""}}):n(this).jqGrid("setGridParam",{selrow:f,postData:{nodeid:"",parentid:"",n_level:""}})}})},expandNode:function(t){return this.each(function(){if(this.grid&&this.p.treeGrid){var e=this,u=this.p.treeReader.expanded_field,s=this.p.treeReader.parent_id_field,h=this.p.treeReader.loaded,o=this.p.treeReader.level_field,c=this.p.treeReader.left_field,l=this.p.treeReader.right_field;if(!t[u]){var i=n.jgrid.getAccessor(t,this.p.localReader.id),f=n("#"+this.p.idPrefix+n.jgrid.jqID(i),this.grid.bDiv)[0],a=this.p._index[i],r=n(e).triggerHandler("jqGridBeforeExpandTreeGridNode",[i,t]);if(void 0===r&&(r=!0),r&&n.isFunction(this.p.beforeExpandTreeGridNode)&&(r=this.p.beforeExpandTreeGridNode.call(this,i,t)),!1===r)return;n(this).jqGrid("isNodeLoaded",this.p.data[a])?(t[u]=!0,n("div.treeclick",f).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus")):this.grid.hDiv.loading||(t[u]=!0,n("div.treeclick",f).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus"),this.p.treeANode=f.rowIndex,this.p.datatype=this.p.treedatatype,"nested"===this.p.treeGridModel?n(this).jqGrid("setGridParam",{postData:{nodeid:i,n_left:t[c],n_right:t[l],n_level:t[o]}}):n(this).jqGrid("setGridParam",{postData:{nodeid:i,parentid:t[s],n_level:t[o]}}),n(this).trigger("reloadGrid"),t[h]=!0,"nested"===this.p.treeGridModel?n(this).jqGrid("setGridParam",{postData:{nodeid:"",n_left:"",n_right:"",n_level:""}}):n(this).jqGrid("setGridParam",{postData:{nodeid:"",parentid:"",n_level:""}}));n(e).triggerHandler("jqGridAfterExpandTreeGridNode",[i,t]);n.isFunction(this.p.afterExpandTreeGridNode)&&this.p.afterExpandTreeGridNode.call(this,i,t)}}})},collapseNode:function(t){return this.each(function(){var u,f;if(this.grid&&this.p.treeGrid&&(u=this.p.treeReader.expanded_field,f=this,t[u])){var i=n.jgrid.getAccessor(t,this.p.localReader.id),e=n("#"+this.p.idPrefix+n.jgrid.jqID(i),this.grid.bDiv)[0],r=n(f).triggerHandler("jqGridBeforeCollapseTreeGridNode",[i,t]);if(void 0===r&&(r=!0),r&&n.isFunction(this.p.beforeCollapseTreeGridNode)&&(r=this.p.beforeCollapseTreeGridNode.call(this,i,t)),t[u]=!1,!1===r)return;n("div.treeclick",e).removeClass(this.p.treeIcons.minus+" tree-minus").addClass(this.p.treeIcons.plus+" tree-plus");n(f).triggerHandler("jqGridAfterCollapseTreeGridNode",[i,t]);n.isFunction(this.p.afterCollapseTreeGridNode)&&this.p.afterCollapseTreeGridNode.call(this,i,t)}})},SortTree:function(t,i,r,u){return this.each(function(){if(this.grid&&this.p.treeGrid){var f,l,c,e,o,s=[],h=this,a=n(this).jqGrid("getRootNodes",h.p.search);for(e=n.jgrid.from.call(this,a),e.orderBy(t,i,r,u),o=e.select(),f=0,l=o.length;f<l;f++)c=o[f],s.push(c),n(this).jqGrid("collectChildrenSortTree",s,c,t,i,r,u);n.each(s,function(t){var i=n.jgrid.getAccessor(this,h.p.localReader.id);n("#"+n.jgrid.jqID(h.p.id)+" tbody tr:eq("+t+")").after(n("tr#"+n.jgrid.jqID(i),h.grid.bDiv))});e=null;o=null;s=null}})},searchTree:function(t){var f,s,h,c,u,e,o=t.length||0,i=[],l=[],r=[];return this.each(function(){if(this.grid&&this.p.treeGrid&&o)for(f=this.p.localReader.id;o--;)if(i=n(this).jqGrid("getNodeAncestors",t[o],!0,!0),i.push(t[o]),s=i[0][f],-1===n.inArray(s,l))l.push(s),r=r.concat(i);else for(u=0,h=i.length;u<h;u++){var a=!1;for(e=0,c=r.length;e<c;e++)if(i[u][f]===r[e][f]){a=!0;break}a||r.push(i[u])}}),r},collectChildrenSortTree:function(t,i,r,u,f,e){return this.each(function(){if(this.grid&&this.p.treeGrid){var o,l,s,a,h,c;for(a=n(this).jqGrid("getNodeChildren",i,this.p.search),h=n.jgrid.from.call(this,a),h.orderBy(r,u,f,e),c=h.select(),o=0,l=c.length;o<l;o++)s=c[o],t.push(s),n(this).jqGrid("collectChildrenSortTree",t,s,r,u,f,e)}})},setTreeRow:function(t,i){var r=!1;return this.each(function(){var u=this;u.grid&&u.p.treeGrid&&(r=n(u).jqGrid("setRowData",t,i))}),r},delTreeNode:function(t){return this.each(function(){var e,o,l,r,u,i=this,a=i.p.localReader.id,s=i.p.treeReader.left_field,h=i.p.treeReader.right_field,f,c;if(i.grid&&i.p.treeGrid&&(f=i.p._index[t],void 0!==f)){if(o=parseInt(i.p.data[f][h],10),l=o-parseInt(i.p.data[f][s],10)+1,c=n(i).jqGrid("getFullTreeNode",i.p.data[f]),c.length>0)for(e=0;e<c.length;e++)n(i).jqGrid("delRowData",c[e][a]);if("nested"===i.p.treeGridModel){if(r=n.jgrid.from.call(i,i.p.data).greater(s,o,{stype:"integer"}).select(),r.length)for(u in r)r.hasOwnProperty(u)&&(r[u][s]=parseInt(r[u][s],10)-l);if(r=n.jgrid.from.call(i,i.p.data).greater(h,o,{stype:"integer"}).select(),r.length)for(u in r)r.hasOwnProperty(u)&&(r[u][h]=parseInt(r[u][h],10)-l)}}})},delChildren:function(t){return this.each(function(){var s,l,r,u,i=this,a=i.p.localReader.id,h=i.p.treeReader.left_field,c=i.p.treeReader.right_field,f,e,o;if(i.grid&&i.p.treeGrid&&(f=i.p._index[t],void 0!==f)){if(s=parseInt(i.p.data[f][c],10),l=s-parseInt(i.p.data[f][h],10)+1,e=n(i).jqGrid("getFullTreeNode",i.p.data[f]),e.length>0)for(o=0;o<e.length;o++)e[o][a]!==t&&n(i).jqGrid("delRowData",e[o][a]);if("nested"===i.p.treeGridModel){if(r=n.jgrid.from(i.p.data).greater(h,s,{stype:"integer"}).select(),r.length)for(u in r)r.hasOwnProperty(u)&&(r[u][h]=parseInt(r[u][h],10)-l);if(r=n.jgrid.from(i.p.data).greater(c,s,{stype:"integer"}).select(),r.length)for(u in r)r.hasOwnProperty(u)&&(r[u][c]=parseInt(r[u][c],10)-l)}}})},addChildNode:function(t,i,r,u){var f=this[0],rt,w,b,e,o;if(r){var k,d,h,g,c,ut,nt,l,v=f.p.treeReader.expanded_field,y=f.p.treeReader.leaf_field,ft=f.p.treeReader.level_field,et=f.p.treeReader.parent_id_field,a=f.p.treeReader.left_field,s=f.p.treeReader.right_field,tt=f.p.treeReader.loaded,it=0,p=i;if(void 0===u&&(u=!1),null==t){if((c=f.p.data.length-1)>=0)for(;c>=0;)it=Math.max(it,parseInt(f.p.data[c][f.p.localReader.id],10)),c--;t=it+1}if(rt=n(f).jqGrid("getInd",i),(nt=!1,void 0===i||null===i||""===i)?(i=null,p=null,k="last",g=f.p.tree_root_level,c=f.p.data.length+1):(k="after",d=f.p._index[i],h=f.p.data[d],i=h[f.p.localReader.id],g=parseInt(h[ft],10)+1,w=n(f).jqGrid("getFullTreeNode",h),w.length?(c=w[w.length-1][f.p.localReader.id],p=c,c=n(f).jqGrid("getInd",p)+1):c=n(f).jqGrid("getInd",i)+1,h[y]&&(nt=!0,h[v]=!0,n(f.rows[rt]).find("span.cell-wrapperleaf").removeClass("cell-wrapperleaf").addClass("cell-wrapper").end().find("div.tree-leaf").removeClass(f.p.treeIcons.leaf+" tree-leaf").addClass(f.p.treeIcons.minus+" tree-minus"),f.p.data[d][y]=!1,h[tt]=!0)),ut=c+1,void 0===r[v]&&(r[v]=!1),void 0===r[tt]&&(r[tt]=!1),r[ft]=g,void 0===r[y]&&(r[y]=!0),"adjacency"===f.p.treeGridModel&&(r[et]=i),"nested"===f.p.treeGridModel)if(null!==i){if(l=parseInt(h[s],10),b=n.jgrid.from.call(f,f.p.data),b=b.greaterOrEquals(s,l,{stype:"integer"}),e=b.select(),e.length)for(o in e)e.hasOwnProperty(o)&&(e[o][a]=e[o][a]>l?parseInt(e[o][a],10)+2:e[o][a],e[o][s]=e[o][s]>=l?parseInt(e[o][s],10)+2:e[o][s]);r[a]=l;r[s]=l+1}else{if(l=parseInt(n(f).jqGrid("getCol",s,!1,"max"),10),e=n.jgrid.from.call(f,f.p.data).greater(a,l,{stype:"integer"}).select(),e.length)for(o in e)e.hasOwnProperty(o)&&(e[o][a]=parseInt(e[o][a],10)+2);if(e=n.jgrid.from.call(f,f.p.data).greater(s,l,{stype:"integer"}).select(),e.length)for(o in e)e.hasOwnProperty(o)&&(e[o][s]=parseInt(e[o][s],10)+2);r[a]=l+1;r[s]=l+2}(null===i||n(f).jqGrid("isNodeLoaded",h)||nt)&&(n(f).jqGrid("addRowData",t,r,k,p),n(f).jqGrid("setTreeNode",c,ut));h&&!h[v]&&u&&n(f.rows[rt]).find("div.treeclick").click()}}})});!function(n){"use strict";"function"==typeof define&&define.amd?define(["jquery","./grid.base","./grid.grouping"],n):n(jQuery)}(function(n){"use strict";function t(n,t){var i,r,u,f=[];if(!this||"function"!=typeof n||n instanceof RegExp)throw new TypeError;for(u=this.length,i=0;i<u;i++)if(this.hasOwnProperty(i)&&(r=this[i],n.call(t,r,i,this))){f.push(r);break}return f}n.assocArraySize=function(n){var t,i=0;for(t in n)n.hasOwnProperty(t)&&i++;return i};n.jgrid.extend({pivotSetup:function(i,r){var f=[],o=[],c=[],h=[],l=[],s={grouping:!0,groupingView:{groupField:[],groupSummary:[],groupSummaryPos:[]}},e=[],u=n.extend({rowTotals:!1,rowTotalsText:"Total",colTotals:!1,groupSummary:!0,groupSummaryPos:"header",frozenStaticCols:!1},r||{});return this.each(function(){function bt(n,i,r){var u;return u=t.call(n,i,r),u.length>0?u[0]:null}function kt(n,t){var i,u=0,r=!0;for(i in n)if(n.hasOwnProperty(i)){if(n[i]!=this[u]){r=!1;break}if(++u>=this.length)break}return r&&(g=t),r}function dt(t,i,r,u,f){var e;if(n.isFunction(t))e=t.call(gt,i,r,u);else switch(t){case"sum":e=parseFloat(i||0)+parseFloat(u[r]||0);break;case"count":""!==i&&null!=i||(i=0);e=u.hasOwnProperty(r)?i+1:0;break;case"min":e=""===i||null==i?parseFloat(u[r]||0):Math.min(parseFloat(i),parseFloat(u[r]||0));break;case"max":e=""===i||null==i?parseFloat(u[r]||0):Math.max(parseFloat(i),parseFloat(u[r]||0));break;case"avg":e=(parseFloat(i||0)*(f-1)+parseFloat(u[r]||0))/f}return e}function et(t,i,r,u){var e,f,s,p,v,c,k=i.length,w="",a=[],d=1,y,b;for(n.isArray(r)?(p=r.length,a=r):(p=1,a[0]=r),h=[],l=[],h.root=0,s=0;s<p;s++){for(b=[],e=0;e<k;e++){if(v="string"==typeof i[e].aggregator?i[e].aggregator:"cust",null==r)f=n.trim(i[e].member)+"_"+v,y=f,a[0]=i[e].label||v+" "+n.trim(i[e].member);else{y=r[s].replace(/\s+/g,"");try{f=1===k?w+y:w+y+"_"+v+"_"+String(e)}catch(n){}a[s]=r[s]}f=isNaN(parseInt(f,10))?f:f+" ";"avg"===i[e].aggregator&&(c=-1===g?o.length+"_"+f:g+"_"+f,ut[c]?ut[c]++:ut[c]=1,d=ut[c]);u[f]=b[f]=dt(i[e].aggregator,u[f],i[e].member,t,d)}w+=r&&null!=r[s]?r[s].replace(/\s+/g,""):"";h[f]=b;l[f]=a[s]}return u}function pt(n){var r,o,t,h,i,s,c,l,a,y;for(t in n)if(n.hasOwnProperty(t)){if("object"!=typeof n[t]){if("level"===t){if(void 0===ft[n.level]&&(ft[n.level]="",n.level>0&&-1===n.text.indexOf("_r_Totals")&&(e[n.level-1]={useColSpanStyle:!1,groupHeaders:[]})),ft[n.level]!==n.text&&n.children.length&&-1===n.text.indexOf("_r_Totals")&&n.level>0){if(e[n.level-1].groupHeaders.push({titleText:n.label,numberOfColumns:0}),s=e[n.level-1].groupHeaders.length-1,c=0===s?ti:yt,n.level-1==(u.rowTotals?1:0)&&s>0){for(l=0,a=0;a<s;a++)l+=e[n.level-1].groupHeaders[a].numberOfColumns;l&&(c=l+k)}f[c]&&(e[n.level-1].groupHeaders[s].startColumnName=f[c].name,e[n.level-1].groupHeaders[s].numberOfColumns=f.length-c);yt=f.length}ft[n.level]=n.text}if(n.level===v&&"level"===t&&v>0)if(ot>1){y=1;for(r in n.fields)n.fields.hasOwnProperty(r)&&(1===y&&e[v-1].groupHeaders.push({startColumnName:r,numberOfColumns:1,titleText:n.label||n.text}),y++);e[v-1].groupHeaders[e[v-1].groupHeaders.length-1].numberOfColumns=y-1}else e.splice(v-1,1)}if(null!=n[t]&&"object"==typeof n[t]&&pt(n[t]),"level"===t&&n.level>0&&(n.level===(0===v?n.level:v)||-1!==ft[n.level].indexOf("_r_Totals"))){o=0;for(r in n.fields)if(n.fields.hasOwnProperty(r)){i={};for(h in u.aggregates[o])if(u.aggregates[o].hasOwnProperty(h))switch(h){case"member":case"label":case"aggregator":break;default:i[h]=u.aggregates[o][h]}ot>1?(i.name=r,i.label=u.aggregates[o].label||n.label):(i.name=n.text,i.label="_r_Totals"===n.text?u.rowTotalsText:n.label);f.push(i);o++}}}}var w,g,r,k,v,ot,d,nt,gt=this,ni=i.length,lt=0,wt,st,tt,y,a,it,ct;if(u.rowTotals&&u.yDimension.length>0&&(wt=u.yDimension[0].dataName,u.yDimension.splice(0,0,{dataName:wt}),u.yDimension[0].converter=function(){return"_r_Totals"}),k=n.isArray(u.xDimension)?u.xDimension.length:0,v=u.yDimension.length,ot=n.isArray(u.aggregates)?u.aggregates.length:0,0===k||0===ot)throw"xDimension or aggregates optiona are not set!";for(r=0;r<k;r++)st={name:u.xDimension[r].dataName,frozen:u.frozenStaticCols},null==u.xDimension[r].isGroupField&&(u.xDimension[r].isGroupField=!0),st=n.extend(!0,st,u.xDimension[r]),f.push(st);for(var at=k-1,rt={},ut=[];lt<ni;){w=i[lt];tt=[];y=[];d={};r=0;do tt[r]=n.trim(w[u.xDimension[r].dataName]),d[u.xDimension[r].dataName]=tt[r],r++;while(r<k);if(a=0,g=-1,nt=bt(o,kt,tt)){if(g>=0){if(a=0,v>=1){for(a=0;a<v;a++)y[a]=n.trim(w[u.yDimension[a].dataName]),u.yDimension[a].converter&&n.isFunction(u.yDimension[a].converter)&&(y[a]=u.yDimension[a].converter.call(this,y[a],tt,y));nt=et(w,u.aggregates,y,nt)}else 0===v&&(nt=et(w,u.aggregates,null,nt));o[g]=nt}}else{if(a=0,v>=1){for(a=0;a<v;a++)y[a]=n.trim(w[u.yDimension[a].dataName]),u.yDimension[a].converter&&n.isFunction(u.yDimension[a].converter)&&(y[a]=u.yDimension[a].converter.call(this,y[a],tt,y));d=et(w,u.aggregates,y,d)}else 0===v&&(d=et(w,u.aggregates,null,d));o.push(d)}var b,vt=0,p=null,ht=null;for(b in h)if(h.hasOwnProperty(b)){if(0===vt)rt.children&&void 0!==rt.children||(rt={text:b,level:0,children:[],label:b}),p=rt.children;else{for(ht=null,r=0;r<p.length;r++)if(p[r].text===b){ht=p[r];break}ht?p=ht.children:(p.push({children:[],text:b,level:vt,fields:h[b],label:l[b]}),p=p[p.length-1].children)}vt++}lt++}ut=null;var ft=[],yt=f.length,ti=yt;if(v>0&&(e[v-1]={useColSpanStyle:!1,groupHeaders:[]}),pt(rt),u.colTotals)for(ct=o.length;ct--;)for(r=k;r<f.length;r++)it=f[r].name,c[it]?c[it]+=parseFloat(o[ct][it]||0):c[it]=parseFloat(o[ct][it]||0);if(at>0)for(r=0;r<at;r++)f[r].isGroupField&&(s.groupingView.groupField.push(f[r].name),s.groupingView.groupSummary.push(u.groupSummary),s.groupingView.groupSummaryPos.push(u.groupSummaryPos));else s.grouping=!1;s.sortname=f[at].name;s.groupingView.hideFirstGroupCol=!0}),{colModel:f,rows:o,groupOptions:s,groupHeaders:e,summary:c}},jqPivot:function(t,i,r,u){return this.each(function(){function e(t){var l;n.isArray(t)||(t=[]);var u,h,e,s,o=jQuery(f).jqGrid("pivotSetup",t,i),a=n.assocArraySize(o.summary)>0,c=n.jgrid.from.call(f,o.rows);for(i.ignoreCase&&(c=c.ignoreCase()),u=0;u<o.groupOptions.groupingView.groupField.length;u++)h=i.xDimension[u].sortorder?i.xDimension[u].sortorder:"asc",e=i.xDimension[u].sorttype?i.xDimension[u].sorttype:"text",c.orderBy(o.groupOptions.groupingView.groupField[u],h,e,"",e);if(s=i.xDimension.length,r.sortname){for(h=r.sortorder?r.sortorder:"asc",e="text",u=0;u<s;u++)if(i.xDimension[u].dataName===r.sortname){e=i.xDimension[u].sorttype?i.xDimension[u].sorttype:"text";break}c.orderBy(r.sortname,h,e,"",e)}else o.groupOptions.sortname&&s&&(h=i.xDimension[s-1].sortorder?i.xDimension[s-1].sortorder:"asc",e=i.xDimension[s-1].sorttype?i.xDimension[s-1].sorttype:"text",c.orderBy(o.groupOptions.sortname,h,e,"",e));if(jQuery(f).jqGrid(n.extend(!0,{datastr:n.extend(c.select(),a?{userdata:o.summary}:{}),datatype:"jsonstring",footerrow:a,userDataOnFooter:a,colModel:o.colModel,viewrecords:!0,sortname:i.xDimension[0].dataName},o.groupOptions,r||{})),l=o.groupHeaders,l.length)for(u=0;u<l.length;u++)l[u]&&l[u].groupHeaders.length&&jQuery(f).jqGrid("setGroupHeaders",l[u]);i.frozenStaticCols&&jQuery(f).jqGrid("setFrozenColumns")}var f=this;"string"==typeof t?n.ajax(n.extend({url:t,dataType:"json",success:function(t){e(n.jgrid.getAccessor(t,u&&u.reader?u.reader:"rows"))}},u||{})):e(t)})}})});!function(n){"use strict";"function"==typeof define&&define.amd?define(["jquery","./grid.utils","./grid.base"],n):n(jQuery)}(function(n){"use strict";n.jgrid=n.jgrid||{};n.extend(n.jgrid,{saveState:function(t,i){var l,c,a,e,h;if(i=n.extend({useStorage:!0,storageType:"localStorage",beforeSetItem:null,compression:!1,compressionModule:"LZString",compressionMethod:"compressToUTF16",debug:!1,saveData:!0},i||{}),t){var s,o,f="",u="",r=n("#"+t)[0];if(r.grid){if((o=n(r).data("inlineNav"),o&&r.p.inlineNav&&n(r).jqGrid("setGridParam",{_iN:o}),o=n(r).data("filterToolbar"),o&&r.p.filterToolbar&&n(r).jqGrid("setGridParam",{_fT:o}),f=n(r).jqGrid("jqGridExport",{exptype:"jsonstring",ident:"",root:"",data:i.saveData}),u="",i.saveData)&&(u=n(r.grid.bDiv).find(".ui-jqgrid-btable tbody:first").html(),l=u.indexOf("<\/tr>"),u=u.slice(l+5)),n.isFunction(i.beforeSetItem)&&null!=(s=i.beforeSetItem.call(r,f))&&(f=s),i.debug){n("#gbox_tree").prepend('<a id="link_save" target="_blank" download="jqGrid_dump.txt">Click to save Dump Data<\/a>');e=[];h={};e.push("Grid Options\n");e.push(f);e.push("\n");e.push("GridData\n");e.push(u);h.type="plain/text;charset=utf-8";try{c=new File(e,"jqGrid_dump.txt",h)}catch(n){c=new Blob(e,h)}a=URL.createObjectURL(c);n("#link_save").attr("href",a).on("click",function(){n(this).remove()})}if(i.compression&&i.compressionModule)try{s=window[i.compressionModule][i.compressionMethod](f);null!=s&&(f=s,u=window[i.compressionModule][i.compressionMethod](u))}catch(n){}if(i.useStorage&&n.jgrid.isLocalStorage())try{window[i.storageType].setItem("jqGrid"+r.p.id,f);window[i.storageType].setItem("jqGrid"+r.p.id+"_data",u)}catch(n){22===n.code&&alert("Local storage limit is over!")}return f}}},loadState:function(t,i,r){var u,a,h,v,c,s,o,y,f,e,p,w;if(r=n.extend({useStorage:!0,storageType:"localStorage",clearAfterLoad:!1,beforeSetGrid:null,afterSetGrid:null,decompression:!1,decompressionModule:"LZString",decompressionMethod:"decompressFromUTF16",restoreData:!0},r||{}),t){if(s=n("#"+t)[0],r.useStorage)try{i=window[r.storageType].getItem("jqGrid"+s.id);h=window[r.storageType].getItem("jqGrid"+s.id+"_data")}catch(n){}if(i){if(r.decompression&&r.decompressionModule)try{u=window[r.decompressionModule][r.decompressionMethod](i);null!=u&&(i=u,h=window[r.decompressionModule][r.decompressionMethod](h))}catch(n){}if((u=n.jgrid.parseFunc(i))&&"object"===n.type(u)){if(s.grid&&n.jgrid.gridUnload(t),n.isFunction(r.beforeSetGrid)&&(a=r.beforeSetGrid(u))&&"object"===n.type(a)&&(u=a),o=function(n){return n},y={reccount:u.reccount,records:u.records,lastpage:u.lastpage,shrinkToFit:o(u.shrinkToFit),data:o(u.data),datatype:o(u.datatype),grouping:o(u.grouping)},u.shrinkToFit=!1,u.data=[],u.datatype="local",u.grouping=!1,u.inlineNav&&(v=o(u._iN),u._iN=null,delete u._iN),u.filterToolbar&&(c=o(u._fT),u._fT=null,delete u._fT),f=n("#"+t).jqGrid(u),r.restoreData&&""!==n.trim(h)&&f.append(h),f.jqGrid("setGridParam",y),u.storeNavOptions&&u.navGrid&&(f[0].p.navGrid=!1,f.jqGrid("navGrid",u.pager,u.navOptions,u.editOptions,u.addOptions,u.delOptions,u.searchOptions,u.viewOptions),u.navButtons&&u.navButtons.length))for(e=0;e<u.navButtons.length;e++)"sepclass"in u.navButtons[e][1]?f.jqGrid("navSeparatorAdd",u.navButtons[e][0],u.navButtons[e][1]):f.jqGrid("navButtonAdd",u.navButtons[e][0],u.navButtons[e][1]);if((f[0].refreshIndex(),u.subGrid)&&(p=1===u.multiselect?1:0,w=!0===u.rownumbers?1:0,f.jqGrid("addSubGrid",p+w),n.each(f[0].rows,function(t,i){n(i).hasClass("ui-sg-expanded")&&n(f[0].rows[t-1]).find("td.sgexpanded").click().click()})),u.treeGrid)for(var l=1,g=f[0].rows.length,b=u.expColInd,k=u.treeReader.leaf_field,d=u.treeReader.expanded_field;l<g;)n(f[0].rows[l].cells[b]).find("div.treeclick").on("click",function(t){var r=t.target||t.srcElement,e=n.jgrid.stripPref(u.idPrefix,n(r,f[0].rows).closest("tr.jqgrow")[0].id),i=f[0].p._index[e];return f[0].p.data[i][k]||(f[0].p.data[i][d]?(f.jqGrid("collapseRow",f[0].p.data[i]),f.jqGrid("collapseNode",f[0].p.data[i])):(f.jqGrid("expandRow",f[0].p.data[i]),f.jqGrid("expandNode",f[0].p.data[i]))),!1}),!0===u.ExpandColClick&&n(f[0].rows[l].cells[b]).find("span.cell-wrapper").css("cursor","pointer").on("click",function(t){var e=t.target||t.srcElement,r=n.jgrid.stripPref(u.idPrefix,n(e,f[0].rows).closest("tr.jqgrow")[0].id),i=f[0].p._index[r];return f[0].p.data[i][k]||(f[0].p.data[i][d]?(f.jqGrid("collapseRow",f[0].p.data[i]),f.jqGrid("collapseNode",f[0].p.data[i])):(f.jqGrid("expandRow",f[0].p.data[i]),f.jqGrid("expandNode",f[0].p.data[i]))),f.jqGrid("setSelection",r),!1}),l++;u.multiselect&&n.each(u.selarrrow,function(){n("#jqg_"+t+"_"+this)[u.useProp?"prop":"attr"]("checked","checked")});u.inlineNav&&v&&(f.jqGrid("setGridParam",{inlineNav:!1}),f.jqGrid("inlineNav",u.pager,v));u.filterToolbar&&c&&(f.jqGrid("setGridParam",{filterToolbar:!1}),c.restoreFromFilters=!0,f.jqGrid("filterToolbar",c));u.frozenColumns&&f.jqGrid("setFrozenColumns");f[0].updatepager(!0,!0);n.isFunction(r.afterSetGrid)&&r.afterSetGrid(f);r.clearAfterLoad&&(window[r.storageType].removeItem("jqGrid"+s.id),window[r.storageType].removeItem("jqGrid"+s.id+"_data"))}else alert("can not convert to object")}}},isGridInStorage:function(t,i){var r={storageType:"localStorage"},u,f,e;r=n.extend(r,i||{});try{f=window[r.storageType].getItem("jqGrid"+t);e=window[r.storageType].getItem("jqGrid"+t+"_data");u=null!=f&&null!=e&&"string"==typeof f&&"string"==typeof e}catch(n){u=!1}return u},setRegional:function(t,i){var r={storageType:"sessionStorage"};if(r=n.extend(r,i||{}),r.regional){n.jgrid.saveState(t,r);r.beforeSetGrid=function(n){return n.regional=r.regional,n.force_regional=!0,n};n.jgrid.loadState(t,null,r);var f=n("#"+t)[0],o=n(f).jqGrid("getGridParam","colModel"),e=-1,u=n.jgrid.getRegional(f,"nav");n.each(o,function(n){if(this.formatter&&"actions"===this.formatter)return e=n,!1});-1!==e&&u&&n("#"+t+" tbody tr").each(function(){var t=this.cells[e];n(t).find(".ui-inline-edit").attr("title",u.edittitle);n(t).find(".ui-inline-del").attr("title",u.deltitle);n(t).find(".ui-inline-save").attr("title",u.savetitle);n(t).find(".ui-inline-cancel").attr("title",u.canceltitle)});try{window[r.storageType].removeItem("jqGrid"+f.id);window[r.storageType].removeItem("jqGrid"+f.id+"_data")}catch(n){}}},jqGridImport:function(t,i){var u;i=n.extend({imptype:"xml",impstring:"",impurl:"",mtype:"GET",impData:{},xmlGrid:{config:"root>grid",data:"root>rows"},jsonGrid:{config:"grid",data:"data"},ajaxOptions:{}},i||{});var r=(0===t.indexOf("#")?"":"#")+n.jgrid.jqID(t),f=function(t,i){var u,f,e,s=n(i.xmlGrid.config,t)[0],h=n(i.xmlGrid.data,t)[0],o;if(n.grid.xmlToJSON){u=n.jgrid.xmlToJSON(s);for(e in u)u.hasOwnProperty(e)&&(f=u[e]);h?(o=u.grid.datatype,u.grid.datatype="xmlstring",u.grid.datastr=t,n(r).jqGrid(f).jqGrid("setGridParam",{datatype:o})):setTimeout(function(){n(r).jqGrid(f)},0)}else alert("xml2json or parse are not present")},e=function(t,i){var o;if(t&&"string"==typeof t){var f=n.jgrid.parseFunc(t),u=f[i.jsonGrid.config],e=f[i.jsonGrid.data];e?(o=u.datatype,u.datatype="jsonstring",u.datastr=e,n(r).jqGrid(u).jqGrid("setGridParam",{datatype:o})):n(r).jqGrid(u)}};switch(i.imptype){case"xml":n.ajax(n.extend({url:i.impurl,type:i.mtype,data:i.impData,dataType:"xml",complete:function(t,u){"success"===u&&(f(t.responseXML,i),n(r).triggerHandler("jqGridImportComplete",[t,i]),n.isFunction(i.importComplete)&&i.importComplete(t));t=null}},i.ajaxOptions));break;case"xmlstring":i.impstring&&"string"==typeof i.impstring&&(u=n.parseXML(i.impstring),u&&(f(u,i),n(r).triggerHandler("jqGridImportComplete",[u,i]),n.isFunction(i.importComplete)&&i.importComplete(u)));break;case"json":n.ajax(n.extend({url:i.impurl,type:i.mtype,data:i.impData,dataType:"json",complete:function(t){try{e(t.responseText,i);n(r).triggerHandler("jqGridImportComplete",[t,i]);n.isFunction(i.importComplete)&&i.importComplete(t)}catch(n){}t=null}},i.ajaxOptions));break;case"jsonstring":i.impstring&&"string"==typeof i.impstring&&(e(i.impstring,i),n(r).triggerHandler("jqGridImportComplete",[i.impstring,i]),n.isFunction(i.importComplete)&&i.importComplete(i.impstring))}}});n.jgrid.extend({jqGridExport:function(t){t=n.extend({exptype:"xmlstring",root:"grid",ident:"\t",addOptions:{},data:!0},t||{});var i=null;return this.each(function(){if(this.grid){var r=n.extend(!0,{},n(this).jqGrid("getGridParam"),t.addOptions);switch(r.rownumbers&&(r.colNames.splice(0,1),r.colModel.splice(0,1)),r.multiselect&&(r.colNames.splice(0,1),r.colModel.splice(0,1)),r.subGrid&&(r.colNames.splice(0,1),r.colModel.splice(0,1)),r.knv=null,t.data||(r.data=[],r._index={}),t.exptype){case"xmlstring":i="<"+t.root+">"+n.jgrid.jsonToXML(r,{xmlDecl:""})+"<\/"+t.root+">";break;case"jsonstring":i=n.jgrid.stringify(r);t.root&&(i="{"+t.root+":"+i+"}")}}}),i},excelExport:function(t){return t=n.extend({exptype:"remote",url:null,oper:"oper",tag:"excel",beforeExport:null,exporthidden:!1,exportgrouping:!1,exportOptions:{}},t||{}),this.each(function(){var s,h,i,f,e,o;if(this.grid&&"remote"===t.exptype){if(i=n.extend({},this.p.postData),(i[t.oper]=t.tag,n.isFunction(t.beforeExport))&&(f=t.beforeExport.call(this,i),n.isPlainObject(f)&&(i=f)),t.exporthidden){for(var u=this.p.colModel,l=u.length,c=[],r=0;r<l;r++)void 0===u[r].hidden&&(u[r].hidden=!1),c.push({name:u[r].name,hidden:u[r].hidden});e=JSON.stringify(c);"string"==typeof e&&(i.colModel=e)}t.exportgrouping&&"string"==typeof(h=JSON.stringify(this.p.groupingView))&&(i.groupingView=h);o=jQuery.param(i);s=-1!==t.url.indexOf("?")?t.url+"&"+o:t.url+"?"+o;window.location=s}})}})});!function(n){"use strict";"function"==typeof define&&define.amd?define(["jquery","./grid.base","./jquery.fmatter","./grid.utils"],n):n(jQuery)}(function(n){"use strict";n.jgrid=n.jgrid||{};n.extend(n.jgrid,{formatCell:function(t,i,r,u,f,e){var o,s;return void 0!==u.formatter?(s={rowId:"",colModel:u,gid:f.p.id,pos:i,styleUI:"",isExported:!0,exporttype:e},o=n.isFunction(u.formatter)?u.formatter.call(f,t,s,r):n.fmatter?n.fn.fmatter.call(f,u.formatter,t,s,r):t):o=t,o},formatCellCsv:function(n,t){n=null==n?"":String(n);try{n=n.replace(t._regexsep,t.separatorReplace).replace(/\r\n/g,t.replaceNewLine).replace(/\n/g,t.replaceNewLine)}catch(t){n=""}return t.escquote&&(n=n.replace(t._regexquot,t.escquote+t.quote)),-1!==n.indexOf(t.separator)&&-1!==n.indexOf(t.qoute)||(n=t.quote+n+t.quote),n},excelCellPos:function(n){for(var i="A".charCodeAt(0),u="Z".charCodeAt(0),r=u-i+1,t="";n>=0;)t=String.fromCharCode(n%r+i)+t,n=Math.floor(n/r)-1;return t},makeNode:function(t,i,r){var u=t.createElement(i);return r&&(r.attr&&n(u).attr(r.attr),r.children&&n.each(r.children,function(n,t){u.appendChild(t)}),r.text&&u.appendChild(t.createTextNode(r.text))),u},xmlToZip:function(t,i){var s,f,r,h,o,u,a=this,c=new XMLSerializer,l=-1===c.serializeToString(n.parseXML(n.jgrid.excelStrings["xl/worksheets/sheet1.xml"])).indexOf("xmlns:r"),e=[];n.each(i,function(i,v){if(n.isPlainObject(v))s=t.folder(i),a.xmlToZip(s,v);else{if(l){for(f=v.childNodes[0],r=f.attributes.length-1;r>=0;r--){var y=f.attributes[r].nodeName,p=f.attributes[r].nodeValue;-1!==y.indexOf(":")&&(e.push({name:y,value:p}),f.removeAttribute(y))}for(r=0,h=e.length;r<h;r++)o=v.createAttribute(e[r].name.replace(":","_dt_b_namespace_token_")),o.value=e[r].value,f.setAttributeNode(o)}u=c.serializeToString(v);l&&(-1===u.indexOf("<?xml")&&(u='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>'+u),u=u.replace(/_dt_b_namespace_token_/g,":"));u=u.replace(/<row xmlns="" /g,"<row ").replace(/<cols xmlns="">/g,"<cols>").replace(/<mergeCells xmlns="" /g,"<mergeCells ");t.file(i,u)}})},excelStrings:{"_rels/.rels":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml"/><\/Relationships>',"xl/_rels/workbook.xml.rels":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheets/sheet1.xml"/><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="styles.xml"/><\/Relationships>',"[Content_Types].xml":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types"><Default Extension="xml" ContentType="application/xml" /><Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml" /><Default Extension="jpeg" ContentType="image/jpeg" /><Override PartName="/xl/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml" /><Override PartName="/xl/worksheets/sheet1.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml" /><Override PartName="/xl/styles.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml" /><\/Types>',"xl/workbook.xml":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><workbook xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships"><fileVersion appName="xl" lastEdited="5" lowestEdited="5" rupBuild="24816"/><workbookPr showInkAnnotation="0" autoCompressPictures="0"/><bookViews><workbookView xWindow="0" yWindow="0" windowWidth="25600" windowHeight="19020" tabRatio="500"/><\/bookViews><sheets><sheet name="Sheet1" sheetId="1" r:id="rId1"/><\/sheets><\/workbook>',"xl/worksheets/sheet1.xml":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"><sheetData/><\/worksheet>',"xl/styles.xml":'<?xml version="1.0" encoding="UTF-8"?><styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"><numFmts count="7"><numFmt numFmtId="164" formatCode="#,##0.00_- [$$-45C]"/><numFmt numFmtId="165" formatCode="&quot;£&quot;#,##0.00"/><numFmt numFmtId="166" formatCode="[$€-2] #,##0.00"/><numFmt numFmtId="167" formatCode="0.0%"/><numFmt numFmtId="168" formatCode="#,##0;(#,##0)"/><numFmt numFmtId="169" formatCode="#,##0.00;(#,##0.00)"/><numFmt numFmtId="170" formatCode="yyyy/mm/dd;@"/><\/numFmts><fonts count="5" x14ac:knownFonts="1"><font><sz val="11" /><name val="Calibri" /><\/font><font><sz val="11" /><name val="Calibri" /><color rgb="FFFFFFFF" /><\/font><font><sz val="11" /><name val="Calibri" /><b /><\/font><font><sz val="11" /><name val="Calibri" /><i /><\/font><font><sz val="11" /><name val="Calibri" /><u /><\/font><\/fonts><fills count="6"><fill><patternFill patternType="none" /><\/fill><fill/><fill><patternFill patternType="solid"><fgColor rgb="FFD9D9D9" /><bgColor indexed="64" /><\/patternFill><\/fill><fill><patternFill patternType="solid"><fgColor rgb="FFD99795" /><bgColor indexed="64" /><\/patternFill><\/fill><fill><patternFill patternType="solid"><fgColor rgb="ffc6efce" /><bgColor indexed="64" /><\/patternFill><\/fill><fill><patternFill patternType="solid"><fgColor rgb="ffc6cfef" /><bgColor indexed="64" /><\/patternFill><\/fill><\/fills><borders count="2"><border><left /><right /><top /><bottom /><diagonal /><\/border><border diagonalUp="false" diagonalDown="false"><left style="thin"><color auto="1" /><\/left><right style="thin"><color auto="1" /><\/right><top style="thin"><color auto="1" /><\/top><bottom style="thin"><color auto="1" /><\/bottom><diagonal /><\/border><\/borders><cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0" /><\/cellStyleXfs><cellXfs count="67"><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="3" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="3" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="3" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="3" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="3" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment horizontal="left"/><\/xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment horizontal="center"/><\/xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment horizontal="right"/><\/xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment horizontal="fill"/><\/xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment textRotation="90"/><\/xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment wrapText="1"/><\/xf><xf numFmtId="9"   fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="164" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="165" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="166" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="167" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="168" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="169" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="3" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="4" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="1" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="2" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="170" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><\/cellXfs><cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0" /><\/cellStyles><dxfs count="0" /><tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4" /><\/styleSheet>'},excelParsers:[{match:/^\-?\d+\.\d%$/,style:60,fmt:function(n){return n/100}},{match:/^\-?\d+\.?\d*%$/,style:56,fmt:function(n){return n/100}},{match:/^\-?\$[\d,]+.?\d*$/,style:57},{match:/^\-?£[\d,]+.?\d*$/,style:58},{match:/^\-?€[\d,]+.?\d*$/,style:59},{match:/^\-?\d+$/,style:65},{match:/^\-?\d+\.\d{2}$/,style:66},{match:/^\([\d,]+\)$/,style:61,fmt:function(n){return-1*n.replace(/[\(\)]/g,"")}},{match:/^\([\d,]+\.\d{2}\)$/,style:62,fmt:function(n){return-1*n.replace(/[\(\)]/g,"")}},{match:/^\-?[\d,]+$/,style:63},{match:/^\-?[\d,]+\.\d{2}$/,style:64},{match:/^\d{4}\-\d{2}\-\d{2}$/,style:67}]});n.jgrid.extend({exportToCsv:function(t){t=n.extend(!0,{separator:",",separatorReplace:" ",quote:'"',escquote:'"',newLine:"\r\n",replaceNewLine:" ",includeCaption:!0,includeLabels:!0,includeGroupHeader:!0,includeFooter:!0,fileName:"jqGridExport.csv",mimetype:"text/csv;charset=utf-8",returnAsString:!1},t||{});var i="";if(this.each(function(){function ut(t,i){function b(n,t,i){var r,u=!1,f;if(0===t)u=i[n];else if(f=i[n].idx,0===f)u=i[n];else for(r=n;r>=0;r--)if(i[r].idx===f-t){u=i[r];break}return u}function y(t,u,e,o){for(var c,h=b(t,u,e),a=h.cnt,v=new Array(i.collen),y=0,l,s=o;s<k;s++)f[s].exportcol&&(l="{0}",n.each(h.summary,function(){if(this.nm===f[s].name){f[s].summaryTpl&&(l=f[s].summaryTpl);"string"==typeof this.st&&"avg"===this.st.toLowerCase()&&(this.sd&&this.vd?this.v=this.v/this.vd:this.v&&a>0&&(this.v=this.v/a));try{this.groupCount=h.cnt;this.groupIndex=h.dataIndex;this.groupValue=h.value;c=r.formatter("",this.v,s,this)}catch(n){c=this.v}return v[y]=n.jgrid.formatCellCsv(n.jgrid.stripHtml(n.jgrid.template(l,c)),i),!1}}),y++);return v}var h="",u=r.p.groupingView,l=[],p=u.groupField.length,f=r.p.colModel,k=f.length,c=0,e,a,v,w,o;if(n.each(f,function(n,t){for(var i=0;i<p;i++)if(u.groupField[i]===t.name){l[i]=n;break}}),v=n.makeArray(u.groupSummary),v.reverse(),"local"===r.p.datatype&&!r.p.loadonce)for(n(r).jqGrid("groupingSetup"),w=n.jgrid.getMethod("groupingPrepare"),o=0;o<d;o++)w.call(n(r),s[o],o);return n.each(u.groups,function(o,s){var d,b,k;c++;try{e=n.isArray(u.formatDisplayField)&&n.isFunction(u.formatDisplayField[s.idx])?u.formatDisplayField[s.idx].call(r,s.displayValue,s.value,r.p.colModel[l[s.idx]],s.idx,u):r.formatter("",s.displayValue,l[s.idx],s.value)}catch(n){e=s.displayValue}if(d="","string"!=typeof(d=n.isFunction(u.groupText[s.idx])?u.groupText[s.idx].call(r,e,s.cnt,s.summary):n.jgrid.template(u.groupText[s.idx],e,s.cnt,s.summary))&&"number"!=typeof d&&(d=e),b="header"===u.groupSummaryPos[s.idx]?y(o,0,u.groups,0):new Array(i.collen),b[0]=n.jgrid.formatCellCsv(n.jgrid.stripHtml(d),i),h+=b.join(i.separator)+i.newLine,p-1===s.idx){for(var w,tt,nt=u.groups[o+1],it=0,rt=s.startRow,ut=void 0!==nt?nt.startRow:u.groups[o].startRow+u.groups[o].cnt,g=rt;g<ut&&t[g-it];g++){for(tt=t[g-it],a=0,w=0;w<f.length;w++)f[w].exportcol&&(b[a]=n.jgrid.formatCellCsv(n.jgrid.formatCell(tt[f[w].name],w,tt,f[w],r,"csv"),i),a++);h+=b.join(i.separator)+i.newLine}if("header"!==u.groupSummaryPos[s.idx]){if(void 0!==nt){for(k=0;k<u.groupField.length&&nt.dataIndex!==u.groupField[k];k++);c=u.groupField.length-k}for(w=0;w<c;w++)v[w]&&(b=y(o,w,u.groups,0),h+=b.join(i.separator)+i.newLine);c=k}}}),h}var rt,w,a,b,k;t._regexsep=new RegExp(t.separator,"g");t._regexquot=new RegExp(t.quote,"g");var u,v,f,o,c,r=this,s=this.addLocalData(!0),d=s.length,h=r.p.colModel,ft=h.length,et=r.p.colNames,e=0,y="",g="",nt="",tt="",it="",p=[],l=[];if(n.each(h,function(i,r){void 0===r.exportcol&&(r.exportcol=r.hidden?!1:!0);"cb"!==r.name&&"rn"!==r.name&&"subgrid"!==r.name||(r.exportcol=!1);r.exportcol&&(p.push(n.jgrid.formatCellCsv(et[i],t)),l.push(r.name))}),t.includeLabels&&(it=p.join(t.separator)+t.newLine),t.collen=p.length,r.p.grouping)rt=!!r.p.groupingView._locgr,r.p.groupingView._locgr=!1,y+=ut(s,t),r.p.groupingView._locgr=rt;else for(;e<d;){for(v=s[e],f=[],o=0,u=0;u<ft;u++)h[u].exportcol&&(f[o]=n.jgrid.formatCellCsv(n.jgrid.formatCell(v[h[u].name],u,v,h[u],r,"csv"),t),o++);y+=f.join(t.separator)+t.newLine;e++}if(s=null,f=new Array(t.collen),t.includeCaption&&r.p.caption){for(e=t.collen;--e;)f[e]="";f[0]=n.jgrid.formatCellCsv(r.p.caption,t);g+=f.join(t.separator)+t.newLine}if(t.includeGroupHeader&&r.p.groupHeader&&r.p.groupHeader.length)for(w=r.p.groupHeader,u=0;u<w.length;u++){for(a=w[u].groupHeaders,e=0,f=[],c=0;c<l.length;c++){for(f[e]="",o=0;o<a.length;o++)a[o].startColumnName===l[c]&&(f[e]=n.jgrid.formatCellCsv(a[o].titleText,t));e++}nt+=f.join(t.separator)+t.newLine}if(t.includeFooter&&r.p.footerrow&&n(".ui-jqgrid-ftable",this.sDiv).length){for(b=n(r).jqGrid("footerData","get"),u=0,f=[];u<t.collen;)k=l[u],b.hasOwnProperty(k)&&f.push(n.jgrid.formatCellCsv(n.jgrid.stripHtml(b[k]),t)),u++;tt+=f.join(t.separator)+t.newLine}i=g+nt+it+y+tt}),t.returnAsString)return i;n.jgrid.saveAs(i,t.fileName,{type:t.mimetype})},exportToExcel:function(t){t=n.extend(!0,{includeLabels:!0,includeGroupHeader:!0,includeFooter:!0,fileName:"jqGridExport.xlsx",mimetype:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",maxlength:40,onBeforeExport:null,replaceStr:null},t||{});this.each(function(){function at(n){return n.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/[\x00-\x09\x0B\x0C\x0E-\x1F\x7F-\x9F]/g,"")}function vt(t){function w(n,t,i){var r,u=!1,f;if(0===t)u=i[n];else if(f=i[n].idx,0===f)u=i[n];else for(r=n;r>=0;r--)if(i[r].idx===f-t){u=i[r];break}return u}function a(t,u,f,e){for(var c,h=w(t,u,f),a=h.cnt,y=v(i.header),l,s=e;s<b;s++)o[s].exportcol&&(l="{0}",n.each(h.summary,function(){if(this.nm===o[s].name){o[s].summaryTpl&&(l=o[s].summaryTpl);"string"==typeof this.st&&"avg"===this.st.toLowerCase()&&(this.sd&&this.vd?this.v=this.v/this.vd:this.v&&a>0&&(this.v=this.v/a));try{this.groupCount=h.cnt;this.groupIndex=h.dataIndex;this.groupValue=h.value;c=r.formatter("",this.v,s,this)}catch(n){c=this.v}return y[this.nm]=n.jgrid.stripHtml(n.jgrid.template(l,c)),!1}}));return y}function v(n){for(var i={},t=0;t<n.length;t++)i[n[t]]="";return i}var u=r.p.groupingView,c=[],y=u.groupField.length,b=o.length,h=0,f,l,p,e;if(n.each(o,function(n,t){for(var i=0;i<y;i++)if(u.groupField[i]===t.name){c[i]=n;break}}),l=n.makeArray(u.groupSummary),l.reverse(),"local"===r.p.datatype&&!r.p.loadonce)for(n(r).jqGrid("groupingSetup"),p=n.jgrid.getMethod("groupingPrepare"),e=0;e<i.body.length;e++)p.call(n(r),i.body[e],e);n.each(u.groups,function(e,o){var b,p,tt,w;h++;try{f=n.isArray(u.formatDisplayField)&&n.isFunction(u.formatDisplayField[o.idx])?u.formatDisplayField[o.idx].call(r,o.displayValue,o.value,r.p.colModel[c[o.idx]],o.idx,u):r.formatter("",o.displayValue,c[o.idx],o.value)}catch(n){f=o.displayValue}if(b="","string"!=typeof(b=n.isFunction(u.groupText[o.idx])?u.groupText[o.idx].call(r,f,o.cnt,o.summary):n.jgrid.template(u.groupText[o.idx],f,o.cnt,o.summary))&&"number"!=typeof b&&(b=f),p="header"===u.groupSummaryPos[o.idx]?a(e,0,u.groups,0):v(i.header),p[Object.keys(p)[0]]=n.jgrid.stripHtml(new Array(5*o.idx).join(" ")+b),s(p,!0),y-1===o.idx){for(var d,g=u.groups[e+1],nt=0,it=o.startRow,rt=void 0!==g?g.startRow:u.groups[e].startRow+u.groups[e].cnt,k=it;k<rt&&t[k-nt];k++)tt=t[k-nt],s(tt,!1);if("header"!==u.groupSummaryPos[o.idx]){if(void 0!==g){for(w=0;w<u.groupField.length&&g.dataIndex!==u.groupField[w];w++);h=u.groupField.length-w}for(d=0;d<h;d++)l[d]&&(p=a(e,d,u.groups,0),s(p,!0));h=w}}})}for(var r=this,h=n.jgrid.excelStrings,ft=0,u=n.parseXML(h["xl/worksheets/sheet1.xml"]),yt=u.getElementsByTagName("sheetData")[0],g={_rels:{".rels":n.parseXML(h["_rels/.rels"])},xl:{_rels:{"workbook.xml.rels":n.parseXML(h["xl/_rels/workbook.xml.rels"])},"workbook.xml":n.parseXML(h["xl/workbook.xml"]),"styles.xml":n.parseXML(h["xl/styles.xml"]),worksheets:{"sheet1.xml":u}},"[Content_Types].xml":n.parseXML(h["[Content_Types].xml"])},o=r.p.colModel,e=0,i={body:r.addLocalData(!0),header:[],footer:[],width:[],map:[]},nt,y,et,s,l,k,c,st,ht,it,ct,d,lt,rt,a,ut,f=0,v=o.length;f<v;f++)void 0===o[f].exportcol&&(o[f].exportcol=o[f].hidden?!1:!0),"cb"!==o[f].name&&"rn"!==o[f].name&&"subgrid"!==o[f].name&&o[f].exportcol&&(i.header[e]=o[f].name,i.width[e]=5,i.map[e]=f,e++);if(et=n.isFunction(t.replaceStr)?t.replaceStr:at,s=function(f,e){var w,h,c,a,v,s,p,b,l,k;for(nt=ft+1,y=n.jgrid.makeNode(u,"row",{attr:{r:nt}}),w=15,h=0;h<i.header.length;h++){for(v=n.jgrid.excelCellPos(h)+""+nt,s=n.isArray(f)&&e?r.p.colNames[i.map[h]]:f[i.header[h]],null==s&&(s=""),e||(s=n.jgrid.formatCell(s,i.map[h],f,o[i.map[h]],r,"excel")),i.width[h]=Math.max(i.width[h],Math.min(parseInt(s.toString().length,10),t.maxlength)),s.match&&(a=s.match(/^-?([1-9]\d+)(\.(\d+))?$/)),c=null,p=0,b=n.jgrid.excelParsers.length;p<b;p++)if(l=n.jgrid.excelParsers[p],s.match&&!s.match(/^0\d+/)&&s.match(l.match)){s=s.replace(/[^\d\.\-]/g,"");l.fmt&&(s=l.fmt(s));c=67===l.style?n.jgrid.makeNode(u,"c",{attr:{t:"d",r:v,s:l.style},children:[n.jgrid.makeNode(u,"v",{text:s})]}):n.jgrid.makeNode(u,"c",{attr:{r:v,s:l.style},children:[n.jgrid.makeNode(u,"v",{text:s})]});y.appendChild(c);break}c||("number"==typeof s&&s.toString().length<=w||a&&a[1].length+(a[2]?a[3].length:0)<=w?c=n.jgrid.makeNode(u,"c",{attr:{t:"n",r:v},children:[n.jgrid.makeNode(u,"v",{text:s})]}):(k=s.replace?et(s):s,c=n.jgrid.makeNode(u,"c",{attr:{t:"inlineStr",r:v},children:{row:n.jgrid.makeNode(u,"is",{children:{row:n.jgrid.makeNode(u,"t",{text:k})}})}})),y.appendChild(c))}yt.appendChild(y);ft++},n("sheets sheet",g.xl["workbook.xml"]).attr("name",t.sheetName),t.includeGroupHeader&&r.p.groupHeader&&r.p.groupHeader.length){for(var p,ot=r.p.groupHeader,b=[],tt=0,w=0;w<ot.length;w++){for(l=ot[w].groupHeaders,k={},tt++,f=0,f=0;f<i.header.length;f++)for(p=i.header[f],k[p]="",c=0;c<l.length;c++)l[c].startColumnName===p&&(k[p]=l[c].titleText,st=n.jgrid.excelCellPos(f)+tt,ht=n.jgrid.excelCellPos(f+l[c].numberOfColumns-1)+tt,b.push({ref:st+":"+ht}));s(k,!0)}for(n("row c",u).attr("s","2"),it=n.jgrid.makeNode(u,"mergeCells",{attr:{count:b.length}}),n("worksheet",u).append(it),e=0;e<b.length;e++)it.appendChild(n.jgrid.makeNode(u,"mergeCell",{attr:b[e]}))}if(t.includeLabels&&(s(i.header,!0),n("row:last c",u).attr("s","2")),r.p.grouping)ct=!!r.p.groupingView._locgr,r.p.groupingView._locgr=!1,vt(i.body),r.p.groupingView._locgr=ct;else for(d=0,lt=i.body.length;d<lt;d++)s(i.body[d],!1);if(t.includeFooter||r.p.footerrow){i.footer=n(r).jqGrid("footerData","get");for(e in i.footer)i.footer.hasOwnProperty(e)&&(i.footer[e]=n.jgrid.stripHtml(i.footer[e]));s(i.footer,!0);n("row:last c",u).attr("s","2")}for(rt=n.jgrid.makeNode(u,"cols"),n("worksheet",u).prepend(rt),e=0,v=i.width.length;e<v;e++)rt.appendChild(n.jgrid.makeNode(u,"col",{attr:{min:e+1,max:e+1,width:i.width[e],customWidth:1}}));n.isFunction(t.onBeforeExport)&&t.onBeforeExport(g);i=null;try{a=new JSZip;ut={type:"blob",mimeType:t.mimetype};n.jgrid.xmlToZip(a,g);a.generateAsync?a.generateAsync(ut).then(function(i){n.jgrid.saveAs(i,t.fileName,{type:t.mimetype})}):n.jgrid.saveAs(a.generate(ut),t.fileName,{type:t.mimetype})}catch(n){throw n;}})},exportToPdf:function(t){return t=n.extend(!0,{title:null,orientation:"portrait",pageSize:"A4",description:null,onBeforeExport:null,download:"download",includeLabels:!0,includeGroupHeader:!0,includeFooter:!0,fileName:"jqGridExport.pdf",mimetype:"application/pdf"},t||{}),this.each(function(){function ut(t){function y(t,r){for(var h=0,c=[],e=0;e<u.length;e++)s={text:null==t[u[e]]?"":r?n.jgrid.formatCell(t[u[e]]+"",v[h],a[o],f[v[h]],i,"pdf"):t[u[e]],alignment:b[e],style:"tableBody"},c.push(s),h++;return c}function tt(n,t,i){var r,u=!1,f;if(0===t)u=i[n];else if(f=i[n].idx,0===f)u=i[n];else for(r=n;r>=0;r--)if(i[r].idx===f-t){u=i[r];break}return u}function k(t,r,e,o){for(var c,h=tt(t,r,e),a=h.cnt,v=d(u),l,s=o;s<it;s++)f[s].exportcol&&(l="{0}",n.each(h.summary,function(){if(this.nm===f[s].name){f[s].summaryTpl&&(l=f[s].summaryTpl);"string"==typeof this.st&&"avg"===this.st.toLowerCase()&&(this.sd&&this.vd?this.v=this.v/this.vd:this.v&&a>0&&(this.v=this.v/a));try{this.groupCount=h.cnt;this.groupIndex=h.dataIndex;this.groupValue=h.value;c=i.formatter("",this.v,s,this)}catch(n){c=this.v}return v[this.nm]=n.jgrid.stripHtml(n.jgrid.template(l,c)),!1}}));return v}function d(n){for(var i={},t=0;t<n.length;t++)i[n[t]]="";return i}var r=i.p.groupingView,p=[],g=r.groupField.length,f=i.p.colModel,it=f.length,l=0,e,w,nt,h;if(n.each(f,function(n,t){for(var i=0;i<g;i++)if(r.groupField[i]===t.name){p[i]=n;break}}),w=n.makeArray(r.groupSummary),w.reverse(),"local"===i.p.datatype&&!i.p.loadonce)for(n(i).jqGrid("groupingSetup"),nt=n.jgrid.getMethod("groupingPrepare"),h=0;h<a.length;h++)nt.call(n(i),a[h],h);n.each(r.groups,function(f,o){var a,s,it,h;l++;try{e=n.isArray(r.formatDisplayField)&&n.isFunction(r.formatDisplayField[o.idx])?r.formatDisplayField[o.idx].call(i,o.displayValue,o.value,i.p.colModel[p[o.idx]],o.idx,r):i.formatter("",o.displayValue,p[o.idx],o.value)}catch(n){e=o.displayValue}if(a="","string"!=typeof(a=n.isFunction(r.groupText[o.idx])?r.groupText[o.idx].call(i,e,o.cnt,o.summary):n.jgrid.template(r.groupText[o.idx],e,o.cnt,o.summary))&&"number"!=typeof a&&(a=e),s="header"===r.groupSummaryPos[o.idx]?k(f,0,r.groups,0):d(u),s[Object.keys(s)[0]]=n.jgrid.stripHtml(new Array(5*o.idx).join(" ")+a),c.push(y(s,!1)),g-1===o.idx){for(var b,nt=r.groups[f+1],tt=0,rt=o.startRow,ut=void 0!==nt?nt.startRow:r.groups[f].startRow+r.groups[f].cnt,v=rt;v<ut&&t[v-tt];v++)it=t[v-tt],c.push(y(it,!0));if("header"!==r.groupSummaryPos[o.idx]){if(void 0!==nt){for(h=0;h<r.groupField.length&&nt.dataIndex!==r.groupField[h];h++);l=r.groupField.length-h}for(b=0;b<l;b++)w[b]&&(s=k(f,b,r.groups,0),c.push(y(s,!1)));l=h}}})}for(var f,h,i=this,c=[],e=i.p.colModel,s={},a=i.addLocalData(!0),u=[],o=0,v=[],l=[],tt=[],b={},k,d,y,it,g,rt,p,nt,r=0,w=e.length;r<w;r++)void 0===e[r].exportcol&&(e[r].exportcol=e[r].hidden?!1:!0),"cb"!==e[r].name&&"rn"!==e[r].name&&"subgrid"!==e[r].name&&e[r].exportcol&&(s={text:i.p.colNames[r],style:"tableHeader"},l.push(s),u[o]=e[r].name,v[o]=r,tt.push(e[r].width),b[e[r].name]=e[r].align||"left",o++);if(t.includeGroupHeader&&i.p.groupHeader&&i.p.groupHeader.length)for(k=i.p.groupHeader,o=0;o<k.length;o++){for(d=[],y=k[o].groupHeaders,f=0;f<u.length;f++){for(s={text:"",style:"tableHeader"},h=0;h<y.length;h++)y[h].startColumnName===u[f]&&(s={text:y[h].titleText,colSpan:y[h].numberOfColumns,style:"tableHeader"});d.push(s);r++}c.push(d)}if(t.includeLabels&&c.push(l),i.p.grouping)it=!!i.p.groupingView._locgr,i.p.groupingView._locgr=!1,ut(a),i.p.groupingView._locgr=it;else for(o=0,w=a.length;o<w;o++){for(h=0,l=[],g=a[o],f=0;f<u.length;f++)s={text:null==g[u[f]]?"":n.jgrid.formatCell(g[u[f]]+"",v[h],a[o],e[v[h]],i,"pdf"),alignment:b[u[f]],style:"tableBody"},l.push(s),h++;c.push(l)}if(t.includeFooter&&i.p.footerrow){for(rt=n(i).jqGrid("footerData","get"),l=[],f=0;f<u.length;f++)s={text:n.jgrid.stripHtml(rt[u[f]]),style:"tableFooter",alignment:b[u[f]]},l.push(s);c.push(l)}p={pageSize:t.pageSize,pageOrientation:t.orientation,content:[{style:"tableExample",widths:tt,table:{headerRows:null!=k?0:1,body:c}}],styles:{tableHeader:{bold:!0,fontSize:11,color:"#2e6e9e",fillColor:"#dfeffc",alignment:"center"},tableBody:{fontSize:10},tableFooter:{bold:!0,fontSize:11,color:"#2e6e9e",fillColor:"#dfeffc"},title:{alignment:"center",fontSize:15},description:{}},defaultStyle:{fontSize:10}};t.description&&p.content.unshift({text:t.description,style:"description",margin:[0,0,0,12]});t.title&&p.content.unshift({text:t.title,style:"title",margin:[0,0,0,12]});n.isFunction(t.onBeforeExport)&&t.onBeforeExport.call(i,p);try{nt=pdfMake.createPdf(p);"open"===t.download?nt.open():nt.getBuffer(function(i){n.jgrid.saveAs(i,t.fileName,{type:t.mimetype})})}catch(n){throw n;}})},exportToHtml:function(t){t=n.extend(!0,{title:"",onBeforeExport:null,includeLabels:!0,includeGroupHeader:!0,includeFooter:!0,tableClass:"jqgridprint",autoPrint:!1,topText:"",bottomText:"",returnAsString:!1},t||{});var i;return this.each(function(){function w(t){function b(n,t,i){var r,u=!1,f;if(0===t)u=i[n];else if(f=i[n].idx,0===f)u=i[n];else for(r=n;r>=0;r--)if(i[r].idx===f-t){u=i[r];break}return u}function v(t,i,e,o){for(var c,h=b(t,i,e),a=h.cnt,v=y(r.header),l,s=o;s<k;s++)!f[s].hidden&&f[s].exportcol&&(l="{0}",n.each(h.summary,function(){if(this.nm===f[s].name){f[s].summaryTpl&&(l=f[s].summaryTpl);"string"==typeof this.st&&"avg"===this.st.toLowerCase()&&(this.sd&&this.vd?this.v=this.v/this.vd:this.v&&a>0&&(this.v=this.v/a));try{this.groupCount=h.cnt;this.groupIndex=h.dataIndex;this.groupValue=h.value;c=u.formatter("",this.v,s,this)}catch(n){c=this.v}return v[this.nm]=n.jgrid.stripHtml(n.jgrid.template(l,c)),!1}}));return v}function y(n){for(var i={},t=0;t<n.length;t++)i[n[t]]="";return i}var i=u.p.groupingView,c=[],p=i.groupField.length,k=f.length,e=0,h="",o,a,w,s;if(n.each(f,function(n,t){for(var r=0;r<p;r++)if(i.groupField[r]===t.name){c[r]=n;break}}),a=n.makeArray(i.groupSummary),a.reverse(),"local"===u.p.datatype&&!u.p.loadonce)for(n(u).jqGrid("groupingSetup"),w=n.jgrid.getMethod("groupingPrepare"),s=0;s<r.body.length;s++)w.call(n(u),r.body[s],s);return n.each(i.groups,function(f,s){var k,w,tt,rt,b;e++;try{o=n.isArray(i.formatDisplayField)&&n.isFunction(i.formatDisplayField[s.idx])?i.formatDisplayField[s.idx].call(u,s.displayValue,s.value,u.p.colModel[c[s.idx]],s.idx,i):u.formatter("",s.displayValue,c[s.idx],s.value)}catch(n){o=s.displayValue}if(k="","string"!=typeof(k=n.isFunction(i.groupText[s.idx])?i.groupText[s.idx].call(u,o,s.cnt,s.summary):n.jgrid.template(i.groupText[s.idx],o,s.cnt,s.summary))&&"number"!=typeof k&&(k=o),tt=!1,"header"===i.groupSummaryPos[s.idx]?w=v(f,0,i.groups,0):(w=y(r.header),tt=!0),w[Object.keys(w)[0]]=new Array(5*s.idx).join(" ")+k,h+=l(w,"td",!1,1===e,tt),p-1===s.idx){for(var g,nt=i.groups[f+1],it=0,ut=s.startRow,ft=void 0!==nt?nt.startRow:i.groups[f].startRow+i.groups[f].cnt,d=ut;d<ft&&t[d-it];d++)rt=t[d-it],h+=l(rt,"td",!1);if("header"!==i.groupSummaryPos[s.idx]){if(void 0!==nt){for(b=0;b<i.groupField.length&&nt.dataIndex!==i.groupField[b];b++);e=i.groupField.length-b}for(g=0;g<e;g++)a[g]&&(w=v(f,g,i.groups,0),h+=l(w,"td",!1));e=b}}}),h}for(var u=this,f=u.p.colModel,s=0,r={body:u.addLocalData(!0),header:[],footer:[],width:[],map:[],align:[]},p,o,v,e=0,a=f.length;e<a;e++)void 0===f[e].exportcol&&(f[e].exportcol=!0),!f[e].hidden&&"cb"!==f[e].name&&"rn"!==f[e].name&&"subgrid"!==f[e].name&&f[e].exportcol&&(r.header[s]=f[e].name,r.width[s]=f[e].width,r.map[s]=e,r.align[s]=f[e].align||"left",s++);var c=document.createElement("a"),b=function(t){var i=n(t).clone()[0];return"link"===i.nodeName.toLowerCase()&&(i.href=y(i.href)),i.outerHTML},y=function(n){c.href=n;var t=c.host;return-1===t.indexOf("/")&&0!==c.pathname.indexOf("/")&&(t+="/"),c.protocol+"//"+t+c.pathname+c.search},k=function(n,t,i){for(var e,o="<tr>",f=0,s=n.length;f<s;f++)e=!0===i?" style=width:"+r.width[f]+"px;":"",o+="<"+t+e+">"+u.p.colNames[r.map[f]]+"<\/"+t+">";return o+"<\/tr>"},l=function(t,i,e,o,s){for(var c,l,a="<tr>",h=0,v=r.header.length;h<v&&(l=s?' colspan= "'+r.header.length+'" style=text-align:left':!0===o?" style=width:"+r.width[h]+"px;text-align:"+r.align[h]+";":" style=text-align:"+r.align[h]+";",c=r.header[h],t.hasOwnProperty(c)&&(a+="<"+i+l+">"+(e?n.jgrid.formatCell(t[c],r.map[h],t,f[r.map[h]],u,"html"):t[c])+"<\/"+i+">"),!s);h++);return a+"<\/tr>"},h='<table class="'+t.tableClass+'">';if(t.includeLabels&&(h+="<thead>"+k(r.header,"th",!0)+"<\/thead>"),h+="<tbody>",u.p.grouping)p=!!u.p.groupingView._locgr,u.p.groupingView._locgr=!1,h+=w(r.body),u.p.groupingView._locgr=p;else for(s=0,a=r.body.length;s<a;s++)h+=l(r.body[s],"td",!0,0===s);if(t.includeFooter&&u.p.footerrow&&(r.footer=n(u).jqGrid("footerData","get",null,!1),h+=l(r.footer,"td",!1)),h+="<\/tbody>",h+="<\/table>",t.returnAsString)i=h;else{o=window.open("","");o.document.close();v=t.title?"<title>"+t.title+"<\/title>":"";n("style, link").each(function(){v+=b(this)});try{o.document.head.innerHTML=v}catch(t){n(o.document.head).html(v)}o.document.body.innerHTML=(t.title?"<h1>"+t.title+"<\/h1>":"")+"<div>"+(t.topText||"")+"<\/div>"+h+"<div>"+(t.bottomText||"")+"<\/div>";n(o.document.body).addClass("html-view");n("img",o.document.body).each(function(n,t){t.setAttribute("src",y(t.getAttribute("src")))});t.onBeforeExport&&t.onBeforeExport(o);Boolean(o.chrome)?t.autoPrint&&(o.print(),o.close()):setTimeout(function(){t.autoPrint&&(o.print(),o.close())},1e3)}}),i}})});!function(n){"use strict";"function"==typeof define&&define.amd?define(["jquery"],n):n()}(function(){"use strict";$.extend($.jgrid,{stringify:function(n){return JSON.stringify(n,function(n,t){return"function"==typeof t?t.toString():t})},parseFunc:function(n){return JSON.parse(n,function(n,t){if("string"==typeof t&&-1!==t.indexOf("function")){var i=t.split(" ");return i[0]=$.trim(i[0].toLowerCase()),0===i[0].indexOf("function")&&"}"===t.trim().slice(-1)?eval("("+t+")"):t}return t})},encode:function(n){return String(n).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},jsonToXML:function(n,t){var i=$.extend({xmlDecl:'<?xml version="1.0" encoding="UTF-8" ?>\n',attr_prefix:"-",encode:!0},t||{}),r=this,f=function(n,t){return"#text"===n?i.encode?r.encode(t):t:"function"==typeof t?"<"+n+"><![CDATA["+t+"]\]><\/"+n+">\n":""===t?"<"+n+">__EMPTY_STRING_<\/"+n+">\n":"<"+n+">"+(i.encode?r.encode(t):t)+"<\/"+n+">\n"},e=function(n,t){for(var i,r=[],o=0;o<t.length;o++)i=t[o],r[r.length]=void 0===i||null==i?"<"+n+" />":"object"==typeof i&&i.constructor==Array?e(n,i):"object"==typeof i?u(n,i):f(n,i);return r.length||(r[0]="<"+n+">__EMPTY_ARRAY_<\/"+n+">\n"),r.join("")},u=function(n,t){var c=[],a=[],s,o,l,h;for(s in t)t.hasOwnProperty(s)&&(o=t[s],s.charAt(0)!==i.attr_prefix?c[c.length]=null==o?"<"+s+" />":"object"==typeof o&&o.constructor===Array?e(s,o):"object"==typeof o?u(s,o):f(s,o):a[a.length]=" "+s.substring(1)+'="'+(i.encode?r.encode(o):o)+'"');return l=a.join(""),h=c.join(""),null==n||(h=c.length>0?h.match(/\n/)?"<"+n+l+">\n"+h+"<\/"+n+">\n":"<"+n+l+">"+h+"<\/"+n+">\n":"<"+n+l+" />\n"),h},o=u(null,n);return i.xmlDecl+o},xmlToJSON:function(n,t){var r=$.extend({force_array:[],attr_prefix:"-"},t||{}),u,f,e;if(n){if(u={},r.force_array)for(f=0;f<r.force_array.length;f++)u[r.force_array[f]]=1;"string"==typeof n&&(n=$.parseXML(n));n.documentElement&&(n=n.documentElement);var o=function(n,t,i,r){if("string"==typeof r)if(-1!==r.indexOf("function"))r=eval("("+r+")");else switch(r){case"__EMPTY_ARRAY_":r=[];break;case"__EMPTY_STRING_":r="";break;case"false":r=!1;break;case"true":r=!0}u[t]?(1===i&&(n[t]=[]),n[t][n[t].length]=r):1===i?n[t]=r:2===i?n[t]=[n[t],r]:n[t][n[t].length]=r},s=function(n){var u,t,i,h,f,e,c;if(7!==n.nodeType){if(3===n.nodeType||4===n.nodeType)return null==n.nodeValue.match(/[^\x00-\x20]/)?void 0:n.nodeValue;if(f={},n.attributes&&n.attributes.length)for(u={},t=0;t<n.attributes.length;t++)"string"==typeof(i=n.attributes[t].nodeName)&&(h=n.attributes[t].nodeValue)&&(i=r.attr_prefix+i,void 0===f[i]&&(f[i]=0),f[i]++,o(u,i,f[i],h));if(n.childNodes&&n.childNodes.length){for(e=!0,u&&(e=!1),t=0;t<n.childNodes.length&&e;t++)c=n.childNodes[t].nodeType,3!==c&&4!==c&&(e=!1);if(e)for(u||(u=""),t=0;t<n.childNodes.length;t++)u+=n.childNodes[t].nodeValue;else for(u||(u={}),t=0;t<n.childNodes.length;t++)"string"==typeof(i=n.childNodes[t].nodeName)&&(h=s(n.childNodes[t]))&&(void 0===f[i]&&(f[i]=0),f[i]++,o(u,i,f[i],h))}return u}},i=s(n);return(u[n.nodeName]&&(i=[i]),11!==n.nodeType)&&(e={},e[n.nodeName]=i,i=e),i}},saveAs:function(n,t,i){var f,e,u,r;i=$.extend(!0,{type:"plain/text;charset=utf-8"},i||{});u=[];t=null==t||""===t?"jqGridFile.txt":t;$.isArray(n)?u=n:u[0]=n;try{f=new File(u,t,i)}catch(n){f=new Blob(u,i)}window.navigator&&window.navigator.msSaveOrOpenBlob?window.navigator.msSaveOrOpenBlob(f,t):(e=URL.createObjectURL(f),r=document.createElement("a"),r.href=e,r.download=t,document.body.appendChild(r),r.click(),setTimeout(function(){document.body.removeChild(r);window.URL.revokeObjectURL(e)},0))}})});!function(n){"use strict";"function"==typeof define&&define.amd?define(["jquery","./grid.base","jquery-ui/dialog","jquery-ui/draggable","jquery-ui/droppable","jquery-ui/resizable","jquery-ui/sortable","./addons/ui.multiselect"],n):n(jQuery)}(function(n){"use strict";if(n.jgrid.msie()&&8===n.jgrid.msiever()&&(n.expr[":"].hidden=function(n){return 0===n.offsetWidth||0===n.offsetHeight||"none"===n.style.display}),n.jgrid._multiselect=!1,n.ui&&n.ui.multiselect){if(n.ui.multiselect.prototype._setSelected){var t=n.ui.multiselect.prototype._setSelected;n.ui.multiselect.prototype._setSelected=function(i,r){var f=t.call(this,i,r),u;return r&&this.selectedList&&(u=this.element,this.selectedList.find("li").each(function(){n(this).data("optionLink")&&n(this).data("optionLink").remove().appendTo(u)})),f}}n.ui.multiselect.prototype.destroy&&(n.ui.multiselect.prototype.destroy=function(){this.element.show();this.container.remove();void 0===n.Widget?n.widget.prototype.destroy.apply(this,arguments):n.Widget.prototype.destroy.apply(this,arguments)});n.jgrid._multiselect=!0}n.jgrid.extend({sortableColumns:function(t){return this.each(function(){function s(){i.p.disableClick=!0;i.p.frozenColumns&&(n(i).jqGrid("destroyFrozenColumns"),f=!0)}function h(){setTimeout(function(){i.p.disableClick=!1;f&&(n(i).jqGrid("setFrozenColumns"),f=!1)},50)}var i=this,u=n.jgrid.jqID(i.p.id),f=!1,r={tolerance:"pointer",axis:"x",scrollSensitivity:"1",items:">th:not(:has(#jqgh_"+u+"_cb,#jqgh_"+u+"_rn,#jqgh_"+u+"_subgrid),:hidden)",placeholder:{element:function(t){return n(document.createElement(t[0].nodeName)).addClass(t[0].className+" ui-sortable-placeholder ui-state-highlight").removeClass("ui-sortable-helper")[0]},update:function(n,t){t.height(n.currentItem.innerHeight()-parseInt(n.currentItem.css("paddingTop")||0,10)-parseInt(n.currentItem.css("paddingBottom")||0,10));t.width(n.currentItem.innerWidth()-parseInt(n.currentItem.css("paddingLeft")||0,10)-parseInt(n.currentItem.css("paddingRight")||0,10))}},update:function(t,r){var e=n(r.item).parent(),o=n(">th",e),s=i.p.colModel,f={},h=i.p.id+"_",u;n.each(s,function(n){f[this.name]=n});u=[];o.each(function(){var t=n(">div",this).get(0).id.replace(/^jqgh_/,"").replace(h,"");f.hasOwnProperty(t)&&u.push(f[t])});n(i).jqGrid("remapColumns",u,!0,!0);n.isFunction(i.p.sortable.update)&&i.p.sortable.update(u)}},c,l,e,o;(i.p.sortable.options?n.extend(r,i.p.sortable.options):n.isFunction(i.p.sortable)&&(i.p.sortable={update:i.p.sortable}),r.start)?(c=r.start,r.start=function(n,t){s();c.call(this,n,t)}):r.start=s;r.stop?(l=r.stop,r.stop=function(n,t){h();l.call(this,n,t)}):r.stop=h;i.p.sortable.exclude&&(r.items+=":not("+i.p.sortable.exclude+")");e=t.sortable(r);o=e.data("sortable")||e.data("uiSortable");null!=o&&(o.data("sortable").floating=!0)})},columnChooser:function(t){function w(n,t,i){var r,u;return t>=0?(r=n.slice(),u=r.splice(t,Math.max(n.length-t,t)),t>n.length&&(t=n.length),r[t]=i,r.concat(u)):n}function o(t,i){t&&("string"==typeof t?n.fn[t]&&n.fn[t].apply(i,n.makeArray(arguments).slice(2)):n.isFunction(t)&&t.apply(i,n.makeArray(arguments).slice(2)))}function l(){var n=y(r),t=n.container.closest(".ui-dialog-content");t.length>0&&"object"==typeof t[0].style?t[0].style.width="":t.css("width","");n.selectedList.height(Math.max(n.selectedContainer.height()-n.selectedActions.outerHeight()-1,1));n.availableList.height(Math.max(n.availableContainer.height()-n.availableActions.outerHeight()-1,1))}var f,r,a,v,s,u,e,i=this,c={},b=[],h=i.jqGrid("getGridParam","colModel"),k=i.jqGrid("getGridParam","colNames"),y=function(t){return n.ui.multiselect.prototype&&t.data(n.ui.multiselect.prototype.widgetFullName||n.ui.multiselect.prototype.widgetName)||t.data("ui-multiselect")||t.data("multiselect")},d=n.jgrid.getRegional(this[0],"col"),p;if(!n("#colchooser_"+n.jgrid.jqID(i[0].p.id)).length){if(f=n('<div id="colchooser_'+i[0].p.id+'" style="position:relative;overflow:hidden"><div><select multiple="multiple"><\/select><\/div><\/div>'),r=n("select",f),t=n.extend({width:400,height:240,classname:null,done:function(n){n&&i.jqGrid("remapColumns",n,!0)},msel:"multiselect",dlog:"dialog",dialog_opts:{minWidth:470,dialogClass:"ui-jqdialog"},dlog_opts:function(t){var i={};return i[t.bSubmit]=function(){t.apply_perm();t.cleanup(!1)},i[t.bCancel]=function(){t.cleanup(!0)},n.extend(!0,{buttons:i,close:function(){t.cleanup(!0)},modal:t.modal||!1,resizable:t.resizable||!0,width:t.width+70,resize:l},t.dialog_opts||{})},apply_perm:function(){var u=[];n("option",r).each(function(){n(this).is(":selected")?i.jqGrid("showCol",h[this.value].name):i.jqGrid("hideCol",h[this.value].name)});n("option[selected]",r).each(function(){u.push(parseInt(this.value,10))});n.each(u,function(){delete c[h[parseInt(this,10)].name]});n.each(c,function(){var n=parseInt(this,10);u=w(u,n,n)});t.done&&t.done.call(i,u);i.jqGrid("setGridWidth",i[0].p.width,i[0].p.shrinkToFit)},cleanup:function(n){o(t.dlog,f,"destroy");o(t.msel,r,"destroy");f.remove();n&&t.done&&t.done.call(i)},msel_opts:{}},d,t||{}),n.ui&&n.ui.multiselect&&n.ui.multiselect.defaults){if(!n.jgrid._multiselect)return void alert("Multiselect plugin loaded after jqGrid. Please load the plugin before the jqGrid!");t.msel_opts=n.extend(n.ui.multiselect.defaults,t.msel_opts)}t.caption&&f.attr("title",t.caption);t.classname&&(f.addClass(t.classname),r.addClass(t.classname));t.width&&(n(">div",f).css({width:t.width,margin:"0 auto"}),r.css("width",t.width));t.height&&(n(">div",f).css("height",t.height),r.css("height",t.height-10));r.empty();n.each(h,function(t){if(c[this.name]=t,this.hidedlg)return void(this.hidden||b.push(t));r.append("<option value='"+t+"' "+(this.hidden?"":"selected='selected'")+">"+n.jgrid.stripHtml(k[t])+"<\/option>")});a=n.isFunction(t.dlog_opts)?t.dlog_opts.call(i,t):t.dlog_opts;o(t.dlog,f,a);v=n.isFunction(t.msel_opts)?t.msel_opts.call(i,t):t.msel_opts;o(t.msel,r,v);s=n("#colchooser_"+n.jgrid.jqID(i[0].p.id));p=n(".ui-jqgrid").css("font-size")||"11px";s.parent().css("font-size",p);s.css({margin:"auto"});s.find(">div").css({width:"100%",height:"100%",margin:"auto"});u=y(r);u.container.css({width:"100%",height:"100%",margin:"auto"});u.selectedContainer.css({width:100*u.options.dividerLocation+"%",height:"100%",margin:"auto",boxSizing:"border-box"});u.availableContainer.css({width:100-100*u.options.dividerLocation+"%",height:"100%",margin:"auto",boxSizing:"border-box"});u.selectedList.css("height","auto");u.availableList.css("height","auto");e=Math.max(u.selectedList.height(),u.availableList.height());e=Math.min(e,n(window).height());u.selectedList.css("height",e);u.availableList.css("height",e);l()}},sortableRows:function(t){return this.each(function(){var i=this;i.grid&&(i.p.treeGrid||n.fn.sortable&&(t=n.extend({cursor:"move",axis:"y",items:" > .jqgrow"},t||{}),t.start&&n.isFunction(t.start)?(t._start_=t.start,delete t.start):t._start_=!1,t.update&&n.isFunction(t.update)?(t._update_=t.update,delete t.update):t._update_=!1,t.start=function(r,u){if(n(u.item).css("border-width","0"),n("td",u.item).each(function(n){this.style.width=i.grid.cols[n].style.width}),i.p.subGrid){var f=n(u.item).attr("id");try{n(i).jqGrid("collapseSubGridRow",f)}catch(t){}}t._start_&&t._start_.apply(this,[r,u])},t.update=function(r,u){n(u.item).css("border-width","");!0===i.p.rownumbers&&n("td.jqgrid-rownum",i.rows).each(function(t){n(this).html(t+1+(parseInt(i.p.page,10)-1)*parseInt(i.p.rowNum,10))});t._update_&&t._update_.apply(this,[r,u])},n("tbody:first",i).sortable(t),n("tbody:first > .jqgrow",i).disableSelection()))})},gridDnD:function(t){return this.each(function(){function f(){var t=n.data(i,"dnd");n("tr.jqgrow:not(.ui-draggable)",i).draggable(n.isFunction(t.drag)?t.drag.call(n(i),t):t.drag)}var u,e,i=this,r;if(i.grid&&!i.p.treeGrid&&n.fn.draggable&&n.fn.droppable){if(void 0===n("#jqgrid_dnd")[0]&&n("body").append("<table id='jqgrid_dnd' class='ui-jqgrid-dnd'><\/table>"),"string"==typeof t&&"updateDnD"===t&&!0===i.p.jqgdnd)return void f();if(t=n.extend({drag:function(t){return n.extend({start:function(r,u){var f,e;if(i.p.subGrid){e=n(u.helper).attr("id");try{n(i).jqGrid("collapseSubGridRow",e)}catch(t){}}for(f=0;f<n.data(i,"dnd").connectWith.length;f++)0===n(n.data(i,"dnd").connectWith[f]).jqGrid("getGridParam","reccount")&&n(n.data(i,"dnd").connectWith[f]).jqGrid("addRowData","jqg_empty_row",{});u.helper.addClass("ui-state-highlight");n("td",u.helper).each(function(n){this.style.width=i.grid.headers[n].width+"px"});t.onstart&&n.isFunction(t.onstart)&&t.onstart.call(n(i),r,u)},stop:function(r,u){var f,e;for(u.helper.dropped&&!t.dragcopy&&(e=n(u.helper).attr("id"),void 0===e&&(e=n(this).attr("id")),n(i).jqGrid("delRowData",e)),f=0;f<n.data(i,"dnd").connectWith.length;f++)n(n.data(i,"dnd").connectWith[f]).jqGrid("delRowData","jqg_empty_row");t.onstop&&n.isFunction(t.onstop)&&t.onstop.call(n(i),r,u)}},t.drag_opts||{})},drop:function(t){return n.extend({accept:function(t){var i,u;return n(t).hasClass("jqgrow")?(r=n(t).closest("table.ui-jqgrid-btable"),i=n(this).find("table.ui-jqgrid-btable:first")[0],r.length>0&&void 0!==n.data(r[0],"dnd"))?(u=n.data(r[0],"dnd").connectWith,-1!==n.inArray("#"+n.jgrid.jqID(i.id),u)):!1:t},drop:function(i,u){var o,s;if(n(u.draggable).hasClass("jqgrow")){var p=n(u.draggable).attr("id"),f=u.draggable.parent().parent().jqGrid("getRowData",p),l=[],e=n(this).find("table.ui-jqgrid-btable:first")[0];if(n.isPlainObject(f)&&(l=Object.keys(f)),!t.dropbyname){var h,c,v={},a=0,y=n("#"+n.jgrid.jqID(e.id)).jqGrid("getGridParam","colModel");try{for(h=0;h<y.length;h++)"cb"!==(c=y[h].name)&&"rn"!==c&&"subgrid"!==c&&(void 0!==l[a]&&(v[c]=f[l[a]]),a++);f=v}catch(t){}}(u.helper.dropped=!0,n.data(r[0],"dnd").beforedrop&&n.isFunction(n.data(r[0],"dnd").beforedrop))&&(o=n.data(r[0],"dnd").beforedrop.call(e,i,u,f,n(r[0]),n(e)),void 0!==o&&null!==o&&"object"==typeof o&&(f=o));u.helper.dropped&&(t.autoid&&(n.isFunction(t.autoid)?s=t.autoid.call(e,f):(s=Math.ceil(1e3*Math.random()),s=t.autoidprefix+s)),n("#"+n.jgrid.jqID(e.id)).jqGrid("addRowData",s,f,t.droppos));t.ondrop&&n.isFunction(t.ondrop)&&t.ondrop.call(e,i,u,f)}}},t.drop_opts||{})},onstart:null,onstop:null,beforedrop:null,ondrop:null,drop_opts:{activeClass:"ui-state-active",hoverClass:"ui-state-hover",tolerance:"intersect"},drag_opts:{revert:"invalid",helper:"clone",cursor:"move",appendTo:"#jqgrid_dnd",zIndex:5e3},dragcopy:!1,dropbyname:!1,droppos:"first",autoid:!0,autoidprefix:"dnd_"},t||{}),t.connectWith)for(t.connectWith=t.connectWith.split(","),t.connectWith=n.map(t.connectWith,function(t){return n.trim(t)}),n.data(i,"dnd",t),0===i.p.reccount||i.p.jqgdnd||f(),i.p.jqgdnd=!0,u=0;u<t.connectWith.length;u++)e=t.connectWith[u],n(e).closest(".ui-jqgrid-bdiv").droppable(n.isFunction(t.drop)?t.drop.call(n(i),t):t.drop)}})},gridResize:function(t){return this.each(function(){var i=this,r=n.jgrid.jqID(i.p.id),u,f;i.grid&&n.fn.resizable&&((t=n.extend({},t||{}),t.alsoResize?(t._alsoResize_=t.alsoResize,delete t.alsoResize):t._alsoResize_=!1,t.stop&&n.isFunction(t.stop)?(t._stop_=t.stop,delete t.stop):t._stop_=!1,t.stop=function(f,e){n(i).jqGrid("setGridParam",{height:n("#gview_"+r+" .ui-jqgrid-bdiv").height()});n(i).jqGrid("setGridWidth",e.size.width,t.shrinkToFit);t._stop_&&t._stop_.call(i,f,e);i.p.caption&&n("#gbox_"+r).css({height:"auto"});i.p.frozenColumns&&(u&&clearTimeout(u),u=setTimeout(function(){u&&clearTimeout(u);n("#"+r).jqGrid("destroyFrozenColumns");n("#"+r).jqGrid("setFrozenColumns")}))},t._alsoResize_)?(f="{'#gview_"+r+" .ui-jqgrid-bdiv':true,'"+t._alsoResize_+"':true}",t.alsoResize=eval("("+f+")")):t.alsoResize=n(".ui-jqgrid-bdiv","#gview_"+r),delete t._alsoResize_,n("#gbox_"+r).resizable(t))})}})});!function(n){"use strict";"function"==typeof define&&define.amd?define(["jquery"],n):n(jQuery)}(function(n){"use strict";var t,i=n();n.fn.html5sortable=function(r){var u=String(r);return r=n.extend({connectWith:!1},r),this.each(function(){var e,o,s,f;if(/^enable|disable|destroy$/.test(u))return e=n(this).children(n(this).data("items")).attr("draggable","enable"===u),void("destroy"===u&&e.add(this).removeData("connectWith items").off("dragstart.h5s dragend.h5s selectstart.h5s dragover.h5s dragenter.h5s drop.h5s"));e=n(this).children(r.items);f=n("<"+(/^ul|ol$/i.test(this.tagName)?"li":/^tbody$/i.test(this.tagName)?"tr":"div")+' class="sortable-placeholder '+r.placeholderClass+'">').html("&nbsp;");e.find(r.handle).mousedown(function(){o=!0}).mouseup(function(){o=!1});n(this).data("items",r.items);i=i.add(f);r.connectWith&&n(r.connectWith).add(this).data("connectWith",r.connectWith);e.attr("draggable","true").on("dragstart.h5s",function(i){if(r.handle&&!o)return!1;o=!1;var u=i.originalEvent.dataTransfer;u.effectAllowed="move";u.setData("Text","dummy");s=(t=n(this)).addClass("sortable-dragging").index()}).on("dragend.h5s",function(){t&&(t.removeClass("sortable-dragging").show(),i.detach(),s!==t.index()&&t.parent().trigger("sortupdate",{item:t,startindex:s,endindex:t.index()}),t=null)}).not("a[href], img").on("selectstart.h5s",function(){return this.dragDrop&&this.dragDrop(),!1}).end().add([this,f]).on("dragover.h5s dragenter.h5s drop.h5s",function(u){return!e.is(t)&&r.connectWith!==n(t).parent().data("connectWith")||("drop"===u.type?(u.stopPropagation(),i.filter(":visible").after(t),t.trigger("dragend.h5s"),!1):(u.preventDefault(),u.originalEvent.dataTransfer.dropEffect="move",e.is(this)?(r.forcePlaceholderSize&&f.height(t.outerHeight()),t.hide(),n(this)[f.index()<n(this).index()?"after":"before"](f),i.not(f).detach()):i.is(this)||n(this).children(r.items).length||(i.detach(),n(this).append(f)),!1))})})}});!function(n){"use strict";"function"==typeof define&&define.amd?define(["jquery","../grid.base"],n):n(jQuery)}(function(n){n.jgrid=n.jgrid||{};n.jgrid.hasOwnProperty("regional")||(n.jgrid.regional=[]);n.jgrid.regional.ru={defaults:{recordtext:"Просмотр {0} - {1} из {2}",emptyrecords:"Нет записей для просмотра",loadtext:"Загрузка...",pgtext:"Стр. {0} из {1}",savetext:"Сохранения...",pgfirst:"Первая",pglast:"Последняя",pgnext:"Следующая",pgprev:"Предыдущая",pgrecs:"Записей на стр.",showhide:"Показать/Скрыть таблицу",pagerCaption:"Грид::Параметры страницы",pageText:"Страница:",recordPage:"Записей на стр.",nomorerecs:"Нет больше записей...",scrollPullup:"Потяните, чтобы загрузить более...",scrollPulldown:"Потяните вниз чтобы обновить...",scrollRefresh:"Отпустите, чтобы обновить..."},search:{caption:"Поиск...",Find:"Найти",Reset:"Сброс",odata:[{oper:"eq",text:"равно"},{oper:"ne",text:"не равно"},{oper:"lt",text:"меньше"},{oper:"le",text:"меньше или равно"},{oper:"gt",text:"больше"},{oper:"ge",text:"больше или равно"},{oper:"bw",text:"начинается с"},{oper:"bn",text:"не начинается с"},{oper:"in",text:"находится в"},{oper:"ni",text:"не находится в"},{oper:"ew",text:"заканчивается на"},{oper:"en",text:"не заканчивается на"},{oper:"cn",text:"содержит"},{oper:"nc",text:"не содержит"},{oper:"nu",text:"равно NULL"},{oper:"nn",text:"не равно NULL"},{oper:"bt",text:"между"}],groupOps:[{op:"AND",text:"все"},{op:"OR",text:"любой"}],operandTitle:"Выбрать поисковую операцию.",resetTitle:"Сбросить поиск",addsubgrup:"Добавить группу",addrule:"Добавить правило",delgroup:"Удалить группу",delrule:"Удалить правило"},edit:{addCaption:"Добавить запись",editCaption:"Редактировать запись",bSubmit:"Сохранить",bCancel:"Отмена",bClose:"Закрыть",saveData:"Данные были измененны! Сохранить изменения?",bYes:"Да",bNo:"Нет",bExit:"Отмена",msg:{required:"Поле является обязательным",number:"Пожалуйста, введите правильное число",minValue:"значение должно быть больше либо равно",maxValue:"значение должно быть меньше либо равно",email:"некорректное значение e-mail",integer:"Пожалуйста, введите целое число",date:"Пожалуйста, введите правильную дату",url:"неверная ссылка. Необходимо ввести префикс ('http://' или 'https://')",nodefined:" не определено!",novalue:" возвращаемое значение обязательно!",customarray:"Пользовательская функция должна возвращать массив!",customfcheck:"Пользовательская функция должна присутствовать в случаи пользовательской проверки!"}},view:{caption:"Просмотр записи",bClose:"Закрыть"},del:{caption:"Удалить",msg:"Удалить выбранную запись(и)?",bSubmit:"Удалить",bCancel:"Отмена"},nav:{edittext:" ",edittitle:"Редактировать выбранную запись",addtext:" ",addtitle:"Добавить новую запись",deltext:" ",deltitle:"Удалить выбранную запись",searchtext:" ",searchtitle:"Найти записи",refreshtext:"",refreshtitle:"Обновить таблицу",alertcap:"Внимание",alerttext:"Пожалуйста, выберите запись",viewtext:"",viewtitle:"Просмотреть выбранную запись",savetext:"",savetitle:"Сохранить запись",canceltext:"",canceltitle:"Отмена сохранения",selectcaption:"Действия..."},col:{caption:"Показать/скрыть столбцы",bSubmit:"Сохранить",bCancel:"Отмена"},errors:{errcap:"Ошибка",nourl:"URL не установлен",norecords:"Нет записей для обработки",model:"Число полей не соответствует числу столбцов таблицы!"},formatter:{integer:{thousandsSeparator:" ",defaultValue:"0"},number:{decimalSeparator:",",thousandsSeparator:" ",decimalPlaces:2,defaultValue:"0,00"},currency:{decimalSeparator:",",thousandsSeparator:" ",decimalPlaces:2,prefix:"",suffix:"",defaultValue:"0,00"},date:{dayNames:["Вс","Пн","Вт","Ср","Чт","Пт","Сб","Воскресение","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],monthNames:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек","Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],AmPm:["am","pm","AM","PM"],S:function(n){return n<11||n>13?["st","nd","rd","th"][Math.min((n-1)%10,3)]:"th"},srcformat:"Y-m-d",newformat:"d.m.Y",parseRe:/[#%\\\/:_;.,\t\s-]/,masks:{ISO8601Long:"Y-m-d H:i:s",ISO8601Short:"Y-m-d",ShortDate:"n.j.Y",LongDate:"l, F d, Y",FullDateTime:"l, F d, Y G:i:s",MonthDay:"F d",ShortTime:"G:i",LongTime:"G:i:s",SortableDateTime:"Y-m-d\\TH:i:s",UniversalSortableDateTime:"Y-m-d H:i:sO",YearMonth:"F, Y"},reformatAfterEdit:!1,userLocalTime:!1},baseLinkUrl:"",showAction:"",target:"",checkbox:{disabled:!0},idName:"id"},colmenu:{sortasc:"Сортировка по возрастанию",sortdesc:"Сортировка по убыванию",columns:"Колонны",filter:"Филтрировать",grouping:"Группа по",ungrouping:"Разгруппировать",searchTitle:"Строки со значениями",freeze:"Закрепление",unfreeze:"Отмена закрепление",reorder:"Переместить в порядок"}}});