function SetPostbackValue(n,t){t!=undefined&&t!=null&&t!=""&&$('input[name="'+n+'"]').val(decodeURIComponent(t))}var SLOW_LIMIT=100,MIN_LENGTH=3;$(function(){$.widget("custom.combobox",{_create:function(){this.wrapper=$("<div>").addClass("input-group custom-combobox").insertAfter(this.element);this.element.hide();this._createAutocomplete();this._createShowAllButton();this.element.get(0).length>SLOW_LIMIT&&(this.input.data("uiAutocomplete").options.minLength=MIN_LENGTH,this._createInfoMessage())},_createInfoMessage:function(){'<div class="infoMessage"><\/div>';var n=$("<div class='infoMessage'>").text("Начните вводить текст чтобы выбрать значение");n.insertAfter(this.input.parent())},_createAutocomplete:function(){var n=this.element.children(":selected"),t=n.val()?n.text():"";this.input=$("<input>").appendTo(this.wrapper).val(t).attr("title","").addClass("form-control custom-combobox-input ui-widget ui-widget-content ui-state-default ui-corner-left").autocomplete({delay:0,minLength:0,source:$.proxy(this,"_source")}).focus(function(){if($(this).val()!=""){$(this).autocomplete("search","");var t=$(this).data("uiAutocomplete").menu.element,n=t.find("li:contains('"+$(this).val()+"')");n&&n.length==1&&n.addClass("ui-state-focus")}});this._on(this.input,{autocompleteselect:function(n,t){t.item.option.selected=!0;this._trigger("select",n,{item:t.item.option});this.element.change()},autocompletechange:"_removeIfInvalid"})},_renderFullMenu:function(n){var e=$(this).data("uiAutocomplete").menu.element,o=e.find("li:contains('"+$(this).val()+"')"),r=this,i=this.input,u=i.data("uiAutocomplete").menu.element,f=[],t;for(n=this._normalize(n),i.data("uiAutocomplete").menuAll=i.data("uiAutocomplete").menu.element.clone(!0).appendTo("body"),t=0;t<n.length;t++)f[t]='<li class="ui-menu-item" role="menuitem"><a class="ui-corner-all" tabindex="-1">'+n[t].label+"<\/a><\/li>";u.append(f.join(""));this._resizeMenu();setTimeout(function(){r._setupMenuItem.call(r,u.children("li"),n)},0);i.isFullMenu=!0},_createShowAllButton:function(){var n=this.input,t=!1;$("<span role='button' ><span class='ui-button-icon ui-icon ui-icon-triangle-1-s'><\/span><span class='ui-button-icon-space'> <\/span><\/span>").attr("tabIndex",-1).attr("title","Показать все элементы").tooltip().appendTo(this.wrapper).removeClass("ui-corner-all").addClass("input-group-addon ui-button ui-widget custom-combobox-toggle").on("mousedown",function(){t=n.autocomplete("widget").is(":visible")}).on("click",function(){(n.trigger("focus"),t)||n.autocomplete("search","")})},_source:function(n,t){var i=new RegExp($.ui.autocomplete.escapeRegex(n.term),"i");t(this.element.children("option").map(function(){var t=$(this).text();if(this.value&&(!n.term||i.test(t)))return{label:t,value:t,option:this}}))},_removeIfInvalid:function(n,t){if(!t.item){var r=this.input.val(),u=r.toLowerCase(),i=!1;(this.element.children("option").each(function(){if($(this).text().toLowerCase()===u)return this.selected=i=!0,!1}),i)||(this.input.autocomplete("instance").term="",this.element.val(""))}},_destroy:function(){this.wrapper.remove();this.element.show()}});$.widget("custom.searchcombobox",{_create:function(){this.wrapper=$("<div>").addClass("input-group custom-combobox").insertAfter(this.element);this.element.hide();this.element.attr("disabled","disabled");this._createAutocomplete();this.element.get(0).length>SLOW_LIMIT&&(this.input.data("uiAutocomplete").options.minLength=MIN_LENGTH,this._createInfoMessage())},_createInfoMessage:function(){'<div class="infoMessage"><\/div>';var n=$("<div class='infoMessage'>").text("Начните вводить текст чтобы выбрать значение");n.insertAfter(this.input.parent())},_createAutocomplete:function(){var n=this.element.children(":selected"),i=n.val()?n.text():"",r=this.element.css("width"),u=this.element.attr("name").replace("Combo",""),t;this.input=$("<input>").appendTo(this.wrapper).val(i).attr("title","").attr("name","searchString").css("width",r).css("margin-top","1px").addClass("form-control custom-combobox-input ui-widget ui-widget-content ui-state-default ui-corner-left").autocomplete({delay:0,minLength:0,source:$.proxy(this,"_source")}).focus(function(){if($(this).val()!=""){$(this).autocomplete("search","");var t=$(this).data("uiAutocomplete").menu.element,n=t.find("li:contains('"+$(this).val()+"')");n&&n.length==1&&n.addClass("ui-state-focus")}}).keyup(function(n){n.keyCode==13&&$("form").submit()});t=$('<span class="btn btn-default glyphicon glyphicon-search"><\/span>').css("margin-left","-2px").css("border-left-style","hidden").click(function(){$("form").submit()});t.insertAfter(this.input);this._on(this.input,{autocompleteselect:function(n,t){t.item.option.selected=!0;this._trigger("select",n,{item:t.item.option});this.input.val(t.item.option.text);$("form").submit()},autocompletechange:"_removeIfInvalid"})},_renderFullMenu:function(n){var e=$(this).data("uiAutocomplete").menu.element,o=e.find("li:contains('"+$(this).val()+"')"),r=this,i=this.input,u=i.data("uiAutocomplete").menu.element,f=[],t;for(n=this._normalize(n),i.data("uiAutocomplete").menuAll=i.data("uiAutocomplete").menu.element.clone(!0).appendTo("body"),t=0;t<n.length;t++)f[t]='<li class="ui-menu-item" role="menuitem"><a class="ui-corner-all" tabindex="-1">'+n[t].label+"<\/a><\/li>";u.append(f.join(""));this._resizeMenu();setTimeout(function(){r._setupMenuItem.call(r,u.children("li"),n)},0);i.isFullMenu=!0},_source:function(n,t){var i=new RegExp($.ui.autocomplete.escapeRegex(n.term),"i");t(this.element.children("option").map(function(){var t=$(this).text();if(this.value&&(!n.term||i.test(t)))return{label:t,value:t,option:this}}))},_removeIfInvalid:function(n,t){if(!t.item){var r=this.input.val(),u=r.toLowerCase(),i=!1;(this.element.children("option").each(function(){if($(this).text().toLowerCase()===u)return this.selected=i=!0,!1}),i)||(this.input.autocomplete("instance").term="",this.element.val(""))}},_destroy:function(){this.wrapper.remove();this.element.show()}})});